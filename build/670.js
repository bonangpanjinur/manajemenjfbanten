"use strict";(globalThis.webpackChunkumroh_manager_hybrid_src=globalThis.webpackChunkumroh_manager_hybrid_src||[]).push([[670],{670:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var r=a(609),n=a(899),l=a(313);const m=()=>(0,r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},(0,r.createElement)("polyline",{points:"6 9 6 2 18 2 18 9"}),(0,r.createElement)("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),(0,r.createElement)("rect",{x:"6",y:"14",width:"12",height:"8"})),s=()=>(0,r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},(0,r.createElement)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,r.createElement)("polyline",{points:"7 10 12 15 17 10"}),(0,r.createElement)("line",{x1:"12",y1:"15",x2:"12",y2:"3"})),c=()=>{const{api:e}=(0,n.g)(),[t,a]=(0,r.useState)([]),[c,o]=(0,r.useState)(""),[i,d]=(0,r.useState)(null),[p,b]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{e.get("/packages?status=active").then(e=>a(e||[])).catch(console.error)},[]),(0,r.createElement)("div",{className:"p-6 space-y-6 min-h-screen bg-gray-50"},(0,r.createElement)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 print:hidden"},(0,r.createElement)("div",null,(0,r.createElement)("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2"},"Manifest Keberangkatan"),(0,r.createElement)("p",{className:"text-sm text-gray-500"},"Daftar penumpang, mahram, dan rooming list.")),(0,r.createElement)("div",{className:"flex gap-2"},(0,r.createElement)("select",{className:"border rounded p-2 bg-white shadow-sm",value:c,onChange:t=>{o(t.target.value),(async t=>{if(t){b(!0);try{const a=await e.get(`/manifest/${t}`);d(a)}catch(e){console.error(e)}finally{b(!1)}}})(t.target.value)}},(0,r.createElement)("option",{value:""},"-- Pilih Paket Keberangkatan --"),t.map(e=>(0,r.createElement)("option",{key:e.id,value:e.id},e.name," (",new Date(e.departure_date).toLocaleDateString("id-ID"),")"))))),p?(0,r.createElement)(l.A,{text:"Mengambil data manifest..."}):i?(0,r.createElement)("div",{className:"bg-white shadow-lg rounded-xl overflow-hidden print:shadow-none print:w-full"},(0,r.createElement)("div",{className:"p-6 border-b bg-blue-50 print:bg-white print:border-b-2 print:border-black"},(0,r.createElement)("div",{className:"flex justify-between items-end"},(0,r.createElement)("div",null,(0,r.createElement)("h2",{className:"text-xl font-bold uppercase tracking-wide text-gray-800 print:text-black"},i.package.name),(0,r.createElement)("div",{className:"text-gray-600 print:text-black mt-1 text-sm"},(0,r.createElement)("span",{className:"mr-4"},"âœˆï¸ ",i.package.airline_name||"Belum set maskapai"),(0,r.createElement)("span",null,"ðŸ“… ",new Date(i.package.departure_date).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})))),(0,r.createElement)("div",{className:"text-right text-sm print:text-xs"},(0,r.createElement)("p",null,"Total: ",(0,r.createElement)("strong",{className:"text-lg"},i.stats.total)," Pax"),(0,r.createElement)("p",{className:"text-gray-500 print:text-black"},"L: ",i.stats.pria," | P: ",i.stats.wanita))),(0,r.createElement)("div",{className:"mt-4 flex gap-2 print:hidden"},(0,r.createElement)("button",{onClick:()=>window.print(),className:"flex items-center gap-1 px-3 py-1.5 bg-gray-800 text-white rounded text-sm hover:bg-black transition"},(0,r.createElement)(m,null)," Cetak Manifest"),(0,r.createElement)("button",{onClick:()=>{if(!i||!i.manifest)return;let e="data:text/csv;charset=utf-8,"+[["No","Nama Lengkap","Gender","No Paspor","NIK","Mahram","Hubungan","Hotel","No Kamar"],...i.manifest.map((e,t)=>[t+1,e.full_name,e.gender,e.passport_number||"-","'"+(e.nik||"-"),e.mahram_name||"-",e.relation||"-",e.hotel_name||"-",e.room_number?`${e.room_number} (${e.room_type})`:"-"])].map(e=>e.join(",")).join("\n");const t=encodeURI(e),a=document.createElement("a");a.setAttribute("href",t),a.setAttribute("download",`manifest_paket_${c}.csv`),document.body.appendChild(a),a.click()},className:"flex items-center gap-1 px-3 py-1.5 bg-green-600 text-white rounded text-sm hover:bg-green-700 transition"},(0,r.createElement)(s,null)," Export CSV"))),(0,r.createElement)("div",{className:"overflow-x-auto"},(0,r.createElement)("table",{className:"w-full text-sm text-left"},(0,r.createElement)("thead",{className:"bg-gray-100 text-gray-600 uppercase text-xs font-bold print:bg-gray-200 print:text-black"},(0,r.createElement)("tr",null,(0,r.createElement)("th",{className:"px-4 py-3 w-10 border-b"},"No"),(0,r.createElement)("th",{className:"px-4 py-3 border-b"},"Nama Jamaah"),(0,r.createElement)("th",{className:"px-4 py-3 w-16 border-b"},"L/P"),(0,r.createElement)("th",{className:"px-4 py-3 border-b"},"No. Paspor"),(0,r.createElement)("th",{className:"px-4 py-3 border-b"},"Mahram / Keluarga"),(0,r.createElement)("th",{className:"px-4 py-3 border-b"},"Hotel & Kamar"))),(0,r.createElement)("tbody",{className:"divide-y divide-gray-200"},0===i.manifest.length&&(0,r.createElement)("tr",null,(0,r.createElement)("td",{colSpan:"6",className:"p-6 text-center text-gray-400"},"Belum ada jamaah terdaftar di paket ini.")),i.manifest.map((e,t)=>(0,r.createElement)("tr",{key:e.id,className:"hover:bg-gray-50 print:hover:bg-transparent"},(0,r.createElement)("td",{className:"px-4 py-2 border-b print:border-gray-300"},t+1),(0,r.createElement)("td",{className:"px-4 py-2 font-medium border-b print:border-gray-300"},e.full_name,(0,r.createElement)("div",{className:"text-xs text-gray-400 print:hidden"},"NIK: ",e.nik)),(0,r.createElement)("td",{className:"px-4 py-2 border-b print:border-gray-300"},e.gender),(0,r.createElement)("td",{className:"px-4 py-2 font-mono border-b print:border-gray-300"},e.passport_number||"-"),(0,r.createElement)("td",{className:"px-4 py-2 text-gray-600 border-b print:border-gray-300"},e.mahram_name?(0,r.createElement)("span",null,e.mahram_name," ",(0,r.createElement)("span",{className:"text-xs bg-gray-100 px-1 rounded border print:border-black print:bg-transparent"},"(",e.relation,")")):"-"),(0,r.createElement)("td",{className:"px-4 py-2 border-b print:border-gray-300"},e.room_number?(0,r.createElement)("div",{className:"flex flex-col"},(0,r.createElement)("span",{className:"font-bold text-blue-600 print:text-black"},"Kamar ",e.room_number),(0,r.createElement)("span",{className:"text-xs text-gray-500 print:text-black"},e.hotel_name," (",e.room_type,")")):(0,r.createElement)("span",{className:"text-red-400 text-xs italic print:text-gray-400"},"Belum plotting"))))))),(0,r.createElement)("div",{className:"hidden print:block mt-6 pt-4 border-t text-sm"},(0,r.createElement)("p",null,"Dicetak pada: ",(new Date).toLocaleString("id-ID")),(0,r.createElement)("p",null,"Oleh sistem Manajemen Travel Umroh"))):(0,r.createElement)("div",{className:"text-center py-20 border-2 border-dashed border-gray-300 rounded-xl text-gray-400 bg-white"},(0,r.createElement)("p",{className:"text-lg"},"Silakan pilih paket di atas untuk melihat manifest.")))}}}]);