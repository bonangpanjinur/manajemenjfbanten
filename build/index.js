(()=>{"use strict";var e={338:(e,t,a)=>{var l=a(795);t.H=l.createRoot,l.hydrateRoot},795:e=>{e.exports=window.ReactDOM}},t={};function a(l){var r=t[l];if(void 0!==r)return r.exports;var n=t[l]={exports:{}};return e[l](n,n.exports,a),n.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var l={};a.r(l),a.d(l,{$n:()=>H,Sc:()=>G,pd:()=>I,l6:()=>U,TM:()=>$});const r=window.React;var n=a.n(r),s=a(338);const c=window.umh_wp_data||{},m=c.user||null,i=c.nonce||null,o=c.api_url||"/wp-json/umh/v1",d=(0,r.createContext)(),u=({children:e})=>{const[t,a]=(0,r.useState)(m),l={currentUser:t,setCurrentUser:a,nonce:i,apiUrl:o,adminUrl:c.adminUrl,printUrl:c.printUrl,isWpAdmin:c.is_wp_admin||!1};return(0,r.createElement)(d.Provider,{value:l},e)},p=()=>(0,r.useContext)(d),g=window.wp.apiFetch;var x=a.n(g);const y=(0,r.createContext)(),h=()=>(0,r.useContext)(y),b=({children:e})=>{const{currentUser:t}=p(),[a,l]=(0,r.useState)({packages:[],jamaah:[],finance:[],marketing:[],hr:[],users:[],sub_agents:[],roles:[],logs:[],stats:{},accounts:[],categories:[]}),[n,s]=(0,r.useState)(!0),[c,m]=(0,r.useState)(null),i=["packages","jamaah","finance","categories","finance_accounts","marketing","users","roles","logs","sub_agents","stats"],o=(0,r.useCallback)(async()=>{if(t){s(!0),m(null);try{const e=i.map(e=>x()({path:`/umh/v1/${e}`}).then(t=>({status:"fulfilled",endpoint:e,value:t})).catch(t=>({status:"rejected",endpoint:e,reason:t}))),t=await Promise.all(e),r={...a};t.forEach(e=>{"fulfilled"===e.status?"finance_accounts"===e.endpoint?r.accounts=e.value:"users"===e.endpoint?(r.users=e.value,r.hr=e.value):r[e.endpoint]=e.value:console.warn(`Warning: Failed to fetch ${e.endpoint}`,e.reason)}),l(r)}catch(e){console.error("Critical API Error:",e),m(e.message||"Gagal terhubung ke server.")}finally{s(!1)}}else s(!1)},[t]);(0,r.useEffect)(()=>{o()},[o]);const d={data:a,loading:n,error:c,createOrUpdate:async(e,t,a=null)=>{const r=a?"PUT":"POST",n=a?`/umh/v1/${e}/${a}`:`/umh/v1/${e}`;try{const s=await x()({path:n,method:r,data:t});let c=e;return"finance_accounts"===e&&(c="accounts"),l(e=>{const t=e[c]||[];let l;return l=a?t.map(e=>e.id===a||e.ID===a?s:e):[s,...t],"users"===c?{...e,users:l,hr:l}:{...e,[c]:l}}),s}catch(t){throw console.error(`API Error (${r} ${e}):`,t),new Error(t.message||"Terjadi kesalahan saat menyimpan data.")}},deleteItem:async(e,t)=>{try{await x()({path:`/umh/v1/${e}/${t}`,method:"DELETE"});let a=e;"finance_accounts"===e&&(a="accounts"),l(e=>{const l=(e[a]||[]).filter(e=>e.id!==t&&e.ID!==t);return"users"===a?{...e,users:l,hr:l}:{...e,[a]:l}})}catch(t){throw console.error(`API Error (DELETE ${e}):`,t),new Error(t.message||"Gagal menghapus data.")}},refreshData:async e=>{try{let t=e;"accounts"===e&&(t="finance_accounts"),"hr"===e&&(t="users");const a=await x()({path:`/umh/v1/${t}`});l(t=>{const l={...t,[e]:a};return"users"===e&&(l.hr=a),"hr"===e&&(l.users=a),l})}catch(t){console.error(`Gagal refresh ${e}`,t)}}};return(0,r.createElement)(y.Provider,{value:d},e)},E=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},f=(...e)=>e.filter((e,t,a)=>Boolean(e)&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),v=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var N={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const w=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:n="",children:s,iconNode:c,...m},i)=>(0,r.createElement)("svg",{ref:i,...N,width:t,height:t,stroke:e,strokeWidth:l?24*Number(a)/Number(t):a,className:f("lucide",n),...!s&&!v(m)&&{"aria-hidden":"true"},...m},[...c.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(s)?s:[s]])),k=(e,t)=>{const a=(0,r.forwardRef)(({className:a,...l},n)=>{return(0,r.createElement)(w,{ref:n,iconNode:t,className:f(`lucide-${s=E(e),s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,a),...l});var s});return a.displayName=E(e),a},_=k("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]),C=()=>(0,r.createElement)("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg z-50 min-h-[200px]"},(0,r.createElement)(_,{size:32,className:"animate-spin text-blue-600"})),S=()=>(0,r.createElement)("div",{className:"fixed inset-0 bg-white flex items-center justify-center z-[9999]"},(0,r.createElement)(_,{size:48,className:"animate-spin text-blue-600"})),j=(...e)=>e.filter(Boolean).join(" "),O=({title:e,value:t,icon:a,color:l})=>{const n={primary:"bg-blue-100 text-blue-600",success:"bg-green-100 text-green-600",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-600"};return(0,r.createElement)("div",{className:"bg-white border border-gray-200 rounded-lg p-5 flex items-center gap-4 transition-all duration-200 hover:shadow-lg hover:-translate-y-1"},(0,r.createElement)("div",{className:j("p-3 rounded-full flex items-center justify-center",n[l]||n.primary)},a),(0,r.createElement)("div",{className:"overflow-hidden"},(0,r.createElement)("p",{className:"text-sm font-medium text-gray-500 truncate"},e),(0,r.createElement)("h3",{className:"text-2xl font-bold text-gray-900 truncate"},t)))},M=e=>{if("number"!=typeof e){let t=String(e).replace(/[^0-9,]/g,"");t=t.replace(",","."),e=parseFloat(t)||0}return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e)},P=e=>{if("number"==typeof e)return e;if("string"!=typeof e)return 0;try{const t=String(e).replace(/Rp\s?/g,"").replace(/\./g,"").replace(/,/g,".");return parseFloat(t)||0}catch(e){return 0}},L=e=>{if(!e)return"-";try{const t=new Date(e);return isNaN(t.getTime())?"-":t.toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric",timeZone:"UTC"})}catch(t){return e}},z=e=>{if(!e)return"";try{const t=new Date(e);return isNaN(t.getTime())?"":t.toISOString().split("T")[0]}catch(e){return""}},T=k("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),F=k("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),D=k("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),A=k("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),B=()=>{const{data:e,loading:t}=h(),a=(e.stats,e.jamaah||[]),l=e.packages||[],n=e.finance||[],s=a.length,c=l.filter(e=>"available"===e.status).length,m=n.filter(e=>"income"===e.type).reduce((e,t)=>e+parseFloat(t.amount),0),i=n.filter(e=>"expense"===e.type).reduce((e,t)=>e+parseFloat(t.amount),0);return t&&!e.packages?(0,r.createElement)(C,null):(0,r.createElement)("div",{className:"p-6 space-y-6"},(0,r.createElement)("h1",{className:"text-3xl font-bold text-gray-800"},"Dashboard"),(0,r.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},(0,r.createElement)(O,{title:"Total Jemaah",value:s,icon:(0,r.createElement)(T,{className:"text-blue-600"}),color:"bg-blue-50"}),(0,r.createElement)(O,{title:"Paket Aktif",value:c,icon:(0,r.createElement)(F,{className:"text-green-600"}),color:"bg-green-50"}),(0,r.createElement)(O,{title:"Pemasukan",value:M(m),icon:(0,r.createElement)(D,{className:"text-emerald-600"}),color:"bg-emerald-50"}),(0,r.createElement)(O,{title:"Pengeluaran",value:M(i),icon:(0,r.createElement)(A,{className:"text-red-600"}),color:"bg-red-50"})),(0,r.createElement)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},(0,r.createElement)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100"},(0,r.createElement)("h3",{className:"text-lg font-semibold text-gray-700 mb-4"},"Jemaah Terbaru"),(0,r.createElement)("div",{className:"overflow-hidden"},0===a.length?(0,r.createElement)("p",{className:"text-gray-500 italic"},"Belum ada data jemaah."):(0,r.createElement)("ul",{className:"divide-y divide-gray-100"},a.slice(0,5).map(e=>(0,r.createElement)("li",{key:e.id,className:"py-3 flex justify-between items-center"},(0,r.createElement)("div",null,(0,r.createElement)("p",{className:"font-medium text-gray-800"},e.full_name),(0,r.createElement)("p",{className:"text-xs text-gray-500"},e.passport_number||"No Passport")),(0,r.createElement)("span",{className:"text-xs px-2 py-1 rounded-full "+("registered"===e.status?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700")},e.status)))))),(0,r.createElement)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100"},(0,r.createElement)("h3",{className:"text-lg font-semibold text-gray-700 mb-4"},"Transaksi Terakhir"),(0,r.createElement)("div",{className:"overflow-hidden"},0===n.length?(0,r.createElement)("p",{className:"text-gray-500 italic"},"Belum ada transaksi."):(0,r.createElement)("ul",{className:"divide-y divide-gray-100"},n.slice(0,5).map(e=>(0,r.createElement)("li",{key:e.id,className:"py-3 flex justify-between items-center"},(0,r.createElement)("div",null,(0,r.createElement)("p",{className:"font-medium text-gray-800"},e.description),(0,r.createElement)("p",{className:"text-xs text-gray-500"},e.transaction_date)),(0,r.createElement)("span",{className:"font-bold "+("income"===e.type?"text-green-600":"text-red-600")},"income"===e.type?"+":"-"," ",M(e.amount)))))))))},q=k("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),H=({children:e,variant:t="primary",className:a="",type:l="button",...n})=>{const s={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",warning:"bg-yellow-500 text-white hover:bg-yellow-600 focus:ring-yellow-500",icon:"p-2 text-gray-500 hover:bg-gray-100 rounded-full shadow-none border-none"};return(0,r.createElement)("button",{type:l,className:`px-4 py-2 rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${s[t]||s.primary} ${a}`,...n},e)},I=({label:e,className:t="",error:a,...l})=>(0,r.createElement)("div",{className:"w-full"},e&&(0,r.createElement)("label",{className:"block text-sm font-medium text-gray-700 mb-1"},e),(0,r.createElement)("input",{className:`w-full px-3 py-2 border ${a?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${t}`,...l}),a&&(0,r.createElement)("p",{className:"mt-1 text-xs text-red-500"},a)),$=({label:e,className:t="",error:a,...l})=>(0,r.createElement)("div",{className:"w-full"},e&&(0,r.createElement)("label",{className:"block text-sm font-medium text-gray-700 mb-1"},e),(0,r.createElement)("textarea",{className:`w-full px-3 py-2 border ${a?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${t}`,...l}),a&&(0,r.createElement)("p",{className:"mt-1 text-xs text-red-500"},a)),U=({label:e,children:t,className:a="",error:l,...n})=>(0,r.createElement)("div",{className:"w-full"},e&&(0,r.createElement)("label",{className:"block text-sm font-medium text-gray-700 mb-1"},e),(0,r.createElement)("select",{className:`w-full px-3 py-2 border ${l?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${a}`,...n},t),l&&(0,r.createElement)("p",{className:"mt-1 text-xs text-red-500"},l)),G=({label:e,className:t="",...a})=>(0,r.createElement)("div",{className:`flex items-center ${t}`},(0,r.createElement)("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",...a}),e&&(0,r.createElement)("label",{className:"ml-2 block text-sm text-gray-900"},e)),R=(...e)=>e.filter(Boolean).join(" "),V=({title:e,isOpen:t,onClose:a,children:l,footer:n,size:s="3xl"})=>((0,r.useEffect)(()=>(document.body.style.overflow=t?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[t]),t?(0,r.createElement)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 backdrop-blur-sm flex items-start justify-center p-4 z-[100000] overflow-y-auto pt-10 sm:pt-20",onClick:a},(0,r.createElement)("div",{className:R("bg-white rounded-xl shadow-2xl w-full m-auto flex flex-col max-h-[90vh] transform transition-all",{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl"}[s]||"max-w-3xl"),onClick:e=>e.stopPropagation()},(0,r.createElement)("div",{className:"flex justify-between items-center p-5 border-b border-gray-100 sticky top-0 bg-white rounded-t-xl z-10"},(0,r.createElement)("h3",{className:"text-xl font-bold text-gray-800"},e),(0,r.createElement)("button",{onClick:a,className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors","aria-label":"Close"},(0,r.createElement)(q,{className:"h-6 w-6"}))),(0,r.createElement)("div",{className:"p-6 overflow-y-auto custom-scrollbar"},l),n&&(0,r.createElement)("div",{className:"flex justify-end gap-3 p-4 border-t border-gray-100 bg-gray-50 rounded-b-xl sticky bottom-0 z-10"},n))):null),J=({onCancel:e,submitText:t="Simpan",children:a})=>(0,r.createElement)(r.Fragment,null,(0,r.createElement)(H,{onClick:e,variant:"secondary"},"Batal"),(0,r.createElement)(H,{type:"submit",variant:"primary"},t),a),K=({initialData:e,accounts:t=[],onSubmit:a,onCancel:l})=>{const[n,s]=(0,r.useState)(!1),[c,m]=(0,r.useState)({transaction_date:e?.transaction_date||(new Date).toISOString().split("T")[0],description:e?.description||"",amount:e?.amount||"",type:e?.type||"expense",account_id:e?.account_id||(t.length>0?t[0].id:""),category:e?.category||"Operasional"}),i=e=>{m(t=>({...t,[e.target.name]:e.target.value}))};return(0,r.createElement)("form",{onSubmit:async e=>{e.preventDefault(),s(!0);try{await a(c)}catch(e){console.error(e)}finally{s(!1)}},className:"space-y-4 p-2"},(0,r.createElement)("div",{className:"grid grid-cols-2 gap-4"},(0,r.createElement)(I,{label:"Tanggal Transaksi",type:"date",name:"transaction_date",value:c.transaction_date,onChange:i,required:!0}),(0,r.createElement)(U,{label:"Jenis Transaksi",name:"type",value:c.type,onChange:i},(0,r.createElement)("option",{value:"income"},"Pemasukan (Income)"),(0,r.createElement)("option",{value:"expense"},"Pengeluaran (Expense)"))),(0,r.createElement)("div",{className:"grid grid-cols-2 gap-4"},(0,r.createElement)(I,{label:"Nominal (IDR)",type:"number",name:"amount",value:c.amount,onChange:i,required:!0}),(0,r.createElement)(U,{label:"Akun / Dompet",name:"account_id",value:c.account_id,onChange:i,required:!0},(0,r.createElement)("option",{value:""},"Pilih Akun"),t.map(e=>(0,r.createElement)("option",{key:e.id,value:e.id},e.account_name," (",e.bank_name,")")))),(0,r.createElement)(I,{label:"Kategori",name:"category",value:c.category,onChange:i,placeholder:"Contoh: Transportasi, Akomodasi, DP Jamaah"}),(0,r.createElement)($,{label:"Keterangan / Deskripsi",name:"description",value:c.description,onChange:i,required:!0}),(0,r.createElement)("div",{className:"flex justify-end gap-2 pt-4 border-t mt-4"},(0,r.createElement)(H,{type:"button",variant:"secondary",onClick:l},"Batal"),(0,r.createElement)(H,{type:"submit",disabled:n},n?"Menyimpan...":"Simpan Transaksi")))},W=k("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Z=k("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]),Q=k("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),X=k("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),Y=()=>{const{data:e,loading:t,deleteItem:a}=h(),l=e.finance||[],n=e.accounts||[],[s,c]=(0,r.useState)({isOpen:!1,data:null}),[m,i]=(0,r.useState)(""),o=(0,r.useMemo)(()=>l.filter(e=>"income"===e.type).reduce((e,t)=>e+parseFloat(t.amount),0),[l]),d=(0,r.useMemo)(()=>l.filter(e=>"expense"===e.type).reduce((e,t)=>e+parseFloat(t.amount),0),[l]),u=(0,r.useMemo)(()=>l.filter(e=>e.description.toLowerCase().includes(m.toLowerCase())),[l,m]);return t&&0===l.length?(0,r.createElement)(C,null):(0,r.createElement)("div",{className:"p-6 space-y-6"},(0,r.createElement)("div",{className:"flex justify-between items-center"},(0,r.createElement)("h1",{className:"text-2xl font-bold text-gray-800"},"Keuangan"),(0,r.createElement)("button",{onClick:()=>c({isOpen:!0,data:null}),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 flex items-center"},(0,r.createElement)(W,{className:"w-4 h-4 mr-2"})," Tambah Transaksi")),(0,r.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},(0,r.createElement)("div",{className:"bg-white p-4 rounded shadow flex justify-between items-center"},(0,r.createElement)("div",null,(0,r.createElement)("div",{className:"text-sm text-gray-500"},"Pemasukan"),(0,r.createElement)("div",{className:"text-xl font-bold text-green-600"},M(o))),(0,r.createElement)(D,{className:"text-green-200 w-8 h-8"})),(0,r.createElement)("div",{className:"bg-white p-4 rounded shadow flex justify-between items-center"},(0,r.createElement)("div",null,(0,r.createElement)("div",{className:"text-sm text-gray-500"},"Pengeluaran"),(0,r.createElement)("div",{className:"text-xl font-bold text-red-600"},M(d))),(0,r.createElement)(Z,{className:"text-red-200 w-8 h-8"})),(0,r.createElement)("div",{className:"bg-white p-4 rounded shadow"},(0,r.createElement)("div",{className:"text-sm text-gray-500"},"Saldo Bersih"),(0,r.createElement)("div",{className:"text-xl font-bold "+(o-d>=0?"text-blue-600":"text-red-600")},M(o-d)))),(0,r.createElement)("div",{className:"bg-white rounded shadow overflow-hidden"},(0,r.createElement)("input",{className:"m-4 p-2 border rounded w-64",placeholder:"Cari transaksi...",value:m,onChange:e=>i(e.target.value)}),(0,r.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,r.createElement)("thead",{className:"bg-gray-50"},(0,r.createElement)("tr",null,(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase"},"Tanggal"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase"},"Deskripsi"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase"},"Nominal"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase"},"Tipe"),(0,r.createElement)("th",{className:"px-6 py-3 text-right text-xs font-bold text-gray-500 uppercase"},"Aksi"))),(0,r.createElement)("tbody",{className:"divide-y divide-gray-200"},u.map(e=>(0,r.createElement)("tr",{key:e.id,className:"hover:bg-gray-50"},(0,r.createElement)("td",{className:"px-6 py-4 text-sm text-gray-600"},L(e.transaction_date)),(0,r.createElement)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900"},e.description),(0,r.createElement)("td",{className:"px-6 py-4 font-bold "+("income"===e.type?"text-green-600":"text-red-600")},M(e.amount)),(0,r.createElement)("td",{className:"px-6 py-4"},(0,r.createElement)("span",{className:"px-2 py-1 text-xs rounded-full "+("income"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800")},"income"===e.type?"Pemasukan":"Pengeluaran")),(0,r.createElement)("td",{className:"px-6 py-4 text-right space-x-2"},(0,r.createElement)("button",{onClick:()=>c({isOpen:!0,data:e}),className:"text-blue-600"},(0,r.createElement)(Q,{className:"w-4 h-4"})),(0,r.createElement)("button",{onClick:()=>(async e=>{if(confirm("Hapus transaksi ini?"))try{await a("finance",e)}catch(e){alert(e.message)}})(e.id),className:"text-red-600"},(0,r.createElement)(X,{className:"w-4 h-4"}))))),0===u.length&&(0,r.createElement)("tr",null,(0,r.createElement)("td",{colSpan:"5",className:"p-4 text-center text-gray-500"},"Tidak ada data."))))),(0,r.createElement)(V,{title:s.data?"Edit Transaksi":"Tambah Transaksi",isOpen:s.isOpen,onClose:()=>c({isOpen:!1,data:null})},(0,r.createElement)(K,{initialData:s.data,accounts:n,onSubmit:async e=>{const{createOrUpdate:t}=h();await t("finance",e,s.data?.id),c({isOpen:!1,data:null})},onCancel:()=>c({isOpen:!1,data:null})})))},ee=({data:e,onClose:t})=>{const{createOrUpdate:a}=h(),[l,n]=(0,r.useState)(!1),[s,c]=(0,r.useState)({name:e?.name||"",email:e?.email||"",phone:e?.phone||"",source:e?.source||"social_media",status:e?.status||"new",notes:e?.notes||""}),m=e=>c(t=>({...t,[e.target.name]:e.target.value}));return(0,r.createElement)("form",{onSubmit:async l=>{l.preventDefault(),n(!0);try{await a("marketing",s,e?.id),t()}catch(e){alert(e.message)}finally{n(!1)}},className:"space-y-4 p-2"},(0,r.createElement)(I,{label:"Nama Prospek",name:"name",value:s.name,onChange:m,required:!0}),(0,r.createElement)("div",{className:"grid grid-cols-2 gap-4"},(0,r.createElement)(I,{label:"No. WhatsApp",name:"phone",value:s.phone,onChange:m,required:!0}),(0,r.createElement)(I,{label:"Email",type:"email",name:"email",value:s.email,onChange:m})),(0,r.createElement)("div",{className:"grid grid-cols-2 gap-4"},(0,r.createElement)(U,{label:"Sumber",name:"source",value:s.source,onChange:m},(0,r.createElement)("option",{value:"social_media"},"Media Sosial (IG/FB)"),(0,r.createElement)("option",{value:"website"},"Website"),(0,r.createElement)("option",{value:"referral"},"Referral / Teman"),(0,r.createElement)("option",{value:"walk_in"},"Datang Langsung"),(0,r.createElement)("option",{value:"agent"},"Agen")),(0,r.createElement)(U,{label:"Status Lead",name:"status",value:s.status,onChange:m},(0,r.createElement)("option",{value:"new"},"Baru"),(0,r.createElement)("option",{value:"contacted"},"Sudah Dihubungi"),(0,r.createElement)("option",{value:"qualified"},"Potensial (Qualified)"),(0,r.createElement)("option",{value:"lost"},"Batal / Lost"),(0,r.createElement)("option",{value:"converted"},"Closing (Jadi Jemaah)"))),(0,r.createElement)($,{label:"Catatan Tambahan",name:"notes",value:s.notes,onChange:m,rows:3}),(0,r.createElement)("div",{className:"flex justify-end gap-2 pt-4"},(0,r.createElement)(H,{type:"button",variant:"secondary",onClick:t},"Batal"),(0,r.createElement)(H,{type:"submit",disabled:l},l?"Simpan...":"Simpan Lead")))},te=k("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),ae=k("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),le=()=>{const{data:e,loading:t,deleteItem:a}=h(),l=e.marketing||[],[n,s]=(0,r.useState)(!1),[c,m]=(0,r.useState)(null),[i,o]=(0,r.useState)(""),d=(e=null)=>{m(e),s(!0)},u=()=>{m(null),s(!1)},p=(0,r.useMemo)(()=>l.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())),[l,i]);return t&&0===l.length?(0,r.createElement)(C,null):(0,r.createElement)("div",{className:"p-6 space-y-6"},(0,r.createElement)("div",{className:"flex justify-between items-center"},(0,r.createElement)("h1",{className:"text-2xl font-bold text-gray-800"},"Marketing Leads"),(0,r.createElement)("button",{onClick:()=>d(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 flex items-center"},(0,r.createElement)(W,{className:"w-4 h-4 mr-2"})," Tambah Lead")),(0,r.createElement)("div",{className:"bg-white rounded shadow overflow-hidden"},(0,r.createElement)("input",{className:"m-4 p-2 border rounded w-64",placeholder:"Cari lead...",value:i,onChange:e=>o(e.target.value)}),(0,r.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,r.createElement)("thead",{className:"bg-gray-50"},(0,r.createElement)("tr",null,(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase"},"Nama"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase"},"Kontak"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase"},"Status"),(0,r.createElement)("th",{className:"px-6 py-3 text-right text-xs font-bold text-gray-500 uppercase"},"Aksi"))),(0,r.createElement)("tbody",{className:"divide-y divide-gray-200"},p.map(e=>(0,r.createElement)("tr",{key:e.id,className:"hover:bg-gray-50"},(0,r.createElement)("td",{className:"px-6 py-4 font-medium"},e.name),(0,r.createElement)("td",{className:"px-6 py-4 text-sm text-gray-500"},(0,r.createElement)("div",{className:"flex items-center"},(0,r.createElement)(te,{className:"w-3 h-3 mr-1"})," ",e.phone),(0,r.createElement)("div",{className:"flex items-center mt-1"},(0,r.createElement)(ae,{className:"w-3 h-3 mr-1"})," ",e.email)),(0,r.createElement)("td",{className:"px-6 py-4"},(0,r.createElement)("span",{className:"px-2 py-1 text-xs rounded-full "+("new"===e.status?"bg-blue-100 text-blue-800":"bg-gray-100")},e.status)),(0,r.createElement)("td",{className:"px-6 py-4 text-right space-x-2"},(0,r.createElement)("button",{onClick:()=>d(e),className:"text-blue-600"},(0,r.createElement)(Q,{className:"w-4 h-4"})),(0,r.createElement)("button",{onClick:()=>(async e=>{confirm("Hapus lead ini?")&&await a("marketing",e)})(e.id),className:"text-red-600"},(0,r.createElement)(X,{className:"w-4 h-4"})))))))),(0,r.createElement)(V,{title:c?"Edit Lead":"Tambah Lead",isOpen:n,onClose:u},(0,r.createElement)(ee,{data:c,onClose:u})))},re=({message:e})=>(0,r.createElement)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative my-4",role:"alert"},(0,r.createElement)("strong",{className:"font-bold"},"Error: "),(0,r.createElement)("span",{className:"block sm:inline"},e)),ne=({data:e,onSuccess:t})=>{const a=h(),{data:l,loading:n}=a,[s,c]=(0,r.useState)({full_name:"",email:"",password:"",role:"marketing_staff"}),[m,i]=(0,r.useState)(!1),[o,d]=(0,r.useState)(null),u=Boolean(e&&e.id);(0,r.useEffect)(()=>{u&&e&&c({full_name:e.full_name||"",email:e.email||"",role:e.role||"marketing_staff",password:""})},[e,u]);const p=e=>{const{name:t,value:a}=e.target;c(e=>({...e,[t]:a}))},g=l.roles&&l.roles.length>0?l.roles:[{role_key:"marketing_staff",display_name:"Marketing Staff"},{role_key:"finance_staff",display_name:"Finance Staff"},{role_key:"hr_staff",display_name:"HR Staff"},{role_key:"admin_staff",display_name:"Admin Staff"}];return(0,r.createElement)("form",{onSubmit:async l=>{l.preventDefault(),d(null),i(!0);const r={...s};u&&(r.id=e.id,r.password||delete r.password);try{await a.createOrUpdate("users",r,u?e.id:null),t()}catch(e){d(e.message||"Gagal menyimpan data.")}finally{i(!1)}},className:"space-y-4"},o&&(0,r.createElement)(re,{message:o}),(0,r.createElement)(I,{label:"Nama Lengkap",id:"full_name",name:"full_name",type:"text",value:s.full_name,onChange:p,required:!0}),(0,r.createElement)(I,{label:"Email",id:"email",name:"email",type:"email",value:s.email,onChange:p,required:!0,disabled:u}),(0,r.createElement)(I,{label:u?"Password (Kosongkan jika tidak diubah)":"Password",id:"password",name:"password",type:"password",value:s.password,onChange:p,required:!u}),(0,r.createElement)(U,{label:"Role / Jabatan",id:"role",name:"role",value:s.role,onChange:p,required:!0},(0,r.createElement)("option",{value:"",disabled:!0},"Pilih Role"),g.map(e=>(0,r.createElement)("option",{key:e.role_key||e.id,value:e.role_key||e.name},e.display_name||e.name))),(0,r.createElement)("div",{className:"pt-2 flex justify-end"},(0,r.createElement)("button",{type:"submit",disabled:m||n,className:"px-4 py-2 font-semibold text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:bg-gray-400 disabled:cursor-not-allowed"},m?"Menyimpan...":u?"Update Staff":"Tambah Staff")))},se=k("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ce=()=>{const{data:e,loading:t,deleteItem:a}=h(),l=e.users||[],[n,s]=(0,r.useState)({isOpen:!1,data:null});return t&&0===l.length?(0,r.createElement)(C,null):(0,r.createElement)("div",{className:"p-6 space-y-6"},(0,r.createElement)("div",{className:"flex justify-between items-center"},(0,r.createElement)("h1",{className:"text-2xl font-bold text-gray-800"},"Manajemen Staff (HR)"),(0,r.createElement)("button",{onClick:()=>s({isOpen:!0,data:null}),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 flex items-center"},(0,r.createElement)(W,{className:"w-4 h-4 mr-2"})," Tambah Staff")),(0,r.createElement)("div",{className:"bg-white rounded shadow overflow-hidden"},(0,r.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,r.createElement)("thead",{className:"bg-gray-50"},(0,r.createElement)("tr",null,(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase"},"Nama"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase"},"Email"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase"},"Role"),(0,r.createElement)("th",{className:"px-6 py-3 text-right text-xs font-bold text-gray-500 uppercase"},"Aksi"))),(0,r.createElement)("tbody",{className:"divide-y divide-gray-200"},l.map(e=>(0,r.createElement)("tr",{key:e.id,className:"hover:bg-gray-50"},(0,r.createElement)("td",{className:"px-6 py-4 flex items-center"},(0,r.createElement)("div",{className:"bg-gray-200 p-2 rounded-full mr-3"},(0,r.createElement)(se,{className:"w-4 h-4 text-gray-600"})),(0,r.createElement)("span",{className:"font-medium"},e.full_name||e.display_name)),(0,r.createElement)("td",{className:"px-6 py-4 text-sm text-gray-600"},e.user_email||e.email),(0,r.createElement)("td",{className:"px-6 py-4"},(0,r.createElement)("span",{className:"px-2 py-1 bg-purple-100 text-purple-800 text-xs rounded-full capitalize"},e.role?.replace("_"," "))),(0,r.createElement)("td",{className:"px-6 py-4 text-right space-x-2"},(0,r.createElement)("button",{onClick:()=>s({isOpen:!0,data:e}),className:"text-blue-600"},(0,r.createElement)(Q,{className:"w-4 h-4"})),(0,r.createElement)("button",{onClick:()=>(async e=>{if(confirm("Hapus akses staff ini?"))try{await a("users",e)}catch(e){alert(e.message)}})(e.id),className:"text-red-600"},(0,r.createElement)(X,{className:"w-4 h-4"})))))))),(0,r.createElement)(V,{title:n.data?"Edit Staff":"Tambah Staff Baru",isOpen:n.isOpen,onClose:()=>s({isOpen:!1,data:null})},(0,r.createElement)(ne,{data:n.data,onSuccess:()=>s({isOpen:!1,data:null})})))},me=({initialData:e,onSubmit:t,onCancel:a,packages:n,onSave:s})=>{const{data:c}=h(),m=c.sub_agents||[],[i,o]=(0,r.useState)({package_id:"",sub_agent_id:"",full_name:"",id_number:"",phone:"",email:"",address:"",gender:"male",birth_date:"",passport_number:"",status:"pending",total_price:"",equipment_status:"belum_di_kirim",is_passport_verified:!1,is_ktp_verified:!1,is_kk_verified:!1,is_meningitis_verified:!1});(0,r.useEffect)(()=>{o(e?t=>({...t,...e,sub_agent_id:e.sub_agent_id||"",is_passport_verified:!!e.is_passport_verified,is_ktp_verified:!!e.is_ktp_verified,is_kk_verified:!!e.is_kk_verified,is_meningitis_verified:!!e.is_meningitis_verified,birth_date:z(e.birth_date)}):{package_id:"",sub_agent_id:"",full_name:"",id_number:"",phone:"",email:"",address:"",gender:"male",birth_date:"",passport_number:"",status:"pending",total_price:"",equipment_status:"belum_di_kirim",is_passport_verified:!1,is_ktp_verified:!1,is_kk_verified:!1,is_meningitis_verified:!1})},[e]);const d=e=>{const{name:t,value:a,type:l,checked:r}=e.target;o(e=>({...e,[t]:"checkbox"===l?r:a}))};return(0,r.createElement)("form",{onSubmit:e=>{e.preventDefault(),s&&s(i),t&&t(i),a()}},(0,r.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},(0,r.createElement)(l.FormGroup,{className:"md:col-span-2"},(0,r.createElement)(l.FormLabel,{htmlFor:"package_id"},"Paket yang Diambil"),(0,r.createElement)(U,{name:"package_id",id:"package_id",value:i.package_id,onChange:d,required:!0},(0,r.createElement)("option",{value:""},"Pilih Paket"),n.map(e=>(0,r.createElement)("option",{key:e.id,value:e.id},e.title," (",e.departure_date?z(e.departure_date):"N/A",")")))),(0,r.createElement)(l.FormGroup,{className:"md:col-span-2"},(0,r.createElement)(l.FormLabel,{htmlFor:"sub_agent_id"},"Sub Agen (Opsional)"),(0,r.createElement)(U,{name:"sub_agent_id",id:"sub_agent_id",value:i.sub_agent_id,onChange:d},(0,r.createElement)("option",{value:""},"Pilih Sub Agen (Jika ada)"),m.filter(e=>"active"===e.status).map(e=>(0,r.createElement)("option",{key:e.id,value:e.id},e.name)))),(0,r.createElement)(l.FormGroup,null,(0,r.createElement)(l.FormLabel,{htmlFor:"full_name"},"Nama Lengkap"),(0,r.createElement)(I,{type:"text",name:"full_name",id:"full_name",value:i.full_name,onChange:d,required:!0})),(0,r.createElement)(l.FormGroup,null,(0,r.createElement)(l.FormLabel,{htmlFor:"id_number"},"No. KTP (NIK)"),(0,r.createElement)(I,{type:"text",name:"id_number",id:"id_number",value:i.id_number,onChange:d,required:!0})),(0,r.createElement)(l.FormGroup,null,(0,r.createElement)(l.FormLabel,{htmlFor:"phone"},"No. Telepon (WA)"),(0,r.createElement)(I,{type:"tel",name:"phone",id:"phone",value:i.phone,onChange:d})),(0,r.createElement)(l.FormGroup,null,(0,r.createElement)(l.FormLabel,{htmlFor:"email"},"Email"),(0,r.createElement)(I,{type:"email",name:"email",id:"email",value:i.email,onChange:d})),(0,r.createElement)(l.FormGroup,null,(0,r.createElement)(l.FormLabel,{htmlFor:"birth_date"},"Tanggal Lahir"),(0,r.createElement)(I,{type:"date",name:"birth_date",id:"birth_date",value:i.birth_date,onChange:d})),(0,r.createElement)(l.FormGroup,null,(0,r.createElement)(l.FormLabel,{htmlFor:"gender"},"Jenis Kelamin"),(0,r.createElement)(U,{name:"gender",id:"gender",value:i.gender,onChange:d},(0,r.createElement)("option",{value:"male"},"Laki-laki"),(0,r.createElement)("option",{value:"female"},"Perempuan"))),(0,r.createElement)(l.FormGroup,null,(0,r.createElement)(l.FormLabel,{htmlFor:"passport_number"},"No. Paspor"),(0,r.createElement)(I,{type:"text",name:"passport_number",id:"passport_number",value:i.passport_number,onChange:d})),(0,r.createElement)(l.FormGroup,null,(0,r.createElement)(l.FormLabel,{htmlFor:"address"},"Alamat"),(0,r.createElement)(I,{type:"text",name:"address",id:"address",value:i.address,onChange:d})),(0,r.createElement)("hr",{className:"md:col-span-2"}),(0,r.createElement)("h4",{className:"md:col-span-2 text-lg font-semibold text-gray-800 -mb-2"},"Administrasi & Keuangan"),(0,r.createElement)(l.FormGroup,null,(0,r.createElement)(l.FormLabel,{htmlFor:"status"},"Status Jemaah"),(0,r.createElement)(U,{name:"status",id:"status",value:i.status,onChange:d},(0,r.createElement)("option",{value:"pending"},"Pending"),(0,r.createElement)("option",{value:"approved"},"Approved"),(0,r.createElement)("option",{value:"rejected"},"Rejected"),(0,r.createElement)("option",{value:"waitlist"},"Waitlist"))),(0,r.createElement)(l.FormGroup,null,(0,r.createElement)(l.FormLabel,{htmlFor:"total_price"},"Total Tagihan (Rp)"),(0,r.createElement)(I,{type:"number",name:"total_price",id:"total_price",value:i.total_price,onChange:d,placeholder:"Otomatis jika kosong"})),(0,r.createElement)(l.FormGroup,null,(0,r.createElement)(l.FormLabel,{htmlFor:"equipment_status"},"Status Perlengkapan"),(0,r.createElement)(U,{name:"equipment_status",id:"equipment_status",value:i.equipment_status,onChange:d},(0,r.createElement)("option",{value:"belum_di_kirim"},"Belum Dikirim"),(0,r.createElement)("option",{value:"di_kirim"},"Dikirim"),(0,r.createElement)("option",{value:"diterima"},"Diterima"))),(0,r.createElement)("hr",{className:"md:col-span-2"}),(0,r.createElement)("h4",{className:"md:col-span-2 text-lg font-semibold text-gray-800 -mb-2"},"Checklist Verifikasi Dokumen (Admin)"),(0,r.createElement)(l.FormGroup,null,(0,r.createElement)(G,{name:"is_passport_verified",id:"is_passport_verified",checked:!!i.is_passport_verified,onChange:d,label:"Paspor Verified"})),(0,r.createElement)(l.FormGroup,null,(0,r.createElement)(G,{name:"is_ktp_verified",id:"is_ktp_verified",checked:!!i.is_ktp_verified,onChange:d,label:"KTP Verified"})),(0,r.createElement)(l.FormGroup,null,(0,r.createElement)(G,{name:"is_kk_verified",id:"is_kk_verified",checked:!!i.is_kk_verified,onChange:d,label:"KK Verified"})),(0,r.createElement)(l.FormGroup,null,(0,r.createElement)(G,{name:"is_meningitis_verified",id:"is_meningitis_verified",checked:!!i.is_meningitis_verified,onChange:d,label:"Meningitis Verified"}))),(0,r.createElement)(J,{onCancel:a}))},ie=k("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),oe=()=>{const{data:e,loading:t,deleteItem:a,refreshData:l}=h(),n=e.jamaah||[],s=e.packages||[],[c,m]=(0,r.useState)({open:!1,item:null}),[i,o]=(0,r.useState)({open:!1,item:null}),[d,u]=(0,r.useState)(""),p=(0,r.useMemo)(()=>n.filter(e=>e.full_name.toLowerCase().includes(d.toLowerCase())),[n,d]);return t&&0===n.length?(0,r.createElement)(C,null):(0,r.createElement)("div",{className:"p-6 space-y-6"},(0,r.createElement)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4"},(0,r.createElement)("h1",{className:"text-2xl font-bold text-gray-800"},"Data Jemaah"),(0,r.createElement)(H,{onClick:()=>m({open:!0,item:null}),className:"flex items-center"},(0,r.createElement)(W,{className:"w-4 h-4 mr-2"})," Tambah Jemaah")),(0,r.createElement)("div",{className:"bg-white rounded shadow overflow-hidden"},(0,r.createElement)("div",{className:"p-4 border-b relative"},(0,r.createElement)(ie,{className:"absolute top-7 left-7 w-4 h-4 text-gray-400"}),(0,r.createElement)("input",{className:"pl-10 p-2 border rounded w-full md:w-64",placeholder:"Cari nama jemaah...",value:d,onChange:e=>u(e.target.value)})),(0,r.createElement)("div",{className:"overflow-x-auto"},(0,r.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,r.createElement)("thead",{className:"bg-gray-50"},(0,r.createElement)("tr",null,(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase"},"Nama"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase"},"Paket"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase"},"Status Bayar"),(0,r.createElement)("th",{className:"px-6 py-3 text-right text-xs font-bold text-gray-500 uppercase"},"Aksi"))),(0,r.createElement)("tbody",{className:"divide-y divide-gray-200"},p.map(e=>{const t=parseFloat(e.amount_paid||0),n=parseFloat(e.total_price||0),c=t>=n&&n>0;return(0,r.createElement)("tr",{key:e.id,className:"hover:bg-gray-50"},(0,r.createElement)("td",{className:"px-6 py-4"},(0,r.createElement)("div",{className:"flex items-center"},(0,r.createElement)("div",{className:"bg-blue-100 p-2 rounded-full mr-3 text-blue-600 font-bold w-10 h-10 flex items-center justify-center"},e.full_name.charAt(0)),(0,r.createElement)("div",null,(0,r.createElement)("div",{className:"font-medium"},e.full_name),(0,r.createElement)("div",{className:"text-xs text-gray-500"},e.passport_number)))),(0,r.createElement)("td",{className:"px-6 py-4 text-sm text-gray-600"},(i=e.package_id,s.find(e=>e.id==i)?.name||"Paket Tidak Ditemukan")),(0,r.createElement)("td",{className:"px-6 py-4"},(0,r.createElement)("div",{className:"text-sm"},(0,r.createElement)("span",{className:"font-bold "+(c?"text-green-600":"text-orange-500")},c?"Lunas":"Belum Lunas"),(0,r.createElement)("div",{className:"text-xs text-gray-500"},M(t)," / ",M(n)))),(0,r.createElement)("td",{className:"px-6 py-4 text-right space-x-2"},(0,r.createElement)(H,{variant:"icon",onClick:()=>m({open:!0,item:e})},(0,r.createElement)(Q,{className:"w-4 h-4 text-blue-600"})),(0,r.createElement)(H,{variant:"icon",onClick:()=>(async e=>{confirm("Hapus data jemaah ini?")&&(await a("jamaah",e),l("jamaah"))})(e.id)},(0,r.createElement)(X,{className:"w-4 h-4 text-red-600"}))));var i}))))),(0,r.createElement)(V,{title:c.item?"Edit Jemaah":"Pendaftaran Jemaah",isOpen:c.open,onClose:()=>m({open:!1,item:null}),size:"lg"},(0,r.createElement)(me,{initialData:c.item,packages:s,onCancel:()=>m({open:!1,item:null}),onSuccess:()=>{m({open:!1,item:null}),l("jamaah")}})))},de=({data:e,onClose:t})=>{const{createOrUpdate:a}=h(),[l,n]=(0,r.useState)(!1),[s,c]=(0,r.useState)(null),[m,i]=(0,r.useState)({name:e?.name||"",description:e?.description||"",price:e?M(e.price):"",duration_days:e?.duration_days||9,start_date:e?.start_date||"",end_date:e?.end_date||"",departure_city:e?.departure_city||"Jakarta",total_seats:e?.total_seats||45,available_seats:e?.available_seats||45,status:e?.status||"available"}),o=e=>{const{name:t,value:a}=e.target;i("price"===t?e=>({...e,price:M(a)}):e=>({...e,[t]:a}))};return(0,r.createElement)("form",{onSubmit:async l=>{l.preventDefault(),n(!0),c(null);const r={...m,price:P(m.price),duration_days:parseInt(m.duration_days),total_seats:parseInt(m.total_seats),available_seats:parseInt(m.available_seats)};try{await a("packages",r,e?.id),t()}catch(e){c(e.message)}finally{n(!1)}},className:"space-y-4 p-2"},s&&(0,r.createElement)("div",{className:"bg-red-50 text-red-600 p-3 rounded"},s),(0,r.createElement)(I,{label:"Nama Paket",name:"name",value:m.name,onChange:o,required:!0}),(0,r.createElement)("div",{className:"grid grid-cols-2 gap-4"},(0,r.createElement)(I,{label:"Harga (IDR)",name:"price",value:m.price,onChange:o,required:!0}),(0,r.createElement)(U,{label:"Status",name:"status",value:m.status,onChange:o},(0,r.createElement)("option",{value:"available"},"Tersedia"),(0,r.createElement)("option",{value:"full"},"Penuh"),(0,r.createElement)("option",{value:"completed"},"Selesai"))),(0,r.createElement)("div",{className:"grid grid-cols-3 gap-4"},(0,r.createElement)(I,{label:"Durasi (Hari)",type:"number",name:"duration_days",value:m.duration_days,onChange:o}),(0,r.createElement)(I,{label:"Tanggal Berangkat",type:"date",name:"start_date",value:m.start_date,onChange:o,required:!0}),(0,r.createElement)(I,{label:"Tanggal Pulang",type:"date",name:"end_date",value:m.end_date,onChange:o})),(0,r.createElement)("div",{className:"grid grid-cols-2 gap-4"},(0,r.createElement)(I,{label:"Total Seat",type:"number",name:"total_seats",value:m.total_seats,onChange:o}),(0,r.createElement)(I,{label:"Sisa Seat",type:"number",name:"available_seats",value:m.available_seats,onChange:o})),(0,r.createElement)($,{label:"Deskripsi",name:"description",value:m.description,onChange:o}),(0,r.createElement)("div",{className:"flex justify-end gap-2 pt-4"},(0,r.createElement)(H,{type:"button",variant:"secondary",onClick:t},"Batal"),(0,r.createElement)(H,{type:"submit",disabled:l},l?"Menyimpan...":"Simpan")))},ue=k("package-x",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["path",{d:"m17 13 5 5m-5 0 5-5",key:"im3w4b"}]]),pe=k("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),ge=()=>{const{data:e,loading:t,error:a,deleteItem:l,refreshData:n}=h(),{packages:s=[]}=e||{},[c,m]=(0,r.useState)(""),[i,o]=(0,r.useState)({isOpen:!1,data:null}),[d,u]=(0,r.useState)({isOpen:!1,id:null}),p=(0,r.useMemo)(()=>s.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())||e.description&&e.description.toLowerCase().includes(c.toLowerCase())),[s,c]);return t&&0===s.length?(0,r.createElement)(C,null):a?(0,r.createElement)(re,{message:a}):(0,r.createElement)("div",{className:"p-6 space-y-6"},(0,r.createElement)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4"},(0,r.createElement)("div",null,(0,r.createElement)("h1",{className:"text-2xl font-bold text-gray-800"},"Manajemen Paket Umroh"),(0,r.createElement)("p",{className:"text-gray-500 text-sm"},"Kelola semua paket perjalanan Anda di sini.")),(0,r.createElement)("button",{onClick:()=>o({isOpen:!0,data:null}),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition-colors"},(0,r.createElement)(W,{className:"w-5 h-5 mr-2"}),"Tambah Paket Baru")),(0,r.createElement)("div",{className:"relative max-w-md"},(0,r.createElement)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},(0,r.createElement)(ie,{className:"h-5 w-5 text-gray-400"})),(0,r.createElement)("input",{type:"text",placeholder:"Cari paket berdasarkan nama...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:c,onChange:e=>m(e.target.value)})),(0,r.createElement)("div",{className:"bg-white shadow rounded-xl overflow-hidden border border-gray-200"},(0,r.createElement)("div",{className:"overflow-x-auto"},(0,r.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,r.createElement)("thead",{className:"bg-gray-50"},(0,r.createElement)("tr",null,(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider"},"Nama Paket"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider"},"Info"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider"},"Harga Mulai"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider"},"Seat"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider"},"Status"),(0,r.createElement)("th",{className:"px-6 py-3 text-right text-xs font-bold text-gray-500 uppercase tracking-wider"},"Aksi"))),(0,r.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},0===p.length?(0,r.createElement)("tr",null,(0,r.createElement)("td",{colSpan:"6",className:"px-6 py-16 text-center"},(0,r.createElement)("div",{className:"flex flex-col items-center justify-center text-gray-400"},(0,r.createElement)(ue,{className:"w-16 h-16 mb-4 opacity-50"}),(0,r.createElement)("h3",{className:"text-lg font-medium text-gray-900"},"Tidak ada paket ditemukan"),(0,r.createElement)("p",{className:"mb-4"},"Coba kata kunci lain atau buat paket baru."),(0,r.createElement)("button",{onClick:()=>o({isOpen:!0,data:null}),className:"text-blue-600 hover:underline font-medium"},"+ Buat Paket Sekarang")))):p.map(e=>(0,r.createElement)("tr",{key:e.id,className:"hover:bg-gray-50 transition-colors"},(0,r.createElement)("td",{className:"px-6 py-4"},(0,r.createElement)("div",{className:"font-bold text-gray-900"},e.name),(0,r.createElement)("div",{className:"text-xs text-gray-500 line-clamp-1"},e.description)),(0,r.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},(0,r.createElement)("div",{className:"text-sm text-gray-900 flex items-center"},(0,r.createElement)(pe,{className:"w-3 h-3 mr-1 text-gray-400"}),e.duration_days," Hari"),(0,r.createElement)("div",{className:"text-xs text-gray-500"},e.start_date?`${L(e.start_date)}`:"TBA")),(0,r.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},(0,r.createElement)("span",{className:"text-sm font-bold text-green-600 bg-green-50 px-2 py-1 rounded-md border border-green-100"},M((e=>{if(!e)return 0;try{let t="string"==typeof e?JSON.parse(e):e;const a=Array.isArray(t)?t.map(e=>parseFloat(e.price)):Object.values(t).map(e=>parseFloat(e));return a.length?Math.min(...a.filter(e=>e>0)):0}catch(e){return 0}})(e.price_details)||e.price))),(0,r.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},(0,r.createElement)("div",{className:"flex items-center"},(0,r.createElement)(T,{className:"w-3 h-3 mr-1"}),(0,r.createElement)("span",{className:e.available_seats<10?"text-red-600 font-bold":""},e.available_seats),(0,r.createElement)("span",{className:"text-gray-400 mx-1"},"/"),e.total_seats)),(0,r.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},(0,r.createElement)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full "+("available"===e.status?"bg-blue-100 text-blue-800":"full"===e.status?"bg-red-100 text-red-800":"completed"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800")},"available"===e.status?"Tersedia":e.status.toUpperCase())),(0,r.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},(0,r.createElement)("div",{className:"flex items-center justify-end space-x-3"},(0,r.createElement)("button",{onClick:()=>o({isOpen:!0,data:e}),className:"text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 rounded",title:"Edit Paket"},(0,r.createElement)(Q,{className:"w-5 h-5"})),(0,r.createElement)("button",{onClick:()=>u({isOpen:!0,id:e.id}),className:"text-red-600 hover:text-red-900 p-1 hover:bg-red-50 rounded",title:"Hapus Paket"},(0,r.createElement)(X,{className:"w-5 h-5"})))))))))),(0,r.createElement)(V,{title:i.data?"Edit Paket":"Tambah Paket Baru",isOpen:i.isOpen,onClose:()=>o({isOpen:!1,data:null}),size:"4xl"},(0,r.createElement)(de,{data:i.data,onClose:()=>{o({isOpen:!1,data:null}),n("packages")}})),(0,r.createElement)(V,{title:"Hapus Paket",isOpen:d.isOpen,onClose:()=>u({isOpen:!1,id:null}),size:"sm"},(0,r.createElement)("div",{className:"p-2"},(0,r.createElement)("p",{className:"text-gray-600 mb-6"},"Apakah Anda yakin ingin menghapus paket ini? Tindakan ini tidak dapat dibatalkan."),(0,r.createElement)("div",{className:"flex justify-end gap-3"},(0,r.createElement)("button",{onClick:()=>u({isOpen:!1,id:null}),className:"px-4 py-2 bg-white border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"},"Batal"),(0,r.createElement)("button",{onClick:async()=>{if(d.id)try{await l("package",d.id),n("packages"),u({isOpen:!1,id:null})}catch(e){alert("Gagal menghapus paket.")}},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 shadow-sm"},"Hapus Paket")))))},xe=()=>{const{logs:e,users:t,loadingLogs:a,error:l,fetchLogs:n}=h();return(0,r.useEffect)(()=>{n()},[n]),(0,r.createElement)("div",{className:"bg-white shadow-lg rounded-lg p-6 relative min-h-[300px]"},(0,r.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,r.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Log Aktivitas")),l&&(0,r.createElement)(re,{message:l}),a&&(0,r.createElement)(C,null),!a&&!l&&(0,r.createElement)("div",{className:"overflow-x-auto"},(0,r.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,r.createElement)("thead",{className:"bg-gray-50"},(0,r.createElement)("tr",null,(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Waktu"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Pengguna"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Objek"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID Objek"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Detail"))),(0,r.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},0===e.length&&(0,r.createElement)("tr",null,(0,r.createElement)("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500"},"Tidak ada log.")),e.map(e=>(0,r.createElement)("tr",{key:e.id,className:"hover:bg-gray-50"},(0,r.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},L(e.created_at)),(0,r.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},(e=>{const a=t.find(t=>t.id==e);return a?a.full_name:"Sistem"})(e.user_id)),(0,r.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},(e=>{const t=(e||"pending").replace(/_/g," "),a=t.toLowerCase().replace(/ /g,"_").replace(/[^a-z0-9_]/g,"");return(0,r.createElement)("span",{className:`status-badge ${a}`},t)})(e.action)),(0,r.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},e.object_type),(0,r.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},e.object_id),(0,r.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 truncate max-w-xs"},e.details)))))))},ye=({initialData:e,closeModal:t})=>{const{createOrUpdate:a}=h(),[l,n]=(0,r.useState)(!1),[s,c]=(0,r.useState)({name:e?.name||"",phone:e?.phone||"",email:e?.email||"",address:e?.address||"",city:e?.city||"",status:e?.status||"active"}),m=e=>c({...s,[e.target.name]:e.target.value});return(0,r.createElement)("form",{onSubmit:async l=>{l.preventDefault(),n(!0);try{await a("sub_agents",s,e?.id),t()}catch(e){alert(e.message)}finally{n(!1)}},className:"space-y-4 p-2"},(0,r.createElement)(I,{label:"Nama Agen / Travel",name:"name",value:s.name,onChange:m,required:!0}),(0,r.createElement)("div",{className:"grid grid-cols-2 gap-4"},(0,r.createElement)(I,{label:"No. Telepon",name:"phone",value:s.phone,onChange:m,required:!0}),(0,r.createElement)(I,{label:"Email",type:"email",name:"email",value:s.email,onChange:m})),(0,r.createElement)("div",{className:"grid grid-cols-2 gap-4"},(0,r.createElement)(I,{label:"Kota Domisili",name:"city",value:s.city,onChange:m}),(0,r.createElement)(U,{label:"Status",name:"status",value:s.status,onChange:m},(0,r.createElement)("option",{value:"active"},"Aktif"),(0,r.createElement)("option",{value:"inactive"},"Tidak Aktif"))),(0,r.createElement)(I,{label:"Alamat Lengkap",name:"address",value:s.address,onChange:m}),(0,r.createElement)("div",{className:"flex justify-end gap-2 pt-4"},(0,r.createElement)(H,{type:"button",variant:"secondary",onClick:t},"Batal"),(0,r.createElement)(H,{type:"submit",disabled:l},l?"Menyimpan...":"Simpan")))},he=()=>{const{data:e,loading:t,deleteItem:a}=h(),l=e.sub_agents||[],[n,s]=(0,r.useState)({open:!1,item:null}),[c,m]=(0,r.useState)(""),i=(0,r.useMemo)(()=>l.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())),[l,c]);return t&&0===l.length?(0,r.createElement)(C,null):(0,r.createElement)("div",{className:"p-6 space-y-6"},(0,r.createElement)("div",{className:"flex justify-between items-center"},(0,r.createElement)("h1",{className:"text-2xl font-bold text-gray-800"},"Sub Agen"),(0,r.createElement)("button",{onClick:()=>s({open:!0,item:null}),className:"bg-blue-600 text-white px-4 py-2 rounded flex items-center hover:bg-blue-700"},(0,r.createElement)(W,{className:"w-4 h-4 mr-2"})," Tambah Agen")),(0,r.createElement)("div",{className:"bg-white rounded shadow overflow-hidden"},(0,r.createElement)("input",{className:"m-4 p-2 border rounded w-64",placeholder:"Cari agen...",value:c,onChange:e=>m(e.target.value)}),(0,r.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,r.createElement)("thead",{className:"bg-gray-50"},(0,r.createElement)("tr",null,(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase"},"Nama"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase"},"Kontak"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase"},"Lokasi"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase"},"Status"),(0,r.createElement)("th",{className:"px-6 py-3 text-right text-xs font-bold text-gray-500 uppercase"},"Aksi"))),(0,r.createElement)("tbody",{className:"divide-y divide-gray-200"},i.map(e=>(0,r.createElement)("tr",{key:e.id,className:"hover:bg-gray-50"},(0,r.createElement)("td",{className:"px-6 py-4 font-medium"},e.name),(0,r.createElement)("td",{className:"px-6 py-4 text-sm text-gray-600"},(0,r.createElement)("div",null,e.phone),(0,r.createElement)("div",{className:"text-xs text-gray-400"},e.email)),(0,r.createElement)("td",{className:"px-6 py-4 text-sm"},e.city||"-"),(0,r.createElement)("td",{className:"px-6 py-4"},(0,r.createElement)("span",{className:"px-2 py-1 text-xs rounded-full "+("active"===e.status?"bg-green-100 text-green-800":"bg-red-100")},e.status)),(0,r.createElement)("td",{className:"px-6 py-4 text-right space-x-2"},(0,r.createElement)("button",{onClick:()=>s({open:!0,item:e}),className:"text-blue-600"},(0,r.createElement)(Q,{className:"w-4 h-4"})),(0,r.createElement)("button",{onClick:()=>(async e=>{confirm("Hapus sub agen ini?")&&await a("sub_agents",e)})(e.id),className:"text-red-600"},(0,r.createElement)(X,{className:"w-4 h-4"})))))))),(0,r.createElement)(V,{title:n.item?"Edit Sub Agen":"Tambah Sub Agen",isOpen:n.open,onClose:()=>s({open:!1,item:null})},(0,r.createElement)(ye,{initialData:n.item,onSave:async e=>{const{createOrUpdate:t}=h()},onCancel:()=>s({open:!1,item:null}),externalSubmit:async e=>{const{createOrUpdate:t}=h()}}),(0,r.createElement)(ye,{initialData:n.item,onSave:async e=>{},onCancel:()=>s({open:!1,item:null}),closeModal:()=>s({open:!1,item:null})})))};var be={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ee=r.createContext&&r.createContext(be),fe=["attr","size","title"];function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},ve.apply(this,arguments)}function Ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,l)}return a}function we(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(a),!0).forEach(function(t){var l,r,n,s;l=e,r=t,n=a[t],(r="symbol"==typeof(s=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r))?s:s+"")in l?Object.defineProperty(l,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[r]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ne(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function ke(e){return e&&e.map((e,t)=>r.createElement(e.tag,we({key:t},e.attr),ke(e.child)))}function _e(e){return t=>r.createElement(Ce,ve({attr:we({},e.attr)},t),ke(e.child))}function Ce(e){var t=t=>{var a,{attr:l,size:n,title:s}=e,c=function(e,t){if(null==e)return{};var a,l,r=function(e,t){if(null==e)return{};var a={};for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){if(t.indexOf(l)>=0)continue;a[l]=e[l]}return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(l=0;l<n.length;l++)a=n[l],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,fe),m=n||t.size||"1em";return t.className&&(a=t.className),e.className&&(a=(a?a+" ":"")+e.className),r.createElement("svg",ve({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,c,{className:a,style:we(we({color:e.color||t.color},t.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),s&&r.createElement("title",null,s),e.children)};return void 0!==Ee?r.createElement(Ee.Consumer,null,e=>t(e)):t(be)}function Se(e){return _e({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M425.7 256c-16.9 0-32.8-9-41.4-23.4L320 126l-64.2 106.6c-8.7 14.5-24.6 23.5-41.5 23.5-4.5 0-9-.6-13.3-1.9L64 215v178c0 14.7 10 27.5 24.2 31l216.2 54.1c10.2 2.5 20.9 2.5 31 0L551.8 424c14.2-3.6 24.2-16.4 24.2-31V215l-137 39.1c-4.3 1.3-8.8 1.9-13.3 1.9zm212.6-112.2L586.8 41c-3.1-6.2-9.8-9.8-16.7-8.9L320 64l91.7 152.1c3.8 6.3 11.4 9.3 18.5 7.3l197.9-56.5c9.9-2.9 14.7-13.9 10.2-23.1zM53.2 41L1.7 143.8c-4.6 9.2.3 20.2 10.1 23l197.9 56.5c7.1 2 14.7-1 18.5-7.3L320 64 69.8 32.1c-6.9-.8-13.5 2.7-16.6 8.9z"},child:[]}]})(e)}function je(e){return _e({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M576 240c0-23.63-12.95-44.04-32-55.12V32.01C544 23.26 537.02 0 512 0c-7.12 0-14.19 2.38-19.98 7.02l-85.03 68.03C364.28 109.19 310.66 128 256 128H64c-35.35 0-64 28.65-64 64v96c0 35.35 28.65 64 64 64h33.7c-1.39 10.48-2.18 21.14-2.18 32 0 39.77 9.26 77.35 25.56 110.94 5.19 10.69 16.52 17.06 28.4 17.06h74.28c26.05 0 41.69-29.84 25.9-50.56-16.4-21.52-26.15-48.36-26.15-77.44 0-11.11 1.62-21.79 4.41-32H256c54.66 0 108.28 18.81 150.98 52.95l85.03 68.03a32.023 32.023 0 0 0 19.98 7.02c24.92 0 32-22.78 32-32V295.13C563.05 284.04 576 263.63 576 240zm-96 141.42l-33.05-26.44C392.95 311.78 325.12 288 256 288v-96c69.12 0 136.95-23.78 190.95-66.98L480 98.58v282.84z"},child:[]}]})(e)}function Oe(e){return _e({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(e)}function Me(e){return _e({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"},child:[]}]})(e)}function Pe(e){return _e({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 32C128.94 32 0 160.94 0 320c0 52.8 14.25 102.26 39.06 144.8 5.61 9.62 16.3 15.2 27.44 15.2h443c11.14 0 21.83-5.58 27.44-15.2C561.75 422.26 576 372.8 576 320c0-159.06-128.94-288-288-288zm0 64c14.71 0 26.58 10.13 30.32 23.65-1.11 2.26-2.64 4.23-3.45 6.67l-9.22 27.67c-5.13 3.49-10.97 6.01-17.64 6.01-17.67 0-32-14.33-32-32S270.33 96 288 96zM96 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm48-160c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm246.77-72.41l-61.33 184C343.13 347.33 352 364.54 352 384c0 11.72-3.38 22.55-8.88 32H232.88c-5.5-9.45-8.88-20.28-8.88-32 0-33.94 26.5-61.43 59.9-63.59l61.34-184.01c4.17-12.56 17.73-19.45 30.36-15.17 12.57 4.19 19.35 17.79 15.17 30.36zm14.66 57.2l15.52-46.55c3.47-1.29 7.13-2.23 11.05-2.23 17.67 0 32 14.33 32 32s-14.33 32-32 32c-11.38-.01-20.89-6.28-26.57-15.22zM480 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"},child:[]}]})(e)}function Le(e){return _e({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"},child:[]}]})(e)}function ze(e){return _e({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm95.8 32.6L272 480l-32-136 32-56h-96l32 56-32 136-47.8-191.4C56.9 292 0 350.3 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-72.1-56.9-130.4-128.2-133.8z"},child:[]}]})(e)}function Te(e){return _e({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}const Fe=()=>{const{currentUser:e}=p(),[t,a]=(0,r.useState)("dashboard"),[l,s]=(0,r.useState)(!1),[c,m]=(0,r.useState)(""),[i,o]=(0,r.useState)(null),d=(e,t)=>{m(e),o(n().cloneElement(t,{onClose:()=>s(!1),onSubmit:e=>{console.log("Form submitted",e),s(!1)}})),s(!0)},u=()=>{s(!1),m(""),o(null)};if(!e)return(0,r.createElement)(S,null);const g=[{id:"dashboard",label:"Dashboard",icon:(0,r.createElement)(Pe,{className:"mr-3"}),roles:["admin","finance","marketing","hr","jamaah","owner","super_admin","administrator"]},{id:"finance",label:"Finance",icon:(0,r.createElement)(Me,{className:"mr-3"}),roles:["admin","finance","owner","super_admin","administrator","admin_staff","finance_staff"]},{id:"marketing",label:"Marketing",icon:(0,r.createElement)(je,{className:"mr-3"}),roles:["admin","marketing","owner","super_admin","administrator","admin_staff","marketing_staff"]},{id:"sub_agents",label:"Sub Agen",icon:(0,r.createElement)(ze,{className:"mr-3"}),roles:["admin","marketing","owner","super_admin","administrator","admin_staff","marketing_staff"]},{id:"hr",label:"HR",icon:(0,r.createElement)(Te,{className:"mr-3"}),roles:["admin","hr","owner","super_admin","administrator","admin_staff","hr_staff"]},{id:"jamaah",label:"Jamaah",icon:(0,r.createElement)(Le,{className:"mr-3"}),roles:["admin","jamaah","marketing","finance","owner","super_admin","administrator","admin_staff","finance_staff","marketing_staff"]},{id:"packages",label:"Packages",icon:(0,r.createElement)(Se,{className:"mr-3"}),roles:["admin","marketing","owner","super_admin","administrator","admin_staff","marketing_staff"]},{id:"logs",label:"Logs",icon:(0,r.createElement)(Oe,{className:"mr-3"}),roles:["admin","owner","super_admin","administrator","admin_staff"]}].filter(t=>t.roles.includes(e.role));return(0,r.createElement)(b,null,(0,r.createElement)("div",{className:"flex h-screen bg-gray-100"},(0,r.createElement)("aside",{className:"w-64 bg-white text-gray-800 p-4 shadow-lg overflow-y-auto"},(0,r.createElement)("h1",{className:"text-2xl font-bold mb-6 text-indigo-600"},"Manajemen Umroh"),(0,r.createElement)("nav",null,(0,r.createElement)("ul",null,g.map(e=>(0,r.createElement)("li",{key:e.id,className:"mb-2"},(0,r.createElement)("button",{onClick:()=>a(e.id),className:"flex items-center w-full px-4 py-2 rounded-lg text-left transition-all duration-200 "+(t===e.id?"bg-indigo-600 text-white shadow-md":"hover:bg-indigo-50 hover:text-indigo-600")},e.icon,e.label)))))),(0,r.createElement)("main",{className:"flex-1 overflow-y-auto"},(0,r.createElement)("header",{className:"bg-white shadow-sm p-4 flex justify-between items-center sticky top-0 z-50"},(0,r.createElement)("h2",{className:"text-xl font-semibold text-gray-700 capitalize"},t.replace("_"," ")),(0,r.createElement)("div",{className:"text-right"},(0,r.createElement)("span",{className:"font-medium text-gray-800"},e.full_name),(0,r.createElement)("span",{className:"ml-2 text-sm text-gray-500 capitalize"},"(",e.role,")"))),(0,r.createElement)("div",{className:"p-6"},"dashboard"===t&&(0,r.createElement)(B,{openModal:d}),"finance"===t&&(0,r.createElement)(Y,{openModal:d}),"marketing"===t&&(0,r.createElement)(le,{openModal:d}),"sub_agents"===t&&(0,r.createElement)(he,{openModal:d}),"hr"===t&&(0,r.createElement)(ce,{openModal:d}),"jamaah"===t&&(0,r.createElement)(oe,{openModal:d}),"packages"===t&&(0,r.createElement)(ge,{openModal:d}),"logs"===t&&(0,r.createElement)(xe,null))),l&&(0,r.createElement)(V,{isOpen:l,onClose:u,title:c},i&&n().cloneElement(i,{onClose:u,onSubmit:()=>{u()}}))))},De=()=>(0,r.createElement)(u,null,(0,r.createElement)(Fe,null)),Ae=document.getElementById("umh-admin-app");Ae?(0,s.H)(Ae).render((0,r.createElement)(n().StrictMode,null,(0,r.createElement)(u,null,(0,r.createElement)(b,null,(0,r.createElement)(De,null))))):console.error("Target element #umh-admin-app not found.")})();