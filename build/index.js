(()=>{"use strict";var e={338:(e,t,a)=>{var l=a(795);t.H=l.createRoot,l.hydrateRoot},795:e=>{e.exports=window.ReactDOM}},t={};function a(l){var r=t[l];if(void 0!==r)return r.exports;var n=t[l]={exports:{}};return e[l](n,n.exports,a),n.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var l={};a.r(l);var r={};a.r(r),a.d(r,{a:()=>D});const n=window.React;var s=a.n(n),c=a(338);const m=window.umh_wp_data||{},i=m.user||null,o=m.nonce||null,d=m.api_url||"/wp-json/umh/v1",u=(0,n.createContext)(),p=({children:e})=>{const[t,a]=(0,n.useState)(i),l={currentUser:t,setCurrentUser:a,nonce:o,apiUrl:d,adminUrl:m.adminUrl,printUrl:m.printUrl,isWpAdmin:m.is_wp_admin||!1};return(0,n.createElement)(u.Provider,{value:l},e)},g=(0,n.createContext)(),x=()=>(0,n.useContext)(g),b=({children:e})=>{const[t,a]=(0,n.useState)(!1),[l,r]=(0,n.useState)(null),{apiUrl:s,nonce:c}=window.umhData||{apiUrl:"",nonce:""},m=(0,n.useCallback)(async(e,t="GET",l=null)=>{a(!0),r(null);try{const a={method:t,headers:{"Content-Type":"application/json","X-WP-Nonce":c},body:l?JSON.stringify(l):null};let r=`${s}${e}`;"GET"===t&&l&&(r+=`?${new URLSearchParams(l).toString()}`,delete a.body);const n=await fetch(r,a),m=await n.json();if(!n.ok)throw new Error(m.message||"Terjadi kesalahan pada server");return m}catch(e){throw r(e.message),e}finally{a(!1)}},[s,c]),i={loading:t,error:l,getMasterData:e=>m("master-data","GET",{type:e}),createMasterData:e=>m("master-data","POST",e),updateMasterData:(e,t)=>m(`master-data/${e}`,"PUT",t),deleteMasterData:e=>m(`master-data/${e}`,"DELETE"),getCategories:()=>m("categories","GET"),createCategory:e=>m("categories","POST",e),deleteCategory:e=>m(`categories/${e}`,"DELETE"),getPackages:e=>m("packages","GET",e),getPackageDetail:e=>m(`packages/${e}`,"GET"),createPackage:e=>m("packages","POST",e),updatePackage:(e,t)=>m(`packages/${e}`,"PUT",t),deletePackage:e=>m(`packages/${e}`,"DELETE"),getJamaahList:e=>m("jamaah","GET",e),createJamaah:e=>m("jamaah","POST",e)};return(0,n.createElement)(g.Provider,{value:i},e)},y=()=>{const{getDashboardStats:e,isOwner:t,currentUser:a,loading:r}=x(),[s,c]=(0,n.useState)(null);if((0,n.useEffect)(()=>{(async()=>{try{const t=await e();c(t)}catch(e){console.error("Gagal load dashboard",e)}})()},[]),r&&!s)return(0,n.createElement)(l.default,{text:"Memuat Dashboard..."});if(!s)return(0,n.createElement)("div",{className:"p-6"},"Gagal memuat data dashboard.");const m=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(e||0);return(0,n.createElement)("div",{className:"p-6 space-y-8 bg-gray-50 min-h-screen"},(0,n.createElement)("div",{className:"flex justify-between items-end"},(0,n.createElement)("div",null,(0,n.createElement)("h1",{className:"text-3xl font-bold text-gray-800"},"Dashboard Utama"),(0,n.createElement)("p",{className:"text-gray-500 mt-1"},"Selamat Datang, ",(0,n.createElement)("span",{className:"font-bold text-blue-600"},a?.data?.display_name||"User"),"! Anda login sebagai ",(0,n.createElement)("span",{className:"uppercase text-xs bg-gray-200 px-2 py-1 rounded font-bold"},t?"Owner/Admin":"Staff"),".")),(0,n.createElement)("div",{className:"text-right hidden md:block"},(0,n.createElement)("div",{className:"text-sm text-gray-500"},"Tanggal Hari Ini"),(0,n.createElement)("div",{className:"text-lg font-bold text-gray-700"},(new Date).toLocaleDateString("id-ID",{weekday:"long",year:"numeric",month:"long",day:"numeric"})))),(0,n.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},(0,n.createElement)("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition flex items-center"},(0,n.createElement)("div",{className:"p-3 rounded-full bg-blue-100 text-blue-600 mr-4"},(0,n.createElement)("span",{className:"text-2xl"},"ðŸ‘¥")),(0,n.createElement)("div",null,(0,n.createElement)("p",{className:"text-sm text-gray-500 font-medium"},"Total Jamaah"),(0,n.createElement)("h3",{className:"text-2xl font-bold text-gray-800"},s.cards.total_jamaah))),(0,n.createElement)("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition flex items-center"},(0,n.createElement)("div",{className:"p-3 rounded-full bg-indigo-100 text-indigo-600 mr-4"},(0,n.createElement)("span",{className:"text-2xl"},"ðŸ“ˆ")),(0,n.createElement)("div",null,(0,n.createElement)("p",{className:"text-sm text-gray-500 font-medium"},"Pendaftar Bulan Ini"),(0,n.createElement)("h3",{className:"text-2xl font-bold text-gray-800"},s.cards.new_jamaah_month," ",(0,n.createElement)("span",{className:"text-sm text-gray-400 font-normal"},"Orang")))),t?(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{className:"bg-gradient-to-br from-green-500 to-green-600 p-5 rounded-xl shadow-lg text-white transform hover:-translate-y-1 transition"},(0,n.createElement)("div",{className:"flex justify-between items-start"},(0,n.createElement)("div",null,(0,n.createElement)("p",{className:"text-green-100 font-medium mb-1"},"Estimasi Keuntungan"),(0,n.createElement)("h3",{className:"text-2xl font-bold"},m(s.cards.profit))),(0,n.createElement)("span",{className:"text-2xl opacity-50"},"ðŸ’°")),(0,n.createElement)("div",{className:"mt-4 text-xs text-green-100 bg-white/20 inline-block px-2 py-1 rounded"},"Omset: ",m(s.cards.revenue))),(0,n.createElement)("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition flex items-center"},(0,n.createElement)("div",{className:"p-3 rounded-full bg-red-100 text-red-600 mr-4"},(0,n.createElement)("span",{className:"text-2xl"},"ðŸ’¸")),(0,n.createElement)("div",null,(0,n.createElement)("p",{className:"text-sm text-gray-500 font-medium"},"Total Pengeluaran"),(0,n.createElement)("h3",{className:"text-xl font-bold text-gray-800"},m(s.cards.expense))))):(0,n.createElement)(n.Fragment,null,(0,n.createElement)("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition flex items-center"},(0,n.createElement)("div",{className:"p-3 rounded-full bg-yellow-100 text-yellow-600 mr-4"},(0,n.createElement)("span",{className:"text-2xl"},"ðŸ“¦")),(0,n.createElement)("div",null,(0,n.createElement)("p",{className:"text-sm text-gray-500 font-medium"},"Paket Aktif"),(0,n.createElement)("h3",{className:"text-2xl font-bold text-gray-800"},s.cards.active_packages))),(0,n.createElement)("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition flex items-center"},(0,n.createElement)("div",{className:"p-3 rounded-full bg-purple-100 text-purple-600 mr-4"},(0,n.createElement)("span",{className:"text-2xl"},"ðŸ“‹")),(0,n.createElement)("div",null,(0,n.createElement)("p",{className:"text-sm text-gray-500 font-medium"},"Tugas Pending"),(0,n.createElement)("h3",{className:"text-2xl font-bold text-gray-800"},"0"))))),(0,n.createElement)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8"},(0,n.createElement)("div",{className:"lg:col-span-2 bg-white p-6 rounded-xl shadow-sm border border-gray-100"},(0,n.createElement)("h3",{className:"text-lg font-bold text-gray-800 mb-6"},"Grafik Pertumbuhan Jamaah (6 Bulan Terakhir)"),s.chart.length>0?(0,n.createElement)("div",{className:"flex items-end space-x-4 h-64 mt-4 pb-2 border-b border-l border-gray-200 pl-2"},s.chart.map((e,t)=>{const a=Math.max(...s.chart.map(e=>parseInt(e.count))),l=a>0?parseInt(e.count)/a*100:0;return(0,n.createElement)("div",{key:t,className:"flex-1 flex flex-col justify-end items-center group"},(0,n.createElement)("div",{className:"text-xs font-bold text-blue-600 mb-1 opacity-0 group-hover:opacity-100 transition-opacity"},e.count),(0,n.createElement)("div",{className:"w-full bg-blue-500 rounded-t-md hover:bg-blue-600 transition-all relative",style:{height:`${l}%`,minHeight:"4px"}}),(0,n.createElement)("div",{className:"text-xs text-gray-500 mt-2 transform -rotate-45 origin-top-left translate-y-4"},e.month))})):(0,n.createElement)("div",{className:"h-64 flex items-center justify-center text-gray-400"},"Belum ada data grafik")),(0,n.createElement)("div",{className:"space-y-6"},(0,n.createElement)("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100"},(0,n.createElement)("h3",{className:"font-bold text-gray-800 mb-3 flex items-center"},(0,n.createElement)("span",{className:"text-red-500 mr-2"},"âš ")," Perlu Perhatian"),(0,n.createElement)("div",{className:"space-y-3"},0===s.alerts.length?(0,n.createElement)("p",{className:"text-sm text-gray-500 italic"},"Tidak ada peringatan mendesak."):s.alerts.map((e,t)=>(0,n.createElement)("div",{key:t,className:"p-3 bg-red-50 rounded border border-red-100 flex justify-between items-start"},(0,n.createElement)("div",null,(0,n.createElement)("div",{className:"text-sm font-bold text-gray-800"},e.full_name),(0,n.createElement)("div",{className:"text-xs text-red-600"},"Paspor Exp: ",e.passport_expiry_date)),(0,n.createElement)("button",{className:"text-xs bg-white border border-red-200 px-2 py-1 rounded text-red-600 hover:bg-red-50"},"Cek"))))),(0,n.createElement)("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100"},(0,n.createElement)("h3",{className:"font-bold text-gray-800 mb-3 flex items-center"},(0,n.createElement)("span",{className:"text-blue-500 mr-2"},"âœˆ")," Keberangkatan Terdekat"),(0,n.createElement)("div",{className:"space-y-3"},0===s.upcoming.length?(0,n.createElement)("p",{className:"text-sm text-gray-500 italic"},"Belum ada jadwal paket aktif."):s.upcoming.map(e=>(0,n.createElement)("div",{key:e.id,className:"flex justify-between items-center p-3 bg-gray-50 rounded hover:bg-gray-100 transition cursor-pointer"},(0,n.createElement)("div",null,(0,n.createElement)("div",{className:"text-sm font-bold text-gray-800"},e.name),(0,n.createElement)("div",{className:"text-xs text-gray-500"},e.departure_date," â€¢ ",e.jamaah_count," Jamaah")),(0,n.createElement)("div",{className:"text-xs font-bold text-blue-600 bg-blue-100 px-2 py-1 rounded"},e.airline_name)))),(0,n.createElement)("button",{className:"w-full mt-3 text-sm text-blue-600 font-medium hover:underline"},"Lihat Semua Jadwal â†’")))))},E=({mode:e="operational",onSuccess:t,onCancel:a})=>{const{createCashTransaction:r,createPayment:s,getJamaahList:c}=x(),[m,i]=(0,n.useState)(!1),[o,d]=(0,n.useState)([]),[u,p]=(0,n.useState)(""),[g,b]=(0,n.useState)({type:"operational"===e?"out":"in",category:"",amount:"",transaction_date:(new Date).toISOString().split("T")[0],description:"",proof_file:"",jamaah_id:"",payment_method:"Transfer"});(0,n.useEffect)(()=>{"payment"===e&&c({payment_status:"unpaid_partial"}).then(e=>d(e||[])).catch(console.error)},[e]);const y=o.filter(e=>e.full_name.toLowerCase().includes(u.toLowerCase())||e.passport_number&&e.passport_number.includes(u));return m?(0,n.createElement)(l.default,{text:"Menyimpan Transaksi..."}):(0,n.createElement)("form",{onSubmit:async a=>{a.preventDefault(),i(!0);try{"operational"===e?await r(g):await s({jamaah_id:g.jamaah_id,amount:g.amount,payment_date:g.transaction_date,payment_method:g.payment_method,proof_file:g.proof_file,notes:g.description}),t()}catch(e){alert("Gagal: "+e.message)}finally{i(!1)}},className:"space-y-4 bg-white p-6 rounded"},(0,n.createElement)("h3",{className:"text-lg font-bold mb-4 border-b pb-2"},"operational"===e?"Catat Kas Operasional":"Input Pembayaran Jamaah"),"payment"===e&&(0,n.createElement)("div",{className:"bg-blue-50 p-3 rounded border border-blue-200 mb-4"},(0,n.createElement)("label",{className:"label"},"Cari Jamaah"),(0,n.createElement)("input",{type:"text",placeholder:"Ketik Nama / No Paspor...",className:"input-field w-full mb-2",value:u,onChange:e=>p(e.target.value)}),(0,n.createElement)("select",{className:"input-field w-full font-bold text-blue-800",value:g.jamaah_id,onChange:e=>b({...g,jamaah_id:e.target.value}),required:!0,size:5},y.map(e=>(0,n.createElement)("option",{key:e.id,value:e.id,className:"p-2 border-b hover:bg-blue-100"},e.full_name," - ",e.package_name," (Sisa Tagihan: ",new Intl.NumberFormat("id-ID").format(e.remaining_payment),")"))),g.jamaah_id&&(0,n.createElement)("p",{className:"text-xs text-green-600 mt-1"},"Jamaah Terpilih âœ…")),"operational"===e&&(0,n.createElement)("div",{className:"grid grid-cols-2 gap-4"},(0,n.createElement)("label",{className:"cursor-pointer border p-3 rounded text-center "+("in"===g.type?"bg-green-100 border-green-500 text-green-800 font-bold":"bg-gray-50")},(0,n.createElement)("input",{type:"radio",name:"type",value:"in",checked:"in"===g.type,onChange:()=>b({...g,type:"in"}),className:"hidden"}),"â¬‡ Kas Masuk"),(0,n.createElement)("label",{className:"cursor-pointer border p-3 rounded text-center "+("out"===g.type?"bg-red-100 border-red-500 text-red-800 font-bold":"bg-gray-50")},(0,n.createElement)("input",{type:"radio",name:"type",value:"out",checked:"out"===g.type,onChange:()=>b({...g,type:"out"}),className:"hidden"}),"â¬† Kas Keluar")),(0,n.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"label"},"Tanggal Transaksi"),(0,n.createElement)("input",{type:"date",className:"input-field w-full",value:g.transaction_date,onChange:e=>b({...g,transaction_date:e.target.value}),required:!0})),(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"label"},"Nominal (Rp)"),(0,n.createElement)("input",{type:"number",className:"input-field w-full text-right font-mono font-bold",placeholder:"0",value:g.amount,onChange:e=>b({...g,amount:e.target.value}),required:!0}))),"operational"===e?(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"label"},"Kategori"),(0,n.createElement)("input",{type:"text",placeholder:"Contoh: Listrik, Konsumsi, Hotel...",className:"input-field w-full",value:g.category,onChange:e=>b({...g,category:e.target.value}),required:!0})):(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"label"},"Metode Pembayaran"),(0,n.createElement)("select",{className:"input-field w-full",value:g.payment_method,onChange:e=>b({...g,payment_method:e.target.value})},(0,n.createElement)("option",{value:"Transfer"},"Transfer Bank"),(0,n.createElement)("option",{value:"Tunai"},"Tunai / Cash"),(0,n.createElement)("option",{value:"EDC"},"Kartu Debit/Kredit"))),(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"label"},"Keterangan / Catatan"),(0,n.createElement)("textarea",{className:"input-field w-full",rows:"2",value:g.description,onChange:e=>b({...g,description:e.target.value}),required:!0})),(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"label"},"Link Bukti (URL Gambar)"),(0,n.createElement)("input",{type:"text",placeholder:"https://...",className:"input-field w-full",value:g.proof_file,onChange:e=>b({...g,proof_file:e.target.value})})),(0,n.createElement)("div",{className:"flex justify-end space-x-2 pt-4 border-t mt-2"},(0,n.createElement)("button",{type:"button",onClick:a,className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300"},"Batal"),(0,n.createElement)("button",{type:"submit",className:"px-6 py-2 rounded bg-blue-600 text-white font-bold hover:bg-blue-700"},"Simpan")))},h=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},f=(...e)=>e.filter((e,t,a)=>Boolean(e)&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),v=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var N={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const w=(0,n.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:r="",children:s,iconNode:c,...m},i)=>(0,n.createElement)("svg",{ref:i,...N,width:t,height:t,stroke:e,strokeWidth:l?24*Number(a)/Number(t):a,className:f("lucide",r),...!s&&!v(m)&&{"aria-hidden":"true"},...m},[...c.map(([e,t])=>(0,n.createElement)(e,t)),...Array.isArray(s)?s:[s]])),k=((e,t)=>{const a=(0,n.forwardRef)(({className:e,...a},l)=>{return(0,n.createElement)(w,{ref:l,iconNode:t,className:f(`lucide-${r=h("x"),r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,"lucide-x",e),...a});var r});return a.displayName=h("x"),a})(0,[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),_=({children:e,variant:t="primary",className:a="",type:l="button",...r})=>{const s={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",warning:"bg-yellow-500 text-white hover:bg-yellow-600 focus:ring-yellow-500",icon:"p-2 text-gray-500 hover:bg-gray-100 rounded-full shadow-none border-none"};return(0,n.createElement)("button",{type:l,className:`px-4 py-2 rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${s[t]||s.primary} ${a}`,...r},e)},C=({label:e,className:t="",error:a,...l})=>(0,n.createElement)("div",{className:"w-full"},e&&(0,n.createElement)("label",{className:"block text-sm font-medium text-gray-700 mb-1"},e),(0,n.createElement)("input",{className:`w-full px-3 py-2 border ${a?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${t}`,...l}),a&&(0,n.createElement)("p",{className:"mt-1 text-xs text-red-500"},a)),S=({label:e,className:t="",error:a,...l})=>(0,n.createElement)("div",{className:"w-full"},e&&(0,n.createElement)("label",{className:"block text-sm font-medium text-gray-700 mb-1"},e),(0,n.createElement)("textarea",{className:`w-full px-3 py-2 border ${a?"border-red-500":"border-gray-300"} rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm ${t}`,...l}),a&&(0,n.createElement)("p",{className:"mt-1 text-xs text-red-500"},a)),P=(...e)=>e.filter(Boolean).join(" "),D=({title:e,isOpen:t,onClose:a,children:l,footer:r,size:s="3xl"})=>((0,n.useEffect)(()=>(document.body.style.overflow=t?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[t]),t?(0,n.createElement)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 backdrop-blur-sm flex items-start justify-center p-4 z-[100000] overflow-y-auto pt-10 sm:pt-20",onClick:a},(0,n.createElement)("div",{className:P("bg-white rounded-xl shadow-2xl w-full m-auto flex flex-col max-h-[90vh] transform transition-all",{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl"}[s]||"max-w-3xl"),onClick:e=>e.stopPropagation()},(0,n.createElement)("div",{className:"flex justify-between items-center p-5 border-b border-gray-100 sticky top-0 bg-white rounded-t-xl z-10"},(0,n.createElement)("h3",{className:"text-xl font-bold text-gray-800"},e),(0,n.createElement)("button",{onClick:a,className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors","aria-label":"Close"},(0,n.createElement)(k,{className:"h-6 w-6"}))),(0,n.createElement)("div",{className:"p-6 overflow-y-auto custom-scrollbar"},l),r&&(0,n.createElement)("div",{className:"flex justify-end gap-3 p-4 border-t border-gray-100 bg-gray-50 rounded-b-xl sticky bottom-0 z-10"},r))):null),j=()=>{const{getFinanceStats:e,getCashFlow:t,getPayments:a}=x(),[r,s]=(0,n.useState)({total_in:0,total_out:0,balance:0}),[c,m]=(0,n.useState)([]),[i,o]=(0,n.useState)([]),[d,u]=(0,n.useState)("cashflow"),[p,g]=(0,n.useState)(!0),[b,y]=(0,n.useState)(!1),[h,f]=(0,n.useState)("operational");(0,n.useEffect)(()=>{v()},[d]);const v=async()=>{g(!0);try{const l=await e();if(s(l||{total_in:0,total_out:0,balance:0}),"cashflow"===d){const e=await t();m(e||[])}else{const e=await a();o(e||[])}}catch(e){console.error("Error finance data",e)}finally{g(!1)}},N=e=>{f(e),y(!0)},w=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(e);return(0,n.createElement)("div",{className:"p-6"},(0,n.createElement)("h1",{className:"text-2xl font-bold text-gray-800 mb-6"},"Keuangan & Kas"),(0,n.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},(0,n.createElement)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200 shadow-sm"},(0,n.createElement)("div",{className:"text-sm text-green-600 font-bold uppercase"},"Total Pemasukan"),(0,n.createElement)("div",{className:"text-2xl font-bold text-green-800"},w(r.total_in))),(0,n.createElement)("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200 shadow-sm"},(0,n.createElement)("div",{className:"text-sm text-red-600 font-bold uppercase"},"Total Pengeluaran"),(0,n.createElement)("div",{className:"text-2xl font-bold text-red-800"},w(r.total_out))),(0,n.createElement)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 shadow-sm"},(0,n.createElement)("div",{className:"text-sm text-blue-600 font-bold uppercase"},"Saldo Kas Saat Ini"),(0,n.createElement)("div",{className:"text-3xl font-bold text-blue-800"},w(r.balance)))),(0,n.createElement)("div",{className:"flex justify-between items-center mb-4"},(0,n.createElement)("div",{className:"flex space-x-4"},(0,n.createElement)("button",{onClick:()=>u("cashflow"),className:"px-4 py-2 font-medium rounded-t-lg "+("cashflow"===d?"bg-white text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700")},"Arus Kas (Cash Flow)"),(0,n.createElement)("button",{onClick:()=>u("payments"),className:"px-4 py-2 font-medium rounded-t-lg "+("payments"===d?"bg-white text-blue-600 border-b-2 border-blue-600":"text-gray-500 hover:text-gray-700")},"Riwayat Pembayaran Jamaah")),(0,n.createElement)("div",{className:"space-x-2"},(0,n.createElement)("button",{onClick:()=>N("operational"),className:"bg-gray-800 text-white px-4 py-2 rounded hover:bg-gray-700 text-sm"},"+ Kas Operasional"),(0,n.createElement)("button",{onClick:()=>N("payment"),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 text-sm shadow"},"+ Input Pembayaran Jamaah"))),(0,n.createElement)("div",{className:"bg-white rounded shadow overflow-hidden min-h-[300px]"},p?(0,n.createElement)(l.default,null):(0,n.createElement)(n.Fragment,null,"cashflow"===d&&(0,n.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,n.createElement)("thead",{className:"bg-gray-50"},(0,n.createElement)("tr",null,(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase"},"Tanggal"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase"},"Kategori"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase"},"Deskripsi"),(0,n.createElement)("th",{className:"px-6 py-3 text-right text-xs font-bold text-gray-500 uppercase"},"Nominal"))),(0,n.createElement)("tbody",{className:"divide-y divide-gray-200"},c.map(e=>(0,n.createElement)("tr",{key:e.id,className:"hover:bg-gray-50"},(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},e.transaction_date),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},(0,n.createElement)("span",{className:"px-2 py-1 rounded text-xs font-bold "+("in"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800")},"in"===e.type?"MASUK":"KELUAR"),(0,n.createElement)("span",{className:"ml-2"},e.category)),(0,n.createElement)("td",{className:"px-6 py-4 text-sm text-gray-600"},e.description),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-bold "+("in"===e.type?"text-green-600":"text-red-600")},"in"===e.type?"+":"-"," ",w(e.amount)))),0===c.length&&(0,n.createElement)("tr",null,(0,n.createElement)("td",{colSpan:"4",className:"p-6 text-center text-gray-500"},"Belum ada transaksi")))),"payments"===d&&(0,n.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,n.createElement)("thead",{className:"bg-gray-50"},(0,n.createElement)("tr",null,(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase"},"Tanggal"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase"},"Jamaah"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase"},"Metode"),(0,n.createElement)("th",{className:"px-6 py-3 text-right text-xs font-bold text-gray-500 uppercase"},"Jumlah"))),(0,n.createElement)("tbody",{className:"divide-y divide-gray-200"},i.map(e=>(0,n.createElement)("tr",{key:e.id,className:"hover:bg-gray-50"},(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},e.payment_date),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},(0,n.createElement)("div",{className:"text-sm font-bold text-gray-900"},e.full_name),(0,n.createElement)("div",{className:"text-xs text-gray-500"},"Paspor: ",e.passport_number||"-")),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},e.payment_method),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-bold text-green-600"},w(e.amount)))),0===i.length&&(0,n.createElement)("tr",null,(0,n.createElement)("td",{colSpan:"4",className:"p-6 text-center text-gray-500"},"Belum ada data pembayaran")))))),b&&(0,n.createElement)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4"},(0,n.createElement)("div",{className:"w-full max-w-2xl"},(0,n.createElement)(E,{mode:h,onSuccess:()=>{y(!1),v()},onCancel:()=>y(!1)}))))},T=()=>{const{leads:e}=x(),[t,a]=(0,n.useState)(""),[l,r]=(0,n.useState)("all"),s=e?.filter(e=>{const a=e.name.toLowerCase().includes(t.toLowerCase()),r="all"===l||e.status===l;return a&&r});return(0,n.createElement)("div",{className:"space-y-6"},(0,n.createElement)("div",{className:"flex justify-between items-center"},(0,n.createElement)("h2",{className:"text-2xl font-bold text-gray-800"},"Marketing Leads"),(0,n.createElement)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"},"Tambah Lead")),(0,n.createElement)("div",{className:"bg-white p-4 rounded-lg shadow flex gap-4"},(0,n.createElement)(C,{placeholder:"Cari nama...",value:t,onChange:e=>a(e.target.value),className:"max-w-xs text-gray-800 bg-white border-gray-300"}),(0,n.createElement)("select",{value:l,onChange:e=>r(e.target.value),className:"border-gray-300 rounded-md text-gray-800 bg-white focus:ring-blue-500 focus:border-blue-500 p-2"},(0,n.createElement)("option",{value:"all"},"Semua Status"),(0,n.createElement)("option",{value:"new"},"Baru"),(0,n.createElement)("option",{value:"contacted"},"Dihubungi"),(0,n.createElement)("option",{value:"closing"},"Closing"),(0,n.createElement)("option",{value:"lost"},"Lost"))),(0,n.createElement)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg"},(0,n.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,n.createElement)("thead",{className:"bg-gray-50"},(0,n.createElement)("tr",null,(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nama"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Kontak"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi"))),(0,n.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},s?.map(e=>(0,n.createElement)("tr",{key:e.id},(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-900"},e.name),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-500"},e.phone),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},(0,n.createElement)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full \n                                        "+("closing"===e.status?"bg-green-100 text-green-800":"lost"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800")},e.status)),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-blue-600 cursor-pointer"},"Edit")))))))},O=()=>{const{staff:e,updateStaffRole:t}=x(),[a,l]=(0,n.useState)(!1),[r,s]=(0,n.useState)(null);return(0,n.createElement)("div",{className:"space-y-6"},(0,n.createElement)("h2",{className:"text-2xl font-bold text-gray-800"},"Manajemen Staff (HR)"),(0,n.createElement)("div",{className:"bg-white shadow rounded overflow-hidden"},(0,n.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,n.createElement)("thead",{className:"bg-gray-50"},(0,n.createElement)("tr",null,(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nama"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Role"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Hak Akses"),(0,n.createElement)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Aksi"))),(0,n.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},e?.map(e=>(0,n.createElement)("tr",{key:e.id},(0,n.createElement)("td",{className:"px-6 py-4 font-medium text-gray-900"},e.full_name),(0,n.createElement)("td",{className:"px-6 py-4"},(0,n.createElement)("span",{className:"bg-blue-100 text-blue-800 py-1 px-2 rounded text-xs"},e.role)),(0,n.createElement)("td",{className:"px-6 py-4 text-sm text-gray-500"},(0,n.createElement)("button",{onClick:()=>(s(e),void l(!0)),className:"text-blue-600 hover:underline"},"Atur Hak Akses")),(0,n.createElement)("td",{className:"px-6 py-4 text-right text-sm"},"Edit | Hapus")))))),(0,n.createElement)(D,{isOpen:a,onClose:()=>l(!1),title:`Hak Akses: ${r?.full_name}`},(0,n.createElement)("div",{className:"space-y-4"},(0,n.createElement)("p",{className:"text-sm text-gray-600"},"Centang fitur yang dapat diakses oleh staff ini."),(0,n.createElement)("div",{className:"grid grid-cols-2 gap-2"},["Dashboard","Keuangan","Marketing","Paket","Jemaah","HR"].map(e=>(0,n.createElement)("label",{key:e,className:"flex items-center space-x-2"},(0,n.createElement)("input",{type:"checkbox",className:"rounded text-blue-600 focus:ring-blue-500"}),(0,n.createElement)("span",{className:"text-gray-700"},e)))),(0,n.createElement)("div",{className:"flex justify-end mt-4"},(0,n.createElement)(_,{onClick:()=>l(!1)},"Simpan Akses")))))},K=({initialData:e,onSuccess:t,onCancel:a})=>{const{createJamaah:r,updateJamaah:s,getPackages:c}=x(),[m,i]=(0,n.useState)(!0),[o,d]=(0,n.useState)([]),[u,p]=(0,n.useState)(null),[g,b]=(0,n.useState)({package_id:"",selected_room_type:"",full_name:"",gender:"L",birth_date:"",age:0,phone_number:"",passport_number:"",passport_issued_date:"",passport_expiry_date:"",address_details:{provinsi_id:"",provinsi_name:"",kota_id:"",kota_name:"",kecamatan_id:"",kecamatan_name:"",kelurahan_id:"",kelurahan_name:"",detail_alamat:""},files_ktp:"",files_kk:"",files_passport:"",files_meningitis:"",document_status:{ktp:!1,kk:!1,passport:!1,meningitis:!1},kit_status:"pending",pic_id:""}),[y,E]=(0,n.useState)([]),[h,f]=(0,n.useState)([]),[v,N]=(0,n.useState)([]),[w,k]=(0,n.useState)([]);(0,n.useEffect)(()=>{(async()=>{try{const t=await c({status:"active"});if(d(t||[]),fetch("https://www.emsifa.com/api-wilayah-indonesia/api/provinces.json").then(e=>e.json()).then(e=>E(e)),e){b({...e,address_details:"string"==typeof e.address_details?JSON.parse(e.address_details):e.address_details,document_status:"string"==typeof e.document_status?JSON.parse(e.document_status):e.document_status,age:C(e.birth_date)});const a=(t||[]).find(t=>t.id==e.package_id);p(a)}}catch(e){console.error(e)}finally{i(!1)}})()},[e]);const _=(e,t,a)=>{const l={...g.address_details,[`${e}_id`]:t,[`${e}_name`]:a};"provinsi"===e?(l.kota_id="",l.kecamatan_id="",l.kelurahan_id="",f([]),N([]),k([]),fetch(`https://www.emsifa.com/api-wilayah-indonesia/api/regencies/${t}.json`).then(e=>e.json()).then(f)):"kota"===e?(l.kecamatan_id="",l.kelurahan_id="",N([]),k([]),fetch(`https://www.emsifa.com/api-wilayah-indonesia/api/districts/${t}.json`).then(e=>e.json()).then(N)):"kecamatan"===e&&(l.kelurahan_id="",k([]),fetch(`https://www.emsifa.com/api-wilayah-indonesia/api/villages/${t}.json`).then(e=>e.json()).then(k)),b(e=>({...e,address_details:l}))},C=e=>{if(!e)return 0;const t=new Date,a=new Date(e);let l=t.getFullYear()-a.getFullYear();const r=t.getMonth()-a.getMonth();return(r<0||0===r&&t.getDate()<a.getDate())&&l--,l},S=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(e);return m?(0,n.createElement)(l.default,{text:"Menyiapkan Form..."}):(0,n.createElement)("form",{onSubmit:async a=>{a.preventDefault();try{e?.id?await s(e.id,g):await r(g),t()}catch(e){alert("Error: "+e.message)}},className:"bg-white"},(0,n.createElement)("div",{className:"flex justify-between items-center border-b pb-4 mb-6"},(0,n.createElement)("h2",{className:"text-xl font-bold text-gray-800"},e?"Edit Data Jamaah":"Registrasi Jamaah Baru"),(0,n.createElement)("button",{type:"button",onClick:a,className:"text-gray-500 hover:text-gray-700"},"âœ• Tutup")),(0,n.createElement)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8"},(0,n.createElement)("div",{className:"space-y-4"},(0,n.createElement)("h3",{className:"font-bold text-blue-600 border-b pb-1"},"1. Paket & Data Diri"),(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"label"},"Pilih Paket"),(0,n.createElement)("select",{className:"input-field w-full border p-2 rounded",value:g.package_id,onChange:e=>{const t=e.target.value,a=o.find(e=>e.id==t);p(a),b(e=>({...e,package_id:t,selected_room_type:""}))},required:!0,disabled:!!e},(0,n.createElement)("option",{value:""},"-- Pilih Paket Keberangkatan --"),o.map(e=>(0,n.createElement)("option",{key:e.id,value:e.id},e.name," - ",e.departure_date)))),u&&(0,n.createElement)("div",{className:"bg-blue-50 p-3 rounded border border-blue-200"},(0,n.createElement)("div",{className:"text-sm font-bold text-blue-800 mb-2"},"Pilih Tipe Kamar:"),(0,n.createElement)("div",{className:"grid grid-cols-2 gap-2"},u.pricing_variants&&u.pricing_variants.map((e,t)=>(0,n.createElement)("label",{key:t,className:"cursor-pointer border p-2 rounded text-sm flex flex-col items-center "+(g.selected_room_type===e.type?"bg-blue-600 text-white border-blue-600":"bg-white hover:bg-gray-50")},(0,n.createElement)("input",{type:"radio",name:"room_type",value:e.type,checked:g.selected_room_type===e.type,onChange:e=>b({...g,selected_room_type:e.target.value}),className:"hidden"}),(0,n.createElement)("span",{className:"font-bold"},e.type),(0,n.createElement)("span",null,S(e.price))))),g.selected_room_type&&(0,n.createElement)("div",{className:"mt-2 text-center text-green-700 font-bold text-sm"},"Total: ",S((()=>{if(!u||!g.selected_room_type)return 0;const e=(u.pricing_variants||[]).find(e=>e.type===g.selected_room_type||e.name===g.selected_room_type);return e?e.price:0})()))),(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"label"},"Nama Lengkap (Sesuai KTP/Paspor)"),(0,n.createElement)("input",{type:"text",className:"input-field w-full border p-2 rounded uppercase",value:g.full_name,onChange:e=>b({...g,full_name:e.target.value}),required:!0})),(0,n.createElement)("div",{className:"grid grid-cols-2 gap-4"},(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"label"},"Jenis Kelamin"),(0,n.createElement)("select",{className:"input-field w-full border p-2 rounded",value:g.gender,onChange:e=>b({...g,gender:e.target.value})},(0,n.createElement)("option",{value:"L"},"Laki-laki"),(0,n.createElement)("option",{value:"P"},"Perempuan"))),(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"label"},"Tanggal Lahir"),(0,n.createElement)("input",{type:"date",className:"input-field w-full border p-2 rounded",value:g.birth_date,onChange:e=>{const t=e.target.value;b(e=>({...e,birth_date:t,age:C(t)}))},required:!0}))),(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"label"},"Umur (Otomatis)"),(0,n.createElement)("input",{type:"text",className:"bg-gray-100 w-full border p-2 rounded cursor-not-allowed",value:`${g.age} Tahun`,readOnly:!0})),(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"label"},"No. HP / WhatsApp"),(0,n.createElement)("input",{type:"text",className:"input-field w-full border p-2 rounded",value:g.phone_number,onChange:e=>b({...g,phone_number:e.target.value}),placeholder:"08...",required:!0}))),(0,n.createElement)("div",{className:"space-y-4"},(0,n.createElement)("h3",{className:"font-bold text-blue-600 border-b pb-1"},"2. Alamat Domisili & Paspor"),(0,n.createElement)("div",{className:"grid grid-cols-2 gap-3"},(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"text-xs text-gray-500"},"Provinsi"),(0,n.createElement)("select",{className:"w-full border p-1 rounded text-sm",onChange:e=>_("provinsi",e.target.value,e.target.selectedOptions[0].text),value:g.address_details.provinsi_id},(0,n.createElement)("option",{value:""},"Pilih..."),y.map(e=>(0,n.createElement)("option",{key:e.id,value:e.id},e.name)))),(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"text-xs text-gray-500"},"Kab/Kota"),(0,n.createElement)("select",{className:"w-full border p-1 rounded text-sm",onChange:e=>_("kota",e.target.value,e.target.selectedOptions[0].text),value:g.address_details.kota_id},(0,n.createElement)("option",{value:""},"Pilih..."),h.map(e=>(0,n.createElement)("option",{key:e.id,value:e.id},e.name)))),(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"text-xs text-gray-500"},"Kecamatan"),(0,n.createElement)("select",{className:"w-full border p-1 rounded text-sm",onChange:e=>_("kecamatan",e.target.value,e.target.selectedOptions[0].text),value:g.address_details.kecamatan_id},(0,n.createElement)("option",{value:""},"Pilih..."),v.map(e=>(0,n.createElement)("option",{key:e.id,value:e.id},e.name)))),(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"text-xs text-gray-500"},"Desa/Kel"),(0,n.createElement)("select",{className:"w-full border p-1 rounded text-sm",onChange:e=>_("kelurahan",e.target.value,e.target.selectedOptions[0].text),value:g.address_details.kelurahan_id},(0,n.createElement)("option",{value:""},"Pilih..."),w.map(e=>(0,n.createElement)("option",{key:e.id,value:e.id},e.name))))),(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"label"},"Alamat Lengkap (Jalan, RT/RW)"),(0,n.createElement)("textarea",{className:"w-full border p-2 rounded",rows:"2",value:g.address_details.detail_alamat,onChange:e=>b(t=>({...t,address_details:{...t.address_details,detail_alamat:e.target.value}})),placeholder:"Jl. Merdeka No. 1, RT 01/RW 02..."})),(0,n.createElement)("div",{className:"bg-yellow-50 p-3 rounded border border-yellow-200 mt-4"},(0,n.createElement)("h4",{className:"font-bold text-yellow-800 text-sm mb-2"},"Data Paspor"),(0,n.createElement)("div",{className:"space-y-2"},(0,n.createElement)("input",{type:"text",placeholder:"Nomor Paspor",className:"w-full border p-2 rounded",value:g.passport_number,onChange:e=>b({...g,passport_number:e.target.value})}),(0,n.createElement)("div",{className:"grid grid-cols-2 gap-2"},(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"text-xs"},"Tgl Issued"),(0,n.createElement)("input",{type:"date",className:"w-full border p-2 rounded text-sm",value:g.passport_issued_date,onChange:e=>b({...g,passport_issued_date:e.target.value})})),(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"text-xs"},"Tgl Expired"),(0,n.createElement)("input",{type:"date",className:"w-full border p-2 rounded text-sm",value:g.passport_expiry_date,onChange:e=>b({...g,passport_expiry_date:e.target.value})}))),(()=>{if(!g.passport_expiry_date)return null;const e=new Date(g.passport_expiry_date),t=new Date,a=new Date;return a.setMonth(t.getMonth()+6),e<t?(0,n.createElement)("span",{className:"text-red-600 text-xs font-bold block mt-1"},"âš  Paspor Sudah Kadaluarsa!"):e<a?(0,n.createElement)("span",{className:"text-red-600 text-xs font-bold block mt-1"},"âš  Segera Perpanjang Paspor (Kurang dari 6 Bulan)"):null})()))),(0,n.createElement)("div",{className:"space-y-4"},(0,n.createElement)("h3",{className:"font-bold text-blue-600 border-b pb-1"},"3. Dokumen & Perlengkapan"),(0,n.createElement)("div",{className:"space-y-3"},[{key:"files_ktp",label:"Foto KTP",statusKey:"ktp"},{key:"files_kk",label:"Foto KK",statusKey:"kk"},{key:"files_passport",label:"Scan Paspor",statusKey:"passport"},{key:"files_meningitis",label:"Buku Meningitis",statusKey:"meningitis"}].map(e=>(0,n.createElement)("div",{key:e.key,className:"border p-3 rounded bg-gray-50"},(0,n.createElement)("div",{className:"flex justify-between items-center mb-2"},(0,n.createElement)("label",{className:"text-sm font-semibold"},e.label),(0,n.createElement)("label",{className:"flex items-center space-x-1 text-xs cursor-pointer"},(0,n.createElement)("input",{type:"checkbox",checked:g.document_status[e.statusKey],onChange:t=>b(a=>({...a,document_status:{...a.document_status,[e.statusKey]:t.target.checked}})),className:"form-checkbox text-green-600 h-4 w-4"}),(0,n.createElement)("span",{className:g.document_status[e.statusKey]?"text-green-600 font-bold":"text-gray-500"},g.document_status[e.statusKey]?"Sudah Ada":"Belum"))),(0,n.createElement)("input",{type:"text",placeholder:"Paste URL File / Upload (Coming Soon)",className:"w-full border p-1 text-sm rounded mb-1",value:g[e.key],onChange:t=>b({...g,[e.key]:t.target.value})}),g[e.key]&&(0,n.createElement)("a",{href:g[e.key],target:"_blank",rel:"noreferrer",className:"text-xs text-blue-600 hover:underline flex items-center"},"ðŸ‘ Lihat Preview")))),(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"label"},"Status Perlengkapan (Koper/Batik)"),(0,n.createElement)("select",{className:"input-field w-full border p-2 rounded",value:g.kit_status,onChange:e=>b({...g,kit_status:e.target.value})},(0,n.createElement)("option",{value:"pending"},"Belum Dikirim"),(0,n.createElement)("option",{value:"sent"},"Sudah Dikirim"),(0,n.createElement)("option",{value:"received"},"Sudah Diterima Jamaah"))),(0,n.createElement)("div",{className:"pt-6 flex flex-col space-y-2"},(0,n.createElement)("button",{type:"submit",className:"w-full py-3 bg-blue-600 text-white font-bold rounded hover:bg-blue-700 shadow-lg"},e?"Simpan Perubahan":"Daftarkan Jamaah"),(0,n.createElement)("button",{type:"button",onClick:a,className:"w-full py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300"},"Batal")))))},M=()=>{const{getJamaahList:e,deleteJamaah:t,getPackages:a,loading:r}=x(),[s,c]=(0,n.useState)([]),[m,i]=(0,n.useState)([]),[o,d]=(0,n.useState)({search:"",package_id:"",payment_status:"",month:""}),[u,p]=(0,n.useState)(!1),[g,b]=(0,n.useState)(null);(0,n.useEffect)(()=>{y()},[]),(0,n.useEffect)(()=>{const e=setTimeout(()=>{E()},500);return()=>clearTimeout(e)},[o]);const y=async()=>{try{const e=await a({status:"active"});i(e||[]),E()}catch(e){console.error(e)}},E=async()=>{try{const t=await e(o);c(t||[])}catch(e){console.error(e)}},h=()=>{p(!1),b(null),E()};return(0,n.createElement)("div",{className:"p-6"},(0,n.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,n.createElement)("h1",{className:"text-2xl font-bold text-gray-800"},"Data Jamaah"),(0,n.createElement)("button",{onClick:()=>p(!0),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition shadow"},"+ Input Jamaah Baru")),(0,n.createElement)("div",{className:"bg-white p-4 rounded shadow mb-6 grid grid-cols-1 md:grid-cols-4 gap-4"},(0,n.createElement)("input",{type:"text",placeholder:"Cari Nama / No Paspor...",className:"border p-2 rounded w-full",value:o.search,onChange:e=>d({...o,search:e.target.value})}),(0,n.createElement)("select",{className:"border p-2 rounded w-full",value:o.package_id,onChange:e=>d({...o,package_id:e.target.value})},(0,n.createElement)("option",{value:""},"Semua Paket"),m.map(e=>(0,n.createElement)("option",{key:e.id,value:e.id},e.name))),(0,n.createElement)("select",{className:"border p-2 rounded w-full",value:o.payment_status,onChange:e=>d({...o,payment_status:e.target.value})},(0,n.createElement)("option",{value:""},"Status Pembayaran"),(0,n.createElement)("option",{value:"lunas"},"Lunas"),(0,n.createElement)("option",{value:"partial"},"Belum Lunas (Partial)"),(0,n.createElement)("option",{value:"unpaid"},"Belum Bayar")),(0,n.createElement)("input",{type:"month",className:"border p-2 rounded w-full",value:o.month,onChange:e=>d({...o,month:e.target.value})})),r&&0===s.length?(0,n.createElement)(l.default,null):(0,n.createElement)("div",{className:"bg-white rounded-lg shadow overflow-x-auto"},(0,n.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,n.createElement)("thead",{className:"bg-gray-50"},(0,n.createElement)("tr",null,(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nama / Umur"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Paket / Keberangkatan"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status Dokumen"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Pembayaran"),(0,n.createElement)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Aksi"))),(0,n.createElement)("tbody",{className:"divide-y divide-gray-200"},0===s.length?(0,n.createElement)("tr",null,(0,n.createElement)("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500"},"Tidak ada data jamaah.")):s.map(e=>{return(0,n.createElement)("tr",{key:e.id,className:"hover:bg-gray-50"},(0,n.createElement)("td",{className:"px-6 py-4"},(0,n.createElement)("div",{className:"text-sm font-medium text-gray-900"},e.full_name),(0,n.createElement)("div",{className:"text-xs text-gray-500"},"L"===e.gender?"Laki-laki":"Perempuan"," â€¢ ",e.age," Tahun"),(0,n.createElement)("div",{className:"text-xs text-blue-500 mt-1"},e.phone_number)),(0,n.createElement)("td",{className:"px-6 py-4"},(0,n.createElement)("div",{className:"text-sm text-gray-900 font-semibold"},e.package_name),(0,n.createElement)("div",{className:"text-xs text-gray-500"},"Kamar: ",e.selected_room_type),(0,n.createElement)("div",{className:"text-xs text-gray-500"},"PIC: ",e.pic_name||"-")),(0,n.createElement)("td",{className:"px-6 py-4"},(0,n.createElement)("div",{className:"flex space-x-1"},(0,n.createElement)("span",{title:"KTP",className:"w-3 h-3 rounded-full "+(e.document_status?.ktp?"bg-green-500":"bg-gray-300")}),(0,n.createElement)("span",{title:"KK",className:"w-3 h-3 rounded-full "+(e.document_status?.kk?"bg-green-500":"bg-gray-300")}),(0,n.createElement)("span",{title:"Paspor",className:"w-3 h-3 rounded-full "+(e.document_status?.passport?"bg-green-500":"bg-gray-300")}),(0,n.createElement)("span",{title:"Meningitis",className:"w-3 h-3 rounded-full "+(e.document_status?.meningitis?"bg-green-500":"bg-gray-300")})),(0,n.createElement)("div",{className:"text-xs text-gray-500 mt-1"},"Kit: ",(0,n.createElement)("span",{className:"capitalize font-bold "+("sent"===e.kit_status?"text-green-600":"text-yellow-600")},e.kit_status))),(0,n.createElement)("td",{className:"px-6 py-4"},(0,n.createElement)("div",{className:"text-xs inline-flex px-2 py-1 rounded-full font-bold "+("lunas"===e.payment_status?"bg-green-100 text-green-800":"partial"===e.payment_status?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800")},"lunas"===e.payment_status?"LUNAS":"partial"===e.payment_status?"CICILAN":"BELUM BAYAR"),e.remaining_payment>0&&(0,n.createElement)("div",{className:"text-xs text-red-500 mt-1"},"Sisa: ",(a=e.remaining_payment,new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(a)))),(0,n.createElement)("td",{className:"px-6 py-4 text-right text-sm font-medium space-x-2"},(0,n.createElement)("button",{onClick:()=>(b(e),void p(!0)),className:"text-blue-600 hover:text-blue-900"},"Edit"),(0,n.createElement)("button",{onClick:()=>(async e=>{if(confirm("Yakin hapus data jamaah ini?"))try{await t(e),E()}catch(e){alert(e.message)}})(e.id),className:"text-red-600 hover:text-red-900"},"Hapus")));var a})))),u&&(0,n.createElement)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4 overflow-y-auto"},(0,n.createElement)("div",{className:"bg-white rounded-lg w-full max-w-5xl max-h-full overflow-y-auto my-8"},(0,n.createElement)("div",{className:"p-6"},(0,n.createElement)(K,{initialData:g,onSuccess:h,onCancel:h})))))},L=({initialData:e,onSuccess:t,onCancel:a})=>{const{createPackage:r,updatePackage:s,getMasterData:c,getCategories:m}=x(),[i,o]=(0,n.useState)(!0),[d,u]=(0,n.useState)([]),[p,g]=(0,n.useState)([]),[b,y]=(0,n.useState)([]),[E,h]=(0,n.useState)({name:"",category_id:"",sub_category_id:"",departure_date:"",airline_id:"",status:"active",itinerary_file:"",hotels:[],pricing_variants:[{type:"Quad",price:0,currency:"IDR"},{type:"Triple",price:0,currency:"IDR"},{type:"Double",price:0,currency:"IDR"}]});(0,n.useEffect)(()=>{(async()=>{try{const[t,a,l]=await Promise.all([c("airline"),c("hotel"),m()]);u(t||[]),g(a||[]),y(l||[]),e&&h({...e,hotels:e.hotels||[],pricing_variants:e.pricing_variants||[]})}catch(e){console.error(e)}finally{o(!1)}})()},[e]);const f=e=>{const{name:t,value:a}=e.target;h(e=>({...e,[t]:a}))},v=(e,t,a)=>{const l=[...E.pricing_variants];l[e][t]=a,h(e=>({...e,pricing_variants:l}))},N=b.filter(e=>0==e.parent_id),w=b.filter(e=>e.parent_id==E.category_id);return i?(0,n.createElement)(l.default,{text:"Memuat Data Master..."}):(0,n.createElement)("form",{onSubmit:async a=>{a.preventDefault();try{e?.id?await s(e.id,E):await r(E),t()}catch(e){alert("Gagal menyimpan: "+e.message)}},className:"space-y-6 bg-white p-6 rounded shadow max-h-[80vh] overflow-y-auto"},(0,n.createElement)("h2",{className:"text-xl font-bold border-b pb-2 mb-4"},e?"Edit Paket":"Buat Paket Baru"),(0,n.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},(0,n.createElement)("div",{className:"space-y-4"},(0,n.createElement)("h3",{className:"font-semibold text-gray-700"},"Informasi Dasar"),(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"label"},"Nama Paket"),(0,n.createElement)("input",{type:"text",name:"name",className:"input-field w-full border p-2 rounded",value:E.name,onChange:f,required:!0})),(0,n.createElement)("div",{className:"grid grid-cols-2 gap-2"},(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"label"},"Kategori"),(0,n.createElement)("select",{name:"category_id",className:"input-field w-full border p-2 rounded",value:E.category_id,onChange:f,required:!0},(0,n.createElement)("option",{value:""},"Pilih Kategori"),N.map(e=>(0,n.createElement)("option",{key:e.id,value:e.id},e.name)))),(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"label"},"Sub Kategori"),(0,n.createElement)("select",{name:"sub_category_id",className:"input-field w-full border p-2 rounded",value:E.sub_category_id,onChange:f},(0,n.createElement)("option",{value:""},"Pilih Sub (Opsional)"),w.map(e=>(0,n.createElement)("option",{key:e.id,value:e.id},e.name))))),(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"label"},"Tanggal Keberangkatan"),(0,n.createElement)("input",{type:"date",name:"departure_date",className:"input-field w-full border p-2 rounded",value:E.departure_date,onChange:f,required:!0})),(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"label"},"Maskapai"),(0,n.createElement)("select",{name:"airline_id",className:"input-field w-full border p-2 rounded",value:E.airline_id,onChange:f,required:!0},(0,n.createElement)("option",{value:""},"Pilih Maskapai"),d.map(e=>(0,n.createElement)("option",{key:e.id,value:e.id},e.name)))),(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"label"},"Status"),(0,n.createElement)("select",{name:"status",className:"input-field w-full border p-2 rounded",value:E.status,onChange:f},(0,n.createElement)("option",{value:"active"},"Aktif (Buka Pendaftaran)"),(0,n.createElement)("option",{value:"full"},"Penuh"),(0,n.createElement)("option",{value:"completed"},"Selesai"),(0,n.createElement)("option",{value:"cancelled"},"Dibatalkan"))),(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"label"},"Link Itinerary (URL PDF/File)"),(0,n.createElement)("input",{type:"url",name:"itinerary_file",placeholder:"https://...",className:"input-field w-full border p-2 rounded",value:E.itinerary_file,onChange:f}))),(0,n.createElement)("div",{className:"space-y-4 border-l pl-6"},(0,n.createElement)("h3",{className:"font-semibold text-gray-700"},"Hotel & Harga"),(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"label mb-1 block"},"Pilih Hotel (Bisa Lebih dari 1)"),(0,n.createElement)("div",{className:"max-h-32 overflow-y-auto border rounded p-2 grid grid-cols-1 gap-1"},0===p.length&&(0,n.createElement)("p",{className:"text-xs text-gray-500"},"Belum ada data hotel"),p.map(e=>(0,n.createElement)("label",{key:e.id,className:"flex items-center space-x-2 text-sm cursor-pointer hover:bg-gray-50 p-1 rounded"},(0,n.createElement)("input",{type:"checkbox",checked:E.hotels.includes(parseInt(e.id)),onChange:()=>(e=>{const t=E.hotels,a=parseInt(e);t.includes(a)?h(e=>({...e,hotels:t.filter(e=>e!==a)})):h(e=>({...e,hotels:[...t,a]}))})(e.id),className:"rounded text-blue-600"}),(0,n.createElement)("span",null,e.name))))),(0,n.createElement)("div",null,(0,n.createElement)("div",{className:"flex justify-between items-center mb-2"},(0,n.createElement)("label",{className:"label"},"Varian Harga (Kamar)"),(0,n.createElement)("button",{type:"button",onClick:()=>{h(e=>({...e,pricing_variants:[...e.pricing_variants,{type:"",price:0,currency:"IDR"}]}))},className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200"},"+ Tambah")),(0,n.createElement)("div",{className:"space-y-2"},E.pricing_variants.map((e,t)=>(0,n.createElement)("div",{key:t,className:"flex space-x-2 items-center"},(0,n.createElement)("input",{type:"text",placeholder:"Tipe (Quad/Double)",className:"w-1/3 border p-1 text-sm rounded",value:e.type,onChange:e=>v(t,"type",e.target.value),list:"roomTypes"}),(0,n.createElement)("input",{type:"number",placeholder:"Harga",className:"w-1/3 border p-1 text-sm rounded",value:e.price,onChange:e=>v(t,"price",e.target.value)}),(0,n.createElement)("select",{className:"w-20 border p-1 text-sm rounded",value:e.currency,onChange:e=>v(t,"currency",e.target.value)},(0,n.createElement)("option",{value:"IDR"},"IDR"),(0,n.createElement)("option",{value:"USD"},"USD")),(0,n.createElement)("button",{type:"button",onClick:()=>(e=>{const t=E.pricing_variants.filter((t,a)=>a!==e);h(e=>({...e,pricing_variants:t}))})(t),className:"text-red-500 hover:bg-red-50 p-1 rounded"},"Ã—")))),(0,n.createElement)("datalist",{id:"roomTypes"},(0,n.createElement)("option",{value:"Quad"}),(0,n.createElement)("option",{value:"Quint"}),(0,n.createElement)("option",{value:"Triple"}),(0,n.createElement)("option",{value:"Double"})),(0,n.createElement)("p",{className:"text-xs text-gray-500 mt-1"},"Pastikan nama tipe kamar unik (misal: Quad, Quint).")))),(0,n.createElement)("div",{className:"flex justify-end border-t pt-4 space-x-3"},(0,n.createElement)("button",{type:"button",onClick:a,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300"},"Batal"),(0,n.createElement)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"},"Simpan Paket")))},B=()=>{const{getPackages:e,deletePackage:t,loading:a}=x(),[r,s]=(0,n.useState)([]),[c,m]=(0,n.useState)(!1),[i,o]=(0,n.useState)(null);(0,n.useEffect)(()=>{d()},[]);const d=async()=>{try{const t=await e();s(t||[])}catch(e){console.error(e)}},u=()=>{m(!1),o(null)};return(0,n.createElement)("div",{className:"p-6"},(0,n.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,n.createElement)("h1",{className:"text-2xl font-bold text-gray-800"},"Manajemen Paket Umroh"),(0,n.createElement)("button",{onClick:()=>m(!0),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition shadow"},"+ Buat Paket Baru")),a?(0,n.createElement)(l.default,null):(0,n.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},0===r.length&&(0,n.createElement)("p",{className:"col-span-3 text-center text-gray-500 py-10"},"Belum ada paket dibuat."),r.map(e=>(0,n.createElement)("div",{key:e.id,className:"bg-white rounded-lg shadow hover:shadow-lg transition border border-gray-100 overflow-hidden"},(0,n.createElement)("div",{className:"bg-blue-50 p-4 border-b border-blue-100 flex justify-between items-start"},(0,n.createElement)("div",null,(0,n.createElement)("span",{className:"text-xs font-bold uppercase text-blue-600 tracking-wide"},e.category_name||"Umroh"),(0,n.createElement)("h3",{className:"text-lg font-bold text-gray-800 mt-1"},e.name)),(0,n.createElement)("span",{className:"px-2 py-1 rounded text-xs font-bold "+("active"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600")},"active"===e.status?"Open":e.status)),(0,n.createElement)("div",{className:"p-4 space-y-3"},(0,n.createElement)("div",{className:"flex items-center text-sm text-gray-600"},(0,n.createElement)("span",{className:"w-6 text-center mr-2"},"âœˆï¸"),(0,n.createElement)("span",null,e.departure_date," (Maskapai ID: ",e.airline_id,")")),(0,n.createElement)("div",{className:"flex items-center text-sm text-gray-600"},(0,n.createElement)("span",{className:"w-6 text-center mr-2"},"ðŸ¨"),(0,n.createElement)("span",null,Array.isArray(e.hotels)?e.hotels.length:0," Hotel Terpilih")),(0,n.createElement)("div",{className:"flex items-center text-sm text-gray-600"},(0,n.createElement)("span",{className:"w-6 text-center mr-2"},"ðŸ’°"),(0,n.createElement)("span",null,"Mulai ",(e=>{if(!e||0===e.length)return"-";const t=e.map(e=>parseFloat(e.price)),a=Math.min(...t);return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(a)})(e.pricing_variants)))),(0,n.createElement)("div",{className:"bg-gray-50 p-3 flex justify-between border-t"},(0,n.createElement)("button",{onClick:()=>(e=>{o(e),m(!0)})(e),className:"text-blue-600 hover:text-blue-800 text-sm font-medium"},"Edit Detail"),(0,n.createElement)("button",{onClick:()=>(async e=>{if(confirm("Hapus paket ini? Data jamaah terkait mungkin akan error."))try{await t(e),d()}catch(e){alert("Gagal hapus: "+e.message)}})(e.id),className:"text-red-600 hover:text-red-800 text-sm font-medium"},"Hapus"))))),c&&(0,n.createElement)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4"},(0,n.createElement)("div",{className:"w-full max-w-4xl"},(0,n.createElement)(L,{initialData:i,onSuccess:()=>{u(),d()},onCancel:u}))))},I=()=>{const{agents:e,createAgent:t}=x(),[a,l]=(0,n.useState)(!1),[r,s]=(0,n.useState)({name:"",phone:"",email:"",province:"",city:"",district:"",village:"",address_full:"",join_date:""});return(0,n.createElement)("div",{className:"space-y-6"},(0,n.createElement)("div",{className:"flex justify-between"},(0,n.createElement)("h2",{className:"text-2xl font-bold text-gray-800"},"Sub Agen"),(0,n.createElement)(_,{onClick:()=>l(!0)},"Tambah Agen")),(0,n.createElement)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg"},(0,n.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,n.createElement)("thead",{className:"bg-gray-50"},(0,n.createElement)("tr",null,(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs uppercase font-medium text-gray-500"},"Nama"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs uppercase font-medium text-gray-500"},"Kota"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs uppercase font-medium text-gray-500"},"Bergabung"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs uppercase font-medium text-gray-500"},"Aksi"))),(0,n.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},e?.map(e=>(0,n.createElement)("tr",{key:e.id},(0,n.createElement)("td",{className:"px-6 py-4 font-medium text-gray-900"},e.name),(0,n.createElement)("td",{className:"px-6 py-4 text-gray-500"},e.city,", ",e.province),(0,n.createElement)("td",{className:"px-6 py-4 text-gray-500"},e.join_date),(0,n.createElement)("td",{className:"px-6 py-4 text-blue-600 cursor-pointer"},"Detail")))))),(0,n.createElement)(D,{isOpen:a,onClose:()=>l(!1),title:"Tambah Sub Agen"},(0,n.createElement)("div",{className:"space-y-4"},(0,n.createElement)(C,{label:"Nama Agen",value:r.name,onChange:e=>s({...r,name:e.target.value})}),(0,n.createElement)("div",{className:"grid grid-cols-2 gap-4"},(0,n.createElement)(C,{label:"No HP",value:r.phone,onChange:e=>s({...r,phone:e.target.value})}),(0,n.createElement)(C,{label:"Email",value:r.email,onChange:e=>s({...r,email:e.target.value})})),(0,n.createElement)("div",{className:"grid grid-cols-2 gap-4"},(0,n.createElement)(C,{label:"Provinsi",value:r.province,onChange:e=>s({...r,province:e.target.value})}),(0,n.createElement)(C,{label:"Kab/Kota",value:r.city,onChange:e=>s({...r,city:e.target.value})})),(0,n.createElement)("div",{className:"grid grid-cols-2 gap-4"},(0,n.createElement)(C,{label:"Kecamatan",value:r.district,onChange:e=>s({...r,district:e.target.value})}),(0,n.createElement)(C,{label:"Desa/Kel",value:r.village,onChange:e=>s({...r,village:e.target.value})})),(0,n.createElement)(S,{label:"Alamat Lengkap",value:r.address_full,onChange:e=>s({...r,address_full:e.target.value})}),(0,n.createElement)(C,{type:"date",label:"Tanggal Bergabung",value:r.join_date,onChange:e=>s({...r,join_date:e.target.value})}),(0,n.createElement)("div",{className:"flex justify-end mt-4"},(0,n.createElement)(_,{onClick:()=>{t(r),l(!1)}},"Simpan Agen")))))},A=()=>{const{getMasterData:e,createMasterData:t,deleteMasterData:a,getCategories:s,createCategory:c,deleteCategory:m,loading:i}=x(),[o,d]=(0,n.useState)("airline"),[u,p]=(0,n.useState)([]),[g,b]=(0,n.useState)(!1),[y,E]=(0,n.useState)({name:"",parent_id:0,details:""});(0,n.useEffect)(()=>{h()},[o]);const h=async()=>{try{let t;t="category"===o?await s():await e(o),p(t||[])}catch(e){console.error("Gagal ambil data",e)}},f="category"===o?u.filter(e=>0==e.parent_id):[];return(0,n.createElement)("div",{className:"p-6"},(0,n.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,n.createElement)("h1",{className:"text-2xl font-bold text-gray-800"},"Data Master"),(0,n.createElement)("button",{onClick:()=>b(!0),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition"},"+ Tambah Data")),(0,n.createElement)("div",{className:"flex space-x-4 border-b mb-6"},["airline","hotel","category"].map(e=>(0,n.createElement)("button",{key:e,onClick:()=>d(e),className:"pb-2 px-4 font-medium capitalize "+(o===e?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700")},"airline"===e?"Maskapai":"hotel"===e?"Hotel":"Kategori Paket"))),i?(0,n.createElement)(l.default,null):(0,n.createElement)("div",{className:"bg-white rounded-lg shadow overflow-hidden"},(0,n.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,n.createElement)("thead",{className:"bg-gray-50"},(0,n.createElement)("tr",null,(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Nama"),"category"===o&&(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Induk (Parent)"),"category"!==o&&(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Detail"),(0,n.createElement)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase"},"Aksi"))),(0,n.createElement)("tbody",{className:"divide-y divide-gray-200"},0===u.length?(0,n.createElement)("tr",null,(0,n.createElement)("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-500"},"Belum ada data")):u.map(e=>(0,n.createElement)("tr",{key:e.id},(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},e.name),"category"===o&&(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},0!=e.parent_id?u.find(t=>t.id==e.parent_id)?.name||"-":(0,n.createElement)("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full"},"Utama")),"category"!==o&&(0,n.createElement)("td",{className:"px-6 py-4 text-sm text-gray-500 truncate max-w-xs"},"object"==typeof e.details?JSON.stringify(e.details):e.details||"-"),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},(0,n.createElement)("button",{onClick:()=>(async e=>{if(confirm("Yakin hapus data ini?"))try{"category"===o?await m(e):await a(e),h()}catch(e){alert(e.message)}})(e.id),className:"text-red-600 hover:text-red-900"},"Hapus"))))))),(0,n.createElement)(r.default,{isOpen:g,onClose:()=>b(!1),title:`Tambah ${o}`},(0,n.createElement)("form",{onSubmit:async e=>{e.preventDefault();try{"category"===o?await c({name:y.name,parent_id:y.parent_id}):await t({name:y.name,type:o,details:y.details}),b(!1),E({name:"",parent_id:0,details:""}),h()}catch(e){alert(e.message)}},className:"space-y-4"},(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"block text-sm font-medium text-gray-700"},"Nama"),(0,n.createElement)("input",{type:"text",required:!0,value:y.name,onChange:e=>E({...y,name:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-blue-500 focus:border-blue-500"})),"category"===o&&(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"block text-sm font-medium text-gray-700"},"Kategori Induk (Opsional)"),(0,n.createElement)("select",{value:y.parent_id,onChange:e=>E({...y,parent_id:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"},(0,n.createElement)("option",{value:"0"},"-- Tidak Ada (Kategori Utama) --"),f.map(e=>(0,n.createElement)("option",{key:e.id,value:e.id},e.name))),(0,n.createElement)("p",{className:"text-xs text-gray-500 mt-1"},"Pilih jika ini adalah Sub-Kategori (misal: Awal Tahun)")),"category"!==o&&(0,n.createElement)("div",null,(0,n.createElement)("label",{className:"block text-sm font-medium text-gray-700"},"Detail Tambahan"),(0,n.createElement)("textarea",{value:y.details,onChange:e=>E({...y,details:e.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",rows:"3",placeholder:"Contoh: Lokasi hotel, Bintang 5, atau kode maskapai"})),(0,n.createElement)("div",{className:"flex justify-end pt-4"},(0,n.createElement)("button",{type:"button",onClick:()=>b(!1),className:"mr-2 px-4 py-2 text-gray-700 bg-gray-100 rounded hover:bg-gray-200"},"Batal"),(0,n.createElement)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"},"Simpan")))))};var z={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},U=n.createContext&&n.createContext(z),H=["attr","size","title"];function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},R.apply(this,arguments)}function J(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,l)}return a}function $(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?J(Object(a),!0).forEach(function(t){var l,r,n,s;l=e,r=t,n=a[t],(r="symbol"==typeof(s=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r))?s:s+"")in l?Object.defineProperty(l,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[r]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function F(e){return e&&e.map((e,t)=>n.createElement(e.tag,$({key:t},e.attr),F(e.child)))}function G(e){return t=>n.createElement(V,R({attr:$({},e.attr)},t),F(e.child))}function V(e){var t=t=>{var a,{attr:l,size:r,title:s}=e,c=function(e,t){if(null==e)return{};var a,l,r=function(e,t){if(null==e)return{};var a={};for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){if(t.indexOf(l)>=0)continue;a[l]=e[l]}return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(l=0;l<n.length;l++)a=n[l],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,H),m=r||t.size||"1em";return t.className&&(a=t.className),e.className&&(a=(a?a+" ":"")+e.className),n.createElement("svg",R({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,c,{className:a,style:$($({color:e.color||t.color},t.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),s&&n.createElement("title",null,s),e.children)};return void 0!==U?n.createElement(U.Consumer,null,e=>t(e)):t(z)}function q(e){return G({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"},child:[]}]})(e)}function W(e){return G({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M576 240c0-23.63-12.95-44.04-32-55.12V32.01C544 23.26 537.02 0 512 0c-7.12 0-14.19 2.38-19.98 7.02l-85.03 68.03C364.28 109.19 310.66 128 256 128H64c-35.35 0-64 28.65-64 64v96c0 35.35 28.65 64 64 64h33.7c-1.39 10.48-2.18 21.14-2.18 32 0 39.77 9.26 77.35 25.56 110.94 5.19 10.69 16.52 17.06 28.4 17.06h74.28c26.05 0 41.69-29.84 25.9-50.56-16.4-21.52-26.15-48.36-26.15-77.44 0-11.11 1.62-21.79 4.41-32H256c54.66 0 108.28 18.81 150.98 52.95l85.03 68.03a32.023 32.023 0 0 0 19.98 7.02c24.92 0 32-22.78 32-32V295.13C563.05 284.04 576 263.63 576 240zm-96 141.42l-33.05-26.44C392.95 311.78 325.12 288 256 288v-96c69.12 0 136.95-23.78 190.95-66.98L480 98.58v282.84z"},child:[]}]})(e)}function Q(e){return G({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 73.143v45.714C448 159.143 347.667 192 224 192S0 159.143 0 118.857V73.143C0 32.857 100.333 0 224 0s224 32.857 224 73.143zM448 176v102.857C448 319.143 347.667 352 224 352S0 319.143 0 278.857V176c48.125 33.143 136.208 48.572 224 48.572S399.874 209.143 448 176zm0 160v102.857C448 479.143 347.667 512 224 512S0 479.143 0 438.857V336c48.125 33.143 136.208 48.572 224 48.572S399.874 369.143 448 336z"},child:[]}]})(e)}function Y(e){return G({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(e)}function Z(e){return G({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M608 64H32C14.33 64 0 78.33 0 96v320c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V96c0-17.67-14.33-32-32-32zM48 400v-64c35.35 0 64 28.65 64 64H48zm0-224v-64h64c0 35.35-28.65 64-64 64zm272 176c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 48h-64c0-35.35 28.65-64 64-64v64zm0-224c-35.35 0-64-28.65-64-64h64v64z"},child:[]}]})(e)}function X(e){return G({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm95.8 32.6L272 480l-32-136 32-56h-96l32 56-32 136-47.8-191.4C56.9 292 0 350.3 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-72.1-56.9-130.4-128.2-133.8z"},child:[]}]})(e)}function ee(e){return G({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}const te=()=>{const{currentUser:e}=(0,n.useContext)(u),[t,a]=(0,n.useState)("dashboard"),l=[{id:"dashboard",label:"Dashboard",icon:(0,n.createElement)(Y,null),roles:["owner","admin","finance","marketing"]},{id:"packages",label:"Paket Umroh",icon:(0,n.createElement)(q,null),roles:["owner","admin","marketing"]},{id:"jamaah",label:"Data Jemaah",icon:(0,n.createElement)(ee,null),roles:["owner","admin","marketing","finance"]},{id:"finance",label:"Keuangan",icon:(0,n.createElement)(Z,null),roles:["owner","admin","finance"]},{id:"marketing",label:"Marketing Leads",icon:(0,n.createElement)(W,null),roles:["owner","admin","marketing"]},{id:"sub_agents",label:"Sub Agen",icon:(0,n.createElement)(X,null),roles:["owner","admin","marketing"]},{id:"hr",label:"Manajemen HR",icon:(0,n.createElement)(ee,null),roles:["owner","admin"]},{id:"master",label:"Data Master",icon:(0,n.createElement)(Q,null),roles:["owner","admin"]}];return(0,n.createElement)("div",{className:"flex h-screen bg-gray-100"},(0,n.createElement)("aside",{className:"w-64 bg-white shadow-md z-10"},(0,n.createElement)("div",{className:"p-6"},(0,n.createElement)("h1",{className:"text-2xl font-bold text-blue-600"},"UmrohMgr"),(0,n.createElement)("p",{className:"text-sm text-gray-500"},"Halo, ",e?.name)),(0,n.createElement)("nav",{className:"mt-4"},l.map(l=>l.roles.includes(e?.role||"staff")&&(0,n.createElement)("button",{key:l.id,onClick:()=>a(l.id),className:"w-full flex items-center px-6 py-3 text-left hover:bg-blue-50 transition-colors "+(t===l.id?"bg-blue-100 text-blue-600 border-r-4 border-blue-600":"text-gray-600")},(0,n.createElement)("span",{className:"mr-3"},l.icon),l.label)))),(0,n.createElement)("main",{className:"flex-1 overflow-y-auto p-8"},"dashboard"===t&&(0,n.createElement)(y,null),"packages"===t&&(0,n.createElement)(B,null),"jamaah"===t&&(0,n.createElement)(M,null),"finance"===t&&(0,n.createElement)(j,null),"marketing"===t&&(0,n.createElement)(T,null),"sub_agents"===t&&(0,n.createElement)(I,null),"hr"===t&&(0,n.createElement)(O,null),"master"===t&&(0,n.createElement)(A,null)))},ae=()=>(0,n.createElement)(p,null,(0,n.createElement)(b,null,(0,n.createElement)(te,null))),le=document.getElementById("umh-admin-app");le?(0,c.H)(le).render((0,n.createElement)(s().StrictMode,null,(0,n.createElement)(p,null,(0,n.createElement)(b,null,(0,n.createElement)(ae,null))))):console.error("Target element #umh-admin-app not found.")})();