(()=>{"use strict";var e={338:(e,t,a)=>{var n=a(795);t.H=n.createRoot,n.hydrateRoot},795:e=>{e.exports=window.ReactDOM}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var l=t[n]={exports:{}};return e[n](l,l.exports,a),l.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const n=window.React;var r=a.n(n),l=a(338);const i=(0,n.createContext)(null),s=({children:e})=>{const[t,a]=(0,n.useState)(null),[r,l]=(0,n.useState)(null),[s,m]=(0,n.useState)(!0);(0,n.useEffect)(()=>{"undefined"!=typeof umh_wp_data&&umh_wp_data.current_user?(a(umh_wp_data.current_user),l({url:umh_wp_data.api_url,nonce:umh_wp_data.api_nonce,isWpAdmin:umh_wp_data.is_wp_admin})):console.warn("UMH: Data pengguna tidak ditemukan. (umh_wp_data)"),m(!1)},[]);const c=()=>{console.log("Logout triggered");const e=document.querySelector('a[href*="logout"]');e?window.location.href=e.href:console.warn("Logout link not found.")},o=(0,n.useMemo)(()=>({currentUser:t,apiConfig:r,isLoading:s,logout:c}),[t,r,s]);return(0,n.createElement)(i.Provider,{value:o},e)},m=()=>(0,n.useContext)(i),c=(0,n.createContext)(null),o=({children:e})=>{const{apiConfig:t}=m(),[a,r]=(0,n.useState)({packages:[],jamaah:[],users:[],finance:[],tasks:[],hotels:[],flights:[],leads:[],financeAccounts:[],logs:[]}),[l,i]=(0,n.useState)({totals:{},packages:[],financeChart:[]}),[s,o]=(0,n.useState)(!0),[d,p]=(0,n.useState)(null),[u,g]=(0,n.useState)([]),[y,x]=(0,n.useState)(!1),[h,E]=(0,n.useState)(!0),[f,k]=(0,n.useState)(!0),w=(0,n.useCallback)(()=>{const e={"Content-Type":"application/json"};return t&&t.isWpAdmin&&(e["X-WP-Nonce"]=t.nonce),e},[t]),b=(0,n.useCallback)(async(e,a="GET",n=null)=>{if(!t)throw new Error("API config not ready.");const r=`${t.url}${e}`,l={method:a,headers:w()};n&&(l.body=JSON.stringify(n));try{const e=await fetch(r,l);if(!e.ok){let t;try{t=await e.json()}catch(a){t={message:`Error ${e.status}: ${e.statusText}`}}throw new Error(t.message||`Error ${e.status}`)}return 204===e.status||"0"===e.headers.get("content-length")?null:await e.json()}catch(t){throw console.error(`API Error (${a} ${e}):`,t),p(t.message),t}},[t,w]),v=(0,n.useCallback)(async(e,t)=>{try{const a=await b(e);return r(e=>({...e,[t]:Array.isArray(a)?a:[]})),a}catch(a){console.warn(`Gagal memuat ${e}:`,a.message),p(`Gagal memuat ${e}.`),r(e=>({...e,[t]:[]}))}},[b]),_=(0,n.useCallback)(async()=>{if(!t)return;o(!0),p(null);const e=[{ep:"packages",key:"packages"},{ep:"jamaah",key:"jamaah"},{ep:"users",key:"users"},{ep:"finance",key:"finance"},{ep:"tasks",key:"tasks"},{ep:"hotels",key:"hotels"},{ep:"flights",key:"flights"},{ep:"marketing/leads",key:"leads"},{ep:"finance/accounts",key:"financeAccounts"}];try{await Promise.all(e.map(e=>v(e.ep,e.key)))}catch(e){}finally{o(!1)}},[t,v]),N=(0,n.useCallback)(async()=>{if(t){E(!0);try{const[e,t,a]=await Promise.all([b("stats/totals").catch(()=>({})),b("stats/packages").catch(()=>[]),b("stats/finance-chart").catch(()=>[])]);i({totals:e,packages:t,financeChart:a})}catch(e){console.error("Gagal memuat statistik:",e),p("Gagal memuat statistik dashboard.")}finally{E(!1)}}},[t,b]),C=(0,n.useCallback)(async()=>{if(t){k(!0);try{await v("logs","logs")}catch(e){}finally{k(!1)}}},[t,v]);(0,n.useEffect)(()=>{t&&(_(),N())},[t,_,N]);const S=(0,n.useCallback)(async(e,t,a)=>{const n=await b(e,"POST",t);return n&&n.id?r(e=>({...e,[a]:[...e[a],n]})):await v(e,a),n},[b,v]),z=(0,n.useCallback)(async(e,t,a,n)=>{const l=await b(`${e}/${t}`,"PUT",a);return l&&l.id?r(e=>({...e,[n]:e[n].map(e=>e.id===l.id?l:e)})):await v(e,n),l},[b,v]),j=(0,n.useCallback)(async(e,t,a)=>{await b(`${e}/${t}`,"DELETE"),r(e=>({...e,[a]:e[a].filter(e=>e.id!==t)}))},[b]),P=e=>e.id?z("packages",e.id,e,"packages"):S("packages",e,"packages"),T=e=>j("packages",e,"packages"),F=e=>e.id?z("jamaah",e.id,e,"jamaah"):S("jamaah",e,"jamaah"),D=e=>j("jamaah",e,"jamaah"),A=e=>e.id?z("finance",e.id,e,"finance"):S("finance",e,"finance"),q=e=>j("finance",e,"finance"),M=e=>e.id?z("finance/accounts",e.id,e,"financeAccounts"):S("finance/accounts",e,"financeAccounts"),L=e=>j("finance/accounts",e,"financeAccounts"),$=e=>e.id?z("users",e.id,e,"users"):S("users",e,"users"),J=e=>j("users",e,"users"),O=e=>e.id?z("marketing/leads",e.id,e,"leads"):S("marketing/leads",e,"leads"),H=e=>j("marketing/leads",e,"leads"),K=(0,n.useCallback)(async e=>{if(e){x(!0);try{const t=await b(`jamaah/${e}/payments`);g(Array.isArray(t)?t:[])}catch(e){p("Gagal memuat riwayat pembayaran.")}finally{x(!1)}}else g([])},[b]),B=(0,n.useCallback)(async(e,t)=>{let a;a=t.id?await b(`jamaah/payments/${t.id}`,"PUT",t):await b(`jamaah/${e}/payments`,"POST",t),await K(e);const n=await b(`jamaah/${e}`);return r(t=>({...t,jamaah:t.jamaah.map(t=>t.id==e?n:t)})),a},[b,K]),R=(0,n.useCallback)(async(e,t)=>{await b(`jamaah/payments/${t}`,"DELETE"),await K(e);const a=await b(`jamaah/${e}`);r(t=>({...t,jamaah:t.jamaah.map(t=>t.id==e?a:t)}))},[b,K]),I=(0,n.useMemo)(()=>({...a,stats:l,loading:s,loadingStats:h,loadingLogs:f,error:d,fetchData:_,fetchStats:N,fetchLogs:C,savePackage:P,deletePackage:T,saveJamaah:F,deleteJamaah:D,saveFinance:A,deleteFinance:q,saveFinanceAccount:M,deleteFinanceAccount:L,saveUser:$,deleteUser:J,saveLead:O,deleteLead:H,jamaahPayments:u,loadingPayments:y,fetchJamaahPayments:K,saveJamaahPayment:B,deleteJamaahPayment:R}),[a,l,s,h,f,d,_,N,C,P,T,F,D,A,q,M,L,$,J,O,H,u,y,K,B,R]);return(0,n.createElement)(c.Provider,{value:I},e)},d=()=>(0,n.useContext)(c);var p={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const u=(e,t)=>{const a=(0,n.forwardRef)(({color:a="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:s="",children:m,...c},o)=>{return(0,n.createElement)("svg",{ref:o,...p,width:r,height:r,stroke:a,strokeWidth:i?24*Number(l)/Number(r):l,className:["lucide",`lucide-${d=e,d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,s].join(" "),...c},[...t.map(([e,t])=>(0,n.createElement)(e,t)),...Array.isArray(m)?m:[m]]);var d});return a.displayName=`${e}`,a},g=u("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),y=()=>(0,n.createElement)("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg z-50 min-h-[200px]"},(0,n.createElement)(g,{size:32,className:"animate-spin text-blue-600"})),x=()=>(0,n.createElement)("div",{className:"fixed inset-0 bg-white flex items-center justify-center z-[9999]"},(0,n.createElement)(g,{size:48,className:"animate-spin text-blue-600"})),h=({message:e})=>(0,n.createElement)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative my-4",role:"alert"},(0,n.createElement)("strong",{className:"font-bold"},"Error: "),(0,n.createElement)("span",{className:"block sm:inline"},e)),E=(...e)=>e.filter(Boolean).join(" "),f=(0,n.forwardRef)(({className:e,variant:t="primary",size:a="md",children:r,...l},i)=>{const s={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-5 py-2.5 text-base",icon:"p-2"};return(0,n.createElement)("button",{ref:i,className:E("inline-flex items-center justify-center gap-2 font-medium rounded-md shadow-sm transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2","icon"===t?s.icon:s[a],{primary:"bg-blue-600 text-white hover:bg-blue-700 focus-visible:ring-blue-500",secondary:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus-visible:ring-gray-300",danger:"bg-red-600 text-white hover:bg-red-700 focus-visible:ring-red-500",icon:"text-gray-500 hover:text-gray-700 hover:bg-gray-100 p-2 rounded-full focus-visible:ring-gray-300"}[t],e),...l},r)});f.displayName="Button";const k=(0,n.forwardRef)(({className:e,type:t="text",...a},r)=>(0,n.createElement)("input",{type:t,ref:r,className:E("block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm","placeholder-gray-400","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500","disabled:bg-gray-100 disabled:cursor-not-allowed","text-sm",e),...a}));k.displayName="Input";const w=(0,n.forwardRef)(({className:e,children:t,...a},r)=>(0,n.createElement)("select",{ref:r,className:E("block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500","text-sm",e),...a},t));w.displayName="Select";const b=(0,n.forwardRef)(({className:e,...t},a)=>(0,n.createElement)("textarea",{ref:a,className:E("block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm","placeholder-gray-400","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500","text-sm","min-h-[80px]",e),...t}));b.displayName="Textarea";const v=({className:e,children:t})=>(0,n.createElement)("div",{className:E("mb-4",e)},t),_=({htmlFor:e,children:t,className:a})=>(0,n.createElement)("label",{htmlFor:e,className:E("block text-sm font-medium text-gray-700 mb-1",a)},t),N=(0,n.forwardRef)(({className:e,label:t,...a},r)=>(0,n.createElement)("div",{className:"flex items-center gap-2"},(0,n.createElement)("input",{type:"checkbox",ref:r,id:a.id||a.name,className:E("h-4 w-4 text-blue-600 border-gray-300 rounded","focus:ring-blue-500",e),...a}),t&&(0,n.createElement)(_,{htmlFor:a.id||a.name,className:"mb-0"},t)));N.displayName="Checkbox";const C=u("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),S=(...e)=>e.filter(Boolean).join(" "),z=({title:e,isOpen:t,onClose:a,children:r,footer:l,size:i="3xl"})=>t?(0,n.createElement)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center p-4 z-[1000] overflow-y-auto pt-16",onClick:a},(0,n.createElement)("div",{className:S("bg-white rounded-lg shadow-xl w-full m-auto flex flex-col max-h-[90vh]",{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl"}[i]||"max-w-3xl"),onClick:e=>e.stopPropagation()},(0,n.createElement)("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 sticky top-0 bg-white rounded-t-lg z-10"},(0,n.createElement)("h3",{className:"text-xl font-semibold text-gray-800"},e),(0,n.createElement)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600"},(0,n.createElement)(C,{className:"h-6 w-6"}))),(0,n.createElement)("div",{className:"p-6 overflow-y-auto"},r),l&&(0,n.createElement)("div",{className:"flex justify-end gap-3 p-4 border-t border-gray-200 bg-gray-50 rounded-b-lg sticky bottom-0 z-10"},l))):null,j=({onCancel:e,submitText:t="Simpan",children:a})=>(0,n.createElement)(n.Fragment,null,(0,n.createElement)(f,{onClick:e,variant:"secondary"},"Batal"),(0,n.createElement)(f,{type:"submit",variant:"primary"},t),a),P=e=>("number"!=typeof e&&(e=parseFloat(e)||0),new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e)),T=e=>{if(!e)return"-";try{const t=new Date(e);return isNaN(t.getTime())?"-":t.toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric",timeZone:"UTC"})}catch(t){return e}},F=e=>{if(!e)return"";try{const t=new Date(e);return isNaN(t.getTime())?"":t.toISOString().split("T")[0]}catch(e){return""}},D=e=>{const t=(e||"pending").replace(/_/g," "),a=t.toLowerCase().replace(/ /g,"_").replace(/[^a-z0-9_]/g,"");return(0,n.createElement)("span",{className:`status-badge ${a}`},t)},A=u("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),q=u("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),M=u("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),L=u("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),$=(...e)=>e.filter(Boolean).join(" "),J=({isOpen:e,onClose:t,jamaah:a})=>{const r=d(),{jamaahPayments:l,loadingPayments:i,fetchJamaahPayments:s,saveJamaahPayment:m,deleteJamaahPayment:c}=r,[o,p]=(0,n.useState)({amount:"",description:"",payment_date:F(new Date)});(0,n.useEffect)(()=>{e&&a?s(a.id):e||s(null)},[e,a,s]);const u=e=>{const{name:t,value:a}=e.target;p(e=>({...e,[t]:a}))};if(!a)return null;const g=r.jamaah.find(e=>e.id===a.id)||a,x=(g.total_price||0)-(g.amount_paid||0);return(0,n.createElement)(z,{title:`Riwayat Pembayaran: ${g.full_name}`,isOpen:e,onClose:t},i&&(0,n.createElement)(y,null),(0,n.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},(0,n.createElement)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200"},(0,n.createElement)("h4",{className:"text-sm font-medium text-gray-500"},"Total Tagihan"),(0,n.createElement)("p",{className:"text-2xl font-bold text-gray-900"},P(g.total_price))),(0,n.createElement)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200"},(0,n.createElement)("h4",{className:"text-sm font-medium text-gray-500"},"Total Terbayar (Verified)"),(0,n.createElement)("p",{className:"text-2xl font-bold text-green-600"},P(g.amount_paid))),(0,n.createElement)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200"},(0,n.createElement)("h4",{className:"text-sm font-medium text-gray-500"},"Sisa Tagihan"),(0,n.createElement)("p",{className:$("text-2xl font-bold",x>0?"text-red-600":"text-green-600")},P(x)))),(0,n.createElement)("h4",{className:"text-lg font-semibold text-gray-800 mb-3"},"Riwayat Transaksi"),(0,n.createElement)("ul",{className:"divide-y divide-gray-200"},0===l.length&&!i&&(0,n.createElement)("li",{className:"py-3 text-center text-gray-500"},"Tidak ada riwayat pembayaran."),l.map(e=>(0,n.createElement)("li",{key:e.id,className:"py-3 flex items-center justify-between gap-4"},(0,n.createElement)("div",{className:"flex-1"},(0,n.createElement)("strong",{className:"text-base font-medium text-gray-900"},P(e.amount)),(0,n.createElement)("span",{className:"block text-sm text-gray-500"},e.description||"Pembayaran"," - ",T(e.payment_date))),(0,n.createElement)("div",{className:"flex items-center gap-2 flex-shrink-0"},D(e.status),"pending"===e.status&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)(f,{variant:"icon",size:"sm",className:"text-green-600 hover:bg-green-100",onClick:()=>(async e=>{if(!window.confirm||window.confirm("Anda yakin ingin MEMVERIFIKASI pembayaran ini?"))try{await m(a.id,{...e,status:"verified"})}catch(e){alert(`Gagal verifikasi: ${e.message}`)}})(e),title:"Verifikasi"},(0,n.createElement)(A,{size:18})),(0,n.createElement)(f,{variant:"icon",size:"sm",className:"text-yellow-600 hover:bg-yellow-100",onClick:()=>(async e=>{if(!window.confirm||window.confirm("Anda yakin ingin MENOLAK pembayaran ini?"))try{await m(a.id,{...e,status:"rejected"})}catch(e){alert(`Gagal menolak: ${e.message}`)}})(e),title:"Tolak"},(0,n.createElement)(q,{size:18}))),(0,n.createElement)(f,{variant:"icon",size:"sm",className:"text-red-600 hover:bg-red-100",onClick:()=>(async e=>{if(!window.confirm||window.confirm("Anda yakin ingin MENGHAPUS riwayat pembayaran ini? Ini tidak bisa dikembalikan."))try{await c(a.id,e)}catch(e){alert(`Gagal menghapus: ${e.message}`)}})(e.id),title:"Hapus"},(0,n.createElement)(M,{size:18})))))),(0,n.createElement)("form",{onSubmit:async e=>{if(e.preventDefault(),o.amount&&o.payment_date)try{await m(a.id,o),p({amount:"",description:"",payment_date:F(new Date)})}catch(e){alert(`Gagal menyimpan: ${e.message}`)}else alert("Jumlah dan Tanggal wajib diisi.")},className:"mt-6 pt-4 border-t border-gray-200"},(0,n.createElement)("h4",{className:"text-lg font-semibold text-gray-800 mb-3"},"Tambah Pembayaran Baru"),(0,n.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"pay-amount"},"Jumlah (Rp)"),(0,n.createElement)(k,{type:"number",name:"amount",id:"pay-amount",value:o.amount,onChange:u,required:!0})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"pay-date"},"Tanggal Bayar"),(0,n.createElement)(k,{type:"date",name:"payment_date",id:"pay-date",value:o.payment_date,onChange:u,required:!0}))),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"pay-desc"},"Keterangan (Cth: DP, Cicilan 1, Pelunasan)"),(0,n.createElement)(k,{type:"text",name:"description",id:"pay-desc",value:o.description,onChange:u})),(0,n.createElement)(f,{type:"submit",variant:"primary"},(0,n.createElement)(L,{size:16})," Tambah")))},O=u("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),H=u("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),K=u("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),B=u("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),R=u("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),I=u("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),U=u("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),V=u("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),G=(...e)=>e.filter(Boolean).join(" "),W=({title:e,value:t,icon:a,color:r})=>{const l={primary:"bg-blue-100 text-blue-600",success:"bg-green-100 text-green-600",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-600"};return(0,n.createElement)("div",{className:"bg-white border border-gray-200 rounded-lg p-5 flex items-center gap-4 transition-all duration-200 hover:shadow-lg hover:-translate-y-1"},(0,n.createElement)("div",{className:G("p-3 rounded-full flex items-center justify-center",l[r]||l.primary)},a),(0,n.createElement)("div",{className:"overflow-hidden"},(0,n.createElement)("p",{className:"text-sm font-medium text-gray-500 truncate"},e),(0,n.createElement)("h3",{className:"text-2xl font-bold text-gray-900 truncate"},t)))},Y=u("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),X=u("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Z=u("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),Q=u("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ee=()=>{const{stats:e,loadingStats:t,jamaah:a,tasks:r}=d(),{total_jamaah:l=0,total_packages:i=0,total_revenue:s=0,total_expense:m=0}=e.totals||{},c=(0,n.useMemo)(()=>a.filter(e=>"pending"===e.status).length,[a]),o=(0,n.useMemo)(()=>r.filter(e=>"completed"!==e.status).length,[r]);return t?(0,n.createElement)("div",{className:"bg-white shadow-lg rounded-lg p-6 relative min-h-[300px]"},(0,n.createElement)(y,null)):(0,n.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},(0,n.createElement)(W,{title:"Jemaah (Approved)",value:l,icon:(0,n.createElement)(Y,{size:24}),color:"primary"}),(0,n.createElement)(W,{title:"Paket (Published)",value:i,icon:(0,n.createElement)(B,{size:24}),color:"success"}),(0,n.createElement)(W,{title:"Pemasukan",value:P(s),icon:(0,n.createElement)(I,{size:24}),color:"success"}),(0,n.createElement)(W,{title:"Pengeluaran",value:P(m),icon:(0,n.createElement)(X,{size:24}),color:"danger"}),(0,n.createElement)(W,{title:"Jemaah (Pending)",value:c,icon:(0,n.createElement)(Z,{size:24}),color:"warning"}),(0,n.createElement)(W,{title:"Tugas (Pending)",value:o,icon:(0,n.createElement)(Q,{size:24}),color:"warning"}))},te=({initialData:e,onSubmit:t,onCancel:a})=>{const[r,l]=(0,n.useState)({title:"",slug:"",status:"draft",promo:0,departure_city:"",duration:9,departure_date:"",slots_available:50,price_quad:"",price_triple:"",price_double:"",short_description:"",itinerary:"",meta_title:"",meta_description:""});(0,n.useEffect)(()=>{if(e){if(l({...e,promo:!!e.promo,departure_date:F(e.departure_date),price_quad:"",price_triple:"",price_double:""}),e.price_details)try{const t=JSON.parse(e.price_details);l(e=>({...e,price_quad:t.quad||"",price_triple:t.triple||"",price_double:t.double||""}))}catch(e){console.error("Gagal parse price_details JSON:",e)}}else l({title:"",slug:"",status:"draft",promo:0,departure_city:"",duration:9,departure_date:"",slots_available:50,price_quad:"",price_triple:"",price_double:"",short_description:"",itinerary:"",meta_title:"",meta_description:""})},[e]);const i=e=>{const{name:t,value:a,type:n,checked:r}=e.target;l(e=>({...e,[t]:"checkbox"===n?r?1:0:a}))};return(0,n.createElement)("form",{onSubmit:e=>{e.preventDefault();const a=JSON.stringify({quad:r.price_quad||0,triple:r.price_triple||0,double:r.price_double||0}),n={...r};delete n.price_quad,delete n.price_triple,delete n.price_double,n.price_details=a,t(n)}},(0,n.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},(0,n.createElement)(v,{className:"md:col-span-2"},(0,n.createElement)(_,{htmlFor:"title"},"Judul Paket"),(0,n.createElement)(k,{type:"text",name:"title",id:"title",value:r.title,onChange:i,required:!0})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"status"},"Status"),(0,n.createElement)(w,{name:"status",id:"status",value:r.status,onChange:i},(0,n.createElement)("option",{value:"draft"},"Draft"),(0,n.createElement)("option",{value:"published"},"Published"),(0,n.createElement)("option",{value:"archived"},"Archived"))),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"slug"},"Slug (URL)"),(0,n.createElement)(k,{type:"text",name:"slug",id:"slug",value:r.slug,onChange:i})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"duration"},"Durasi (Hari)"),(0,n.createElement)(k,{type:"number",name:"duration",id:"duration",value:r.duration,onChange:i,required:!0})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"departure_city"},"Kota Keberangkatan"),(0,n.createElement)(k,{type:"text",name:"departure_city",id:"departure_city",value:r.departure_city,onChange:i})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"departure_date"},"Tanggal Keberangkatan (Opsional)"),(0,n.createElement)(k,{type:"date",name:"departure_date",id:"departure_date",value:r.departure_date,onChange:i})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"slots_available"},"Jumlah Slot Tersedia"),(0,n.createElement)(k,{type:"number",name:"slots_available",id:"slots_available",value:r.slots_available,onChange:i})),(0,n.createElement)(v,{className:"md:col-span-2 mt-2"},(0,n.createElement)(N,{name:"promo",id:"promo",checked:!!r.promo,onChange:i,label:"Tandai sebagai Promo"})),(0,n.createElement)("hr",{className:"md:col-span-2"}),(0,n.createElement)("h4",{className:"md:col-span-2 text-lg font-semibold text-gray-800 -mb-2"},"Detail Harga"),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"price_quad"},"Harga Quad (Rp)"),(0,n.createElement)(k,{type:"number",name:"price_quad",id:"price_quad",value:r.price_quad,onChange:i})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"price_triple"},"Harga Triple (Rp)"),(0,n.createElement)(k,{type:"number",name:"price_triple",id:"price_triple",value:r.price_triple,onChange:i})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"price_double"},"Harga Double (Rp)"),(0,n.createElement)(k,{type:"number",name:"price_double",id:"price_double",value:r.price_double,onChange:i})),(0,n.createElement)("hr",{className:"md:col-span-2"}),(0,n.createElement)("h4",{className:"md:col-span-2 text-lg font-semibold text-gray-800 -mb-2"},"Deskripsi & SEO"),(0,n.createElement)(v,{className:"md:col-span-2"},(0,n.createElement)(_,{htmlFor:"short_description"},"Deskripsi Singkat"),(0,n.createElement)(b,{name:"short_description",id:"short_description",value:r.short_description,onChange:i})),(0,n.createElement)(v,{className:"md:col-span-2"},(0,n.createElement)(_,{htmlFor:"itinerary"},"Itinerary (JSON/Text)"),(0,n.createElement)(b,{name:"itinerary",id:"itinerary",value:r.itinerary,onChange:i})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"meta_title"},"Meta Title (SEO)"),(0,n.createElement)(k,{type:"text",name:"meta_title",id:"meta_title",value:r.meta_title,onChange:i})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"meta_description"},"Meta Description (SEO)"),(0,n.createElement)(k,{type:"text",name:"meta_description",id:"meta_description",value:r.meta_description,onChange:i}))),(0,n.createElement)(j,{onCancel:a}))},ae=u("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),ne=()=>{const{packages:e,savePackage:t,deletePackage:a,loading:r,error:l}=d(),[i,s]=(0,n.useState)(!1),[m,c]=(0,n.useState)(null),o=(e=null)=>{c(e),s(!0)},p=()=>{s(!1),c(null)};return(0,n.createElement)("div",{className:"bg-white shadow-lg rounded-lg p-6 relative min-h-[300px]"},(0,n.createElement)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4"},(0,n.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Paket"),(0,n.createElement)(f,{variant:"primary",onClick:()=>o()},(0,n.createElement)(L,{size:18})," Tambah Paket")),l&&(0,n.createElement)(h,{message:l}),r&&(0,n.createElement)(y,null),!r&&!l&&(0,n.createElement)("div",{className:"overflow-x-auto"},(0,n.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,n.createElement)("thead",{className:"bg-gray-50"},(0,n.createElement)("tr",null,(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Judul Paket"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tgl Berangkat"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Durasi"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Kota"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Harga Mulai"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Slot"),(0,n.createElement)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi"))),(0,n.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},0===e.length&&(0,n.createElement)("tr",null,(0,n.createElement)("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500"},"Tidak ada paket.")),e.map(e=>(0,n.createElement)("tr",{key:e.id,className:"hover:bg-gray-50"},(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},e.title),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},D(e.status)),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},T(e.departure_date)),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},e.duration," Hari"),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},e.departure_city),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},P((e=>{if(!e)return 0;try{const t=JSON.parse(e),a=[t.quad,t.triple,t.double].filter(e=>e&&parseFloat(e)>0);return 0===a.length?0:Math.min(...a.map(e=>parseFloat(e)))}catch(e){return 0}})(e.price_details))),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},e.slots_filled||0," / ",e.slots_available||0),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},(0,n.createElement)(f,{variant:"icon",size:"sm",onClick:()=>o(e),title:"Edit Paket"},(0,n.createElement)(ae,{size:16})),(0,n.createElement)(f,{variant:"icon",size:"sm",className:"text-red-600 hover:bg-red-100",onClick:()=>(async e=>{if(window.confirm&&window.confirm("Yakin ingin menghapus paket ini?"))try{await a(e)}catch(e){alert(`Error: ${e.message}`)}})(e.id),title:"Hapus Paket"},(0,n.createElement)(M,{size:16})))))))),(0,n.createElement)(z,{title:m?"Edit Paket":"Tambah Paket Baru",isOpen:i,onClose:p,size:"4xl"},(0,n.createElement)(te,{initialData:m,onSubmit:async e=>{try{await t(e),p()}catch(e){alert(`Error: ${e.message}`)}},onCancel:p})))},re=({initialData:e,onSubmit:t,onCancel:a,packages:r})=>{const[l,i]=(0,n.useState)({package_id:"",full_name:"",id_number:"",phone:"",email:"",address:"",gender:"male",birth_date:"",passport_number:"",status:"pending",total_price:"",equipment_status:"belum_di_kirim",is_passport_verified:!1,is_ktp_verified:!1,is_kk_verified:!1,is_meningitis_verified:!1});(0,n.useEffect)(()=>{i(e?t=>({...t,...e,is_passport_verified:!!e.is_passport_verified,is_ktp_verified:!!e.is_ktp_verified,is_kk_verified:!!e.is_kk_verified,is_meningitis_verified:!!e.is_meningitis_verified,birth_date:F(e.birth_date)}):{package_id:"",full_name:"",id_number:"",phone:"",email:"",address:"",gender:"male",birth_date:"",passport_number:"",status:"pending",total_price:"",equipment_status:"belum_di_kirim",is_passport_verified:!1,is_ktp_verified:!1,is_kk_verified:!1,is_meningitis_verified:!1})},[e]);const s=e=>{const{name:t,value:a,type:n,checked:r}=e.target;i(e=>({...e,[t]:"checkbox"===n?r:a}))};return(0,n.createElement)("form",{onSubmit:e=>{e.preventDefault(),t(l)}},(0,n.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},(0,n.createElement)(v,{className:"md:col-span-2"},(0,n.createElement)(_,{htmlFor:"package_id"},"Paket yang Diambil"),(0,n.createElement)(w,{name:"package_id",id:"package_id",value:l.package_id,onChange:s,required:!0},(0,n.createElement)("option",{value:""},"Pilih Paket"),r.map(e=>(0,n.createElement)("option",{key:e.id,value:e.id},e.title," (",e.departure_date?F(e.departure_date):"N/A",")")))),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"full_name"},"Nama Lengkap"),(0,n.createElement)(k,{type:"text",name:"full_name",id:"full_name",value:l.full_name,onChange:s,required:!0})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"id_number"},"No. KTP (NIK)"),(0,n.createElement)(k,{type:"text",name:"id_number",id:"id_number",value:l.id_number,onChange:s,required:!0})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"phone"},"No. Telepon (WA)"),(0,n.createElement)(k,{type:"tel",name:"phone",id:"phone",value:l.phone,onChange:s})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"email"},"Email"),(0,n.createElement)(k,{type:"email",name:"email",id:"email",value:l.email,onChange:s})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"birth_date"},"Tanggal Lahir"),(0,n.createElement)(k,{type:"date",name:"birth_date",id:"birth_date",value:l.birth_date,onChange:s})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"gender"},"Jenis Kelamin"),(0,n.createElement)(w,{name:"gender",id:"gender",value:l.gender,onChange:s},(0,n.createElement)("option",{value:"male"},"Laki-laki"),(0,n.createElement)("option",{value:"female"},"Perempuan"))),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"passport_number"},"No. Paspor"),(0,n.createElement)(k,{type:"text",name:"passport_number",id:"passport_number",value:l.passport_number,onChange:s})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"address"},"Alamat"),(0,n.createElement)(k,{type:"text",name:"address",id:"address",value:l.address,onChange:s})),(0,n.createElement)("hr",{className:"md:col-span-2"}),(0,n.createElement)("h4",{className:"md:col-span-2 text-lg font-semibold text-gray-800 -mb-2"},"Administrasi & Keuangan"),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"status"},"Status Jemaah"),(0,n.createElement)(w,{name:"status",id:"status",value:l.status,onChange:s},(0,n.createElement)("option",{value:"pending"},"Pending"),(0,n.createElement)("option",{value:"approved"},"Approved"),(0,n.createElement)("option",{value:"rejected"},"Rejected"),(0,n.createElement)("option",{value:"waitlist"},"Waitlist"))),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"total_price"},"Total Tagihan (Rp)"),(0,n.createElement)(k,{type:"number",name:"total_price",id:"total_price",value:l.total_price,onChange:s,placeholder:"Otomatis jika kosong"})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"equipment_status"},"Status Perlengkapan"),(0,n.createElement)(w,{name:"equipment_status",id:"equipment_status",value:l.equipment_status,onChange:s},(0,n.createElement)("option",{value:"belum_di_kirim"},"Belum Dikirim"),(0,n.createElement)("option",{value:"di_kirim"},"Dikirim"),(0,n.createElement)("option",{value:"diterima"},"Diterima"))),(0,n.createElement)("hr",{className:"md:col-span-2"}),(0,n.createElement)("h4",{className:"md:col-span-2 text-lg font-semibold text-gray-800 -mb-2"},"Checklist Verifikasi Dokumen (Admin)"),(0,n.createElement)(v,null,(0,n.createElement)(N,{name:"is_passport_verified",id:"is_passport_verified",checked:!!l.is_passport_verified,onChange:s,label:"Paspor Verified"})),(0,n.createElement)(v,null,(0,n.createElement)(N,{name:"is_ktp_verified",id:"is_ktp_verified",checked:!!l.is_ktp_verified,onChange:s,label:"KTP Verified"})),(0,n.createElement)(v,null,(0,n.createElement)(N,{name:"is_kk_verified",id:"is_kk_verified",checked:!!l.is_kk_verified,onChange:s,label:"KK Verified"})),(0,n.createElement)(v,null,(0,n.createElement)(N,{name:"is_meningitis_verified",id:"is_meningitis_verified",checked:!!l.is_meningitis_verified,onChange:s,label:"Meningitis Verified"}))),(0,n.createElement)(j,{onCancel:a}))},le=u("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),ie=u("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),se=(...e)=>e.filter(Boolean).join(" "),me=({onOpenPayments:e})=>{const{jamaah:t,packages:a,saveJamaah:r,deleteJamaah:l,loading:i,error:s}=d(),[m,c]=(0,n.useState)(!1),[o,p]=(0,n.useState)(null),[u,g]=(0,n.useState)(""),[x,E]=(0,n.useState)(""),b=(e=null)=>{p(e),c(!0)},v=()=>{c(!1),p(null)},N=(0,n.useMemo)(()=>{const e=x.toLowerCase();return t.filter(t=>(!u||t.package_id==u)&&(!e||t.full_name?.toLowerCase().includes(e)||t.id_number?.toLowerCase().includes(e)||t.phone?.toLowerCase().includes(e)||t.email?.toLowerCase().includes(e)))},[t,u,x]);return(0,n.createElement)("div",{className:"bg-white shadow-lg rounded-lg p-6 relative min-h-[300px]"},(0,n.createElement)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4"},(0,n.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Jemaah"),(0,n.createElement)(f,{variant:"primary",onClick:()=>b()},(0,n.createElement)(le,{size:18})," Tambah Jemaah")),(0,n.createElement)("div",{className:"p-4 bg-gray-50 rounded-lg mb-6 flex flex-col md:flex-row gap-4 items-center"},(0,n.createElement)("div",{className:"flex-1 w-full md:w-auto"},(0,n.createElement)(_,{htmlFor:"search-jemaah"},"Cari Jemaah"),(0,n.createElement)("div",{className:"relative"},(0,n.createElement)(k,{id:"search-jemaah",type:"text",placeholder:"Nama, NIK, HP, Email...",value:x,onChange:e=>E(e.target.value),className:"pl-10"}),(0,n.createElement)(ie,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}))),(0,n.createElement)("div",{className:"flex-1 w-full md:w-auto"},(0,n.createElement)(_,{htmlFor:"filter-paket"},"Filter Paket"),(0,n.createElement)(w,{id:"filter-paket",value:u,onChange:e=>g(e.target.value)},(0,n.createElement)("option",{value:""},"Semua Paket"),a.map(e=>(0,n.createElement)("option",{key:e.id,value:e.id},e.title," (",e.departure_date?T(e.departure_date):"N/A",")"))))),s&&(0,n.createElement)(h,{message:s}),i&&(0,n.createElement)(y,null),!i&&!s&&(0,n.createElement)("div",{className:"overflow-x-auto"},(0,n.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,n.createElement)("thead",{className:"bg-gray-50"},(0,n.createElement)("tr",null,(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nama"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Paket"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status Bayar"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Sisa Tagihan"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Dokumen"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Perlengkapan"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Kontak"),(0,n.createElement)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi"))),(0,n.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},0===N.length&&(0,n.createElement)("tr",null,(0,n.createElement)("td",{colSpan:"8",className:"px-6 py-4 text-center text-gray-500"},"Tidak ada jemaah yang cocok.")),N.map(t=>{const r=(t.total_price||0)-(t.amount_paid||0),i=a.find(e=>e.id==t.package_id);return(0,n.createElement)("tr",{key:t.id,className:"hover:bg-gray-50"},(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},t.full_name),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},i?.title||"N/A"),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},D(t.payment_status)),(0,n.createElement)("td",{className:se("px-6 py-4 whitespace-nowrap text-sm font-medium",r>0?"text-red-600":"text-green-600")},P(r)),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},(e=>{let t=0;return e.is_passport_verified&&t++,e.is_ktp_verified&&t++,e.is_kk_verified&&t++,e.is_meningitis_verified&&t++,D(4===t?"Lengkap":t>0?`${t}/4`:"Belum")})(t)),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},D(t.equipment_status)),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},t.phone),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-1"},(0,n.createElement)(f,{variant:"primary",size:"sm",onClick:()=>e(t)},(0,n.createElement)(X,{size:14})," Bayar"),(0,n.createElement)(f,{variant:"icon",size:"sm",onClick:()=>b(t),title:"Edit Jemaah"},(0,n.createElement)(ae,{size:16})),(0,n.createElement)(f,{variant:"icon",size:"sm",className:"text-red-600 hover:bg-red-100",onClick:()=>(async e=>{if(window.confirm&&window.confirm("Yakin ingin menghapus jemaah ini? Semua data pembayaran terkait akan ikut terhapus."))try{await l(e)}catch(e){alert(`Error: ${e.message}`)}})(t.id),title:"Hapus Jemaah"},(0,n.createElement)(M,{size:16}))))})))),(0,n.createElement)(z,{title:o?"Edit Jemaah":"Tambah Jemaah Baru",isOpen:m,onClose:v,size:"4xl"},(0,n.createElement)(re,{initialData:o,onSubmit:async e=>{try{await r(e),v()}catch(e){alert(`Error: ${e.message}`)}},onCancel:v,packages:a})))},ce=({initialData:e,onSubmit:t,onCancel:a,accounts:r})=>{const[l,i]=(0,n.useState)({transaction_date:F(new Date),description:"",transaction_type:"expense",amount:"",account_id:""});(0,n.useEffect)(()=>{i(e?t=>({...t,...e,transaction_date:F(e.transaction_date)}):{transaction_date:F(new Date),description:"",transaction_type:"expense",amount:"",account_id:""})},[e]);const s=e=>{const{name:t,value:a}=e.target;i(e=>({...e,[t]:a}))};return(0,n.createElement)("form",{onSubmit:e=>{e.preventDefault(),t(l)}},(0,n.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"transaction_date"},"Tanggal"),(0,n.createElement)(k,{type:"date",name:"transaction_date",id:"transaction_date",value:l.transaction_date,onChange:s,required:!0})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"account_id"},"Akun"),(0,n.createElement)(w,{name:"account_id",id:"account_id",value:l.account_id,onChange:s,required:!0},(0,n.createElement)("option",{value:""},"Pilih Akun Kas"),r.map(e=>(0,n.createElement)("option",{key:e.id,value:e.id},e.name)))),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"transaction_type"},"Jenis Transaksi"),(0,n.createElement)(w,{name:"transaction_type",id:"transaction_type",value:l.transaction_type,onChange:s,required:!0},(0,n.createElement)("option",{value:"expense"},"Debit (Pengeluaran)"),(0,n.createElement)("option",{value:"income"},"Kredit (Pemasukan)"))),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"amount"},"Jumlah (Rp)"),(0,n.createElement)(k,{type:"number",name:"amount",id:"amount",value:l.amount,onChange:s,required:!0})),(0,n.createElement)(v,{className:"md:col-span-2"},(0,n.createElement)(_,{htmlFor:"description"},"Deskripsi"),(0,n.createElement)(k,{type:"text",name:"description",id:"description",value:l.description,onChange:s}))),(0,n.createElement)(j,{onCancel:a}))},oe=u("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),de=(...e)=>e.filter(Boolean).join(" "),pe=()=>{const{finance:e,financeAccounts:t,saveFinance:a,deleteFinance:r,loading:l,error:i}=d(),[s,m]=(0,n.useState)(!1),[c,o]=(0,n.useState)(null),[p,u]=(0,n.useState)(""),g=(e=null)=>{o(e),m(!0)},x=()=>{m(!1),o(null)},E=(0,n.useMemo)(()=>{const t=e.filter(e=>!p||e.account_id==p).sort((e,t)=>new Date(e.transaction_date)-new Date(t.transaction_date));let a=0,n=0,r=0;return{transactions:t.map(e=>{const t=parseFloat(e.amount)||0;let l=0,i=0;return"expense"===e.transaction_type?(l=t,a+=t,r-=t):(i=t,n+=t,r+=t),{...e,debit:l,kredit:i,balance:r}}).reverse(),totalDebit:a,totalKredit:n,saldoAkhir:r}},[e,p]);return(0,n.createElement)("div",{className:"bg-white shadow-lg rounded-lg p-6 relative min-h-[300px]"},(0,n.createElement)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4"},(0,n.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Buku Kas"),(0,n.createElement)(f,{variant:"primary",onClick:()=>g()},(0,n.createElement)(L,{size:18})," Catat Transaksi")),(0,n.createElement)("div",{className:"p-4 bg-gray-50 rounded-lg mb-6 flex flex-col md:flex-row gap-4 items-center"},(0,n.createElement)("div",{className:"flex-1 w-full md:w-auto"},(0,n.createElement)(_,{htmlFor:"filter-akun"},"Tampilkan Akun"),(0,n.createElement)(w,{id:"filter-akun",value:p,onChange:e=>u(e.target.value)},(0,n.createElement)("option",{value:""},"Semua Akun Kas"),t.map(e=>(0,n.createElement)("option",{key:e.id,value:e.id},e.name))))),(0,n.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},(0,n.createElement)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200"},(0,n.createElement)("h4",{className:"text-sm font-medium text-gray-500 flex items-center gap-2"},(0,n.createElement)(A,{size:16})," Total Kredit (Masuk)"),(0,n.createElement)("p",{className:"text-2xl font-bold text-green-600"},P(E.totalKredit))),(0,n.createElement)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200"},(0,n.createElement)("h4",{className:"text-sm font-medium text-gray-500 flex items-center gap-2"},(0,n.createElement)(oe,{size:16})," Total Debit (Keluar)"),(0,n.createElement)("p",{className:"text-2xl font-bold text-red-600"},P(E.totalDebit))),(0,n.createElement)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200"},(0,n.createElement)("h4",{className:"text-sm font-medium text-gray-500 flex items-center gap-2"},(0,n.createElement)(I,{size:16})," Saldo Akhir"),(0,n.createElement)("p",{className:de("text-2xl font-bold",E.saldoAkhir<0?"text-red-600":"text-gray-900")},P(E.saldoAkhir)))),i&&(0,n.createElement)(h,{message:i}),l&&(0,n.createElement)(y,null),!l&&!i&&(0,n.createElement)("div",{className:"overflow-x-auto"},(0,n.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,n.createElement)("thead",{className:"bg-gray-50"},(0,n.createElement)("tr",null,(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tanggal"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Deskripsi"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Akun"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Debit"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Kredit"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Saldo"),(0,n.createElement)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi"))),(0,n.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},0===E.transactions.length&&(0,n.createElement)("tr",null,(0,n.createElement)("td",{colSpan:"7",className:"px-6 py-4 text-center text-gray-500"},"Tidak ada transaksi.")),E.transactions.map(e=>{const a=t.find(t=>t.id==e.account_id);return(0,n.createElement)("tr",{key:e.id,className:"hover:bg-gray-50"},(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},T(e.transaction_date)),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},e.description),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},a?a.name:"N/A"),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600"},e.debit?P(e.debit):"-"),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600"},e.kredit?P(e.kredit):"-"),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800"},P(e.balance)),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-1"},(0,n.createElement)(f,{variant:"icon",size:"sm",onClick:()=>g(e),title:"Edit Transaksi"},(0,n.createElement)(ae,{size:16})),(0,n.createElement)(f,{variant:"icon",size:"sm",className:"text-red-600 hover:bg-red-100",onClick:()=>(async e=>{if(window.confirm&&window.confirm("Yakin ingin menghapus transaksi ini?"))try{await r(e)}catch(e){alert(`Error: ${e.message}`)}})(e.id),title:"Hapus Transaksi"},(0,n.createElement)(M,{size:16}))))})))),(0,n.createElement)(z,{title:c?"Edit Transaksi":"Catat Transaksi Baru",isOpen:s,onClose:x,size:"2xl"},(0,n.createElement)(ce,{initialData:c,onSubmit:async e=>{try{await a(e),x()}catch(e){alert(`Error: ${e.message}`)}},onCancel:x,accounts:t})))},ue=({initialData:e,onSubmit:t,onCancel:a})=>{const[r,l]=(0,n.useState)({full_name:"",email:"",role:"hr_staff",password:"",phone:"",status:"active"}),i=(0,n.useMemo)(()=>!!e,[e]);(0,n.useEffect)(()=>{l(e?{full_name:e.full_name||"",email:e.email||"",role:e.role||"hr_staff",password:"",phone:e.phone||"",status:e.status||"active"}:{full_name:"",email:"",role:"hr_staff",password:"",phone:"",status:"active"})},[e]);const s=e=>{const{name:t,value:a}=e.target;l(e=>({...e,[t]:a}))};return(0,n.createElement)("form",{onSubmit:e=>{e.preventDefault(),t(r)}},(0,n.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"full_name"},"Nama Lengkap"),(0,n.createElement)(k,{type:"text",name:"full_name",id:"full_name",value:r.full_name,onChange:s,required:!0})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"email"},"Email (untuk login)"),(0,n.createElement)(k,{type:"email",name:"email",id:"email",value:r.email,onChange:s,required:!0})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"role"},"Peran (Role)"),(0,n.createElement)(w,{name:"role",id:"role",value:r.role,onChange:s,required:!0},(0,n.createElement)("option",{value:"admin_staff"},"Admin Staff"),(0,n.createElement)("option",{value:"finance_staff"},"Finance Staff"),(0,n.createElement)("option",{value:"hr_staff"},"HR Staff"),(0,n.createElement)("option",{value:"marketing_staff"},"Marketing Staff"),(0,n.createElement)("option",{value:"owner"},"Owner"))),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"phone"},"No. Telepon"),(0,n.createElement)(k,{type:"tel",name:"phone",id:"phone",value:r.phone,onChange:s})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"password"},"Password"),(0,n.createElement)(k,{type:"password",name:"password",id:"password",value:r.password,onChange:s,placeholder:i?"Isi untuk mengubah":"",required:!i})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"status"},"Status Akun"),(0,n.createElement)(w,{name:"status",id:"status",value:r.status,onChange:s,required:!0},(0,n.createElement)("option",{value:"active"},"Active"),(0,n.createElement)("option",{value:"inactive"},"Inactive")))),(0,n.createElement)(j,{onCancel:a}))},ge=()=>{const{users:e,saveUser:t,deleteUser:a,loading:r,error:l}=d(),[i,s]=(0,n.useState)(!1),[m,c]=(0,n.useState)(null),o=(e=null)=>{c(e),s(!0)},p=()=>{s(!1),c(null)};return(0,n.createElement)("div",{className:"bg-white shadow-lg rounded-lg p-6 relative min-h-[300px]"},(0,n.createElement)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4"},(0,n.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Karyawan"),(0,n.createElement)(f,{variant:"primary",onClick:()=>o()},(0,n.createElement)(L,{size:18})," Tambah Karyawan")),l&&(0,n.createElement)(h,{message:l}),r&&(0,n.createElement)(y,null),!r&&!l&&(0,n.createElement)("div",{className:"overflow-x-auto"},(0,n.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,n.createElement)("thead",{className:"bg-gray-50"},(0,n.createElement)("tr",null,(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nama Lengkap"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Email"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Peran (Role)"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Telepon"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),(0,n.createElement)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi"))),(0,n.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},0===e.length&&(0,n.createElement)("tr",null,(0,n.createElement)("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500"},"Tidak ada data karyawan.")),e.map(e=>(0,n.createElement)("tr",{key:e.id,className:"hover:bg-gray-50"},(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},e.full_name),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},e.email),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},e.role),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},e.phone),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},D(e.status)),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-1"},(0,n.createElement)(f,{variant:"icon",size:"sm",onClick:()=>o(e),title:"Edit Karyawan"},(0,n.createElement)(ae,{size:16})),(0,n.createElement)(f,{variant:"icon",size:"sm",className:"text-red-600 hover:bg-red-100",onClick:()=>(async e=>{if(window.confirm&&window.confirm("Yakin ingin menghapus karyawan ini?"))try{await a(e)}catch(e){alert(`Error: ${e.message}`)}})(e.id),title:"Hapus Karyawan"},(0,n.createElement)(M,{size:16})))))))),(0,n.createElement)(z,{title:m?"Edit Karyawan":"Tambah Karyawan Baru",isOpen:i,onClose:p,size:"3xl"},(0,n.createElement)(ue,{initialData:m,onSubmit:async e=>{try{await t(e),p()}catch(e){alert(`Error: ${e.message}`)}},onCancel:p})))},ye=({initialData:e,onSubmit:t,onCancel:a,users:r})=>{const[l,i]=(0,n.useState)({full_name:"",email:"",phone:"",source:"",status:"new",assigned_to_user_id:""}),s=(0,n.useMemo)(()=>r.filter(e=>["marketing_staff","admin_staff","owner","super_admin"].includes(e.role)),[r]);(0,n.useEffect)(()=>{i(e?t=>({...t,...e}):{full_name:"",email:"",phone:"",source:"",status:"new",assigned_to_user_id:""})},[e]);const m=e=>{const{name:t,value:a}=e.target;i(e=>({...e,[t]:a}))};return(0,n.createElement)("form",{onSubmit:e=>{e.preventDefault(),t(l)}},(0,n.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"full_name"},"Nama Lengkap"),(0,n.createElement)(k,{type:"text",name:"full_name",id:"full_name",value:l.full_name,onChange:m,required:!0})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"phone"},"No. Telepon"),(0,n.createElement)(k,{type:"tel",name:"phone",id:"phone",value:l.phone,onChange:m})),(0,n.createElement)(v,{className:"md:col-span-2"},(0,n.createElement)(_,{htmlFor:"email"},"Email"),(0,n.createElement)(k,{type:"email",name:"email",id:"email",value:l.email,onChange:m})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"source"},"Sumber Lead"),(0,n.createElement)(k,{type:"text",name:"source",id:"source",value:l.source,onChange:m,placeholder:"Cth: Facebook, Website, Walk-in"})),(0,n.createElement)(v,null,(0,n.createElement)(_,{htmlFor:"status"},"Status"),(0,n.createElement)(w,{name:"status",id:"status",value:l.status,onChange:m,required:!0},(0,n.createElement)("option",{value:"new"},"New"),(0,n.createElement)("option",{value:"contacted"},"Contacted"),(0,n.createElement)("option",{value:"qualified"},"Qualified"),(0,n.createElement)("option",{value:"unqualified"},"Unqualified"),(0,n.createElement)("option",{value:"converted"},"Converted"))),(0,n.createElement)(v,{className:"md:col-span-2"},(0,n.createElement)(_,{htmlFor:"assigned_to_user_id"},"Ditugaskan ke (Marketing)"),(0,n.createElement)(w,{name:"assigned_to_user_id",id:"assigned_to_user_id",value:l.assigned_to_user_id,onChange:m},(0,n.createElement)("option",{value:""},"Belum Ditugaskan"),s.map(e=>(0,n.createElement)("option",{key:e.id,value:e.id},e.full_name))))),(0,n.createElement)(j,{onCancel:a}))},xe=()=>{const{leads:e,users:t,saveLead:a,deleteLead:r,loading:l,error:i}=d(),[s,m]=(0,n.useState)(!1),[c,o]=(0,n.useState)(null),p=(e=null)=>{o(e),m(!0)},u=()=>{m(!1),o(null)};return(0,n.createElement)("div",{className:"bg-white shadow-lg rounded-lg p-6 relative min-h-[300px]"},(0,n.createElement)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4"},(0,n.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Manajemen Leads"),(0,n.createElement)(f,{variant:"primary",onClick:()=>p()},(0,n.createElement)(L,{size:18})," Tambah Lead")),i&&(0,n.createElement)(h,{message:i}),l&&(0,n.createElement)(y,null),!l&&!i&&(0,n.createElement)("div",{className:"overflow-x-auto"},(0,n.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,n.createElement)("thead",{className:"bg-gray-50"},(0,n.createElement)("tr",null,(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nama Lengkap"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Kontak"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Sumber"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Ditugaskan ke"),(0,n.createElement)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi"))),(0,n.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},0===e.length&&(0,n.createElement)("tr",null,(0,n.createElement)("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500"},"Tidak ada data leads.")),e.map(e=>(0,n.createElement)("tr",{key:e.id,className:"hover:bg-gray-50"},(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},e.full_name),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},(0,n.createElement)("div",null,e.phone),(0,n.createElement)("div",null,e.email)),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},e.source),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},D(e.status)),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},(e=>{const a=t.find(t=>t.id==e);return a?a.full_name:"N/A"})(e.assigned_to_user_id)),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-1"},(0,n.createElement)(f,{variant:"icon",size:"sm",onClick:()=>p(e),title:"Edit Lead"},(0,n.createElement)(ae,{size:16})),(0,n.createElement)(f,{variant:"icon",size:"sm",className:"text-red-600 hover:bg-red-100",onClick:()=>(async e=>{if(window.confirm&&window.confirm("Yakin ingin menghapus lead ini?"))try{await r(e)}catch(e){alert(`Error: ${e.message}`)}})(e.id),title:"Hapus Lead"},(0,n.createElement)(M,{size:16})))))))),(0,n.createElement)(z,{title:c?"Edit Lead":"Tambah Lead Baru",isOpen:s,onClose:u,size:"3xl"},(0,n.createElement)(ye,{initialData:c,onSubmit:async e=>{try{await a(e),u()}catch(e){alert(`Error: ${e.message}`)}},onCancel:u,users:t})))},he=()=>{const{logs:e,users:t,loadingLogs:a,error:r,fetchLogs:l}=d();return(0,n.useEffect)(()=>{l()},[l]),(0,n.createElement)("div",{className:"bg-white shadow-lg rounded-lg p-6 relative min-h-[300px]"},(0,n.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,n.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Log Aktivitas")),r&&(0,n.createElement)(h,{message:r}),a&&(0,n.createElement)(y,null),!a&&!r&&(0,n.createElement)("div",{className:"overflow-x-auto"},(0,n.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,n.createElement)("thead",{className:"bg-gray-50"},(0,n.createElement)("tr",null,(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Waktu"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Pengguna"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Objek"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID Objek"),(0,n.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Detail"))),(0,n.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},0===e.length&&(0,n.createElement)("tr",null,(0,n.createElement)("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500"},"Tidak ada log.")),e.map(e=>(0,n.createElement)("tr",{key:e.id,className:"hover:bg-gray-50"},(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},T(e.created_at)),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},(e=>{const a=t.find(t=>t.id==e);return a?a.full_name:"Sistem"})(e.user_id)),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},D(e.action)),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},e.object_type),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},e.object_id),(0,n.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 truncate max-w-xs"},e.details)))))))},Ee=(...e)=>e.filter(Boolean).join(" "),fe=()=>{const{currentUser:e,logout:t,isLoading:a}=m(),{loading:r,error:l}=d(),[i,s]=(0,n.useState)("dashboard"),[c,o]=(0,n.useState)(!1),[p,u]=(0,n.useState)(null),g=e=>{u(e),o(!0)};if(a)return(0,n.createElement)(x,null);const E=({view:e,icon:t,label:a})=>(0,n.createElement)("button",{className:Ee("flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors","bg-white border border-gray-300 text-gray-600 hover:bg-gray-100",i===e&&"bg-blue-600 text-white border-blue-600 hover:bg-blue-700"),onClick:()=>s(e)},t," ",a);return(0,n.createElement)("div",{className:"p-4 md:p-6 lg:p-8"},(0,n.createElement)("header",{className:"flex flex-col md:flex-row justify-between items-center mb-6 p-4 bg-white shadow-md rounded-lg gap-4"},(0,n.createElement)("h1",{className:"text-2xl font-bold text-blue-700 flex items-center gap-3"},(0,n.createElement)(O,null),(0,n.createElement)("span",null,"Jannah Firdaus - Umroh Manager")),(0,n.createElement)("div",{className:"flex items-center gap-4"},(0,n.createElement)("span",{className:"text-sm text-gray-600 hidden md:block"},"Halo, ",(0,n.createElement)("strong",null,e?.full_name||e?.email)),(0,n.createElement)(f,{variant:"secondary",size:"md",onClick:t},(0,n.createElement)(H,{size:16})," Logout"))),(0,n.createElement)("nav",{className:"flex flex-wrap gap-2 mb-6"},(0,n.createElement)(E,{view:"dashboard",icon:(0,n.createElement)(K,{size:16}),label:"Dashboard"}),(0,n.createElement)(E,{view:"packages",icon:(0,n.createElement)(B,{size:16}),label:"Paket"}),(0,n.createElement)(E,{view:"jamaah",icon:(0,n.createElement)(R,{size:16}),label:"Jemaah"}),(0,n.createElement)(E,{view:"finance",icon:(0,n.createElement)(I,{size:16}),label:"Keuangan"}),(0,n.createElement)(E,{view:"hr",icon:(0,n.createElement)(O,{size:16}),label:"HR"}),(0,n.createElement)(E,{view:"marketing",icon:(0,n.createElement)(U,{size:16}),label:"Marketing"}),(0,n.createElement)(E,{view:"logs",icon:(0,n.createElement)(V,{size:16}),label:"Logs"})),(0,n.createElement)("main",null,(()=>{if(r)return(0,n.createElement)("div",{className:"bg-white shadow-lg rounded-lg p-6 relative min-h-[300px]"},(0,n.createElement)(y,null));if(l)return(0,n.createElement)("div",{className:"bg-white shadow-lg rounded-lg p-6"},(0,n.createElement)(h,{message:`Gagal memuat data: ${l}`}));switch(i){case"dashboard":default:return(0,n.createElement)(ee,null);case"packages":return(0,n.createElement)(ne,null);case"jamaah":return(0,n.createElement)(me,{onOpenPayments:g});case"finance":return(0,n.createElement)(pe,null);case"hr":return(0,n.createElement)(ge,null);case"marketing":return(0,n.createElement)(xe,null);case"logs":return(0,n.createElement)(he,null)}})()),(0,n.createElement)(J,{isOpen:c,onClose:()=>{u(null),o(!1)},jamaah:p}))};document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("umh-admin-app");e?(0,l.H)(e).render((0,n.createElement)(r().StrictMode,null,(0,n.createElement)(s,null,(0,n.createElement)(o,null,(0,n.createElement)(fe,null))))):console.error('UMH Error: Target root element "umh-admin-app" not found in DOM.')})})();