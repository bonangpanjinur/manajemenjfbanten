(()=>{"use strict";var e={338:(e,a,t)=>{var n=t(795);a.H=n.createRoot,n.hydrateRoot},795:e=>{e.exports=window.ReactDOM}},a={};const t=window.React;var n=function t(n){var r=a[n];if(void 0!==r)return r.exports;var l=a[n]={exports:{}};return e[n](l,l.exports,t),l.exports}(338),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const l=(e,a)=>{const n=(0,t.forwardRef)(({color:n="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:m,className:o="",children:c,...s},u)=>{return(0,t.createElement)("svg",{ref:u,...r,width:l,height:l,stroke:n,strokeWidth:m?24*Number(i)/Number(l):i,className:["lucide",`lucide-${d=e,d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()}`,o].join(" "),...s},[...a.map(([e,a])=>(0,t.createElement)(e,a)),...Array.isArray(c)?c:[c]]);var d});return n.displayName=`${e}`,n},i=l("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),m=l("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]),o=l("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]),c=l("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),s=l("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),u=l("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),d=l("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),p=l("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),g=l("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),h=l("XSquare",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),E=l("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),y=l("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),b=l("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),f=l("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),v=l("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),k=l("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),x=l("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]),N=l("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),_=l("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),w=l("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),C=l("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),S=l("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),z="\n:root {\n    --primary: #007cba;\n    --primary-dark: #005a8a;\n    --secondary: #f0f0f0;\n    --background: #f9f9f9;\n    --text: #333;\n    --text-light: #777;\n    --border: #e0e0e0;\n    --danger: #e53e3e;\n    --success: #48bb78;\n    --warning: #f6ad55;\n    --white: #ffffff;\n    --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n}\nbody { \n    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;\n    background-color: var(--background); \n    color: var(--text); \n    margin: 0;\n}\n#umh-admin-app { padding: 20px; max-width: 1600px; margin: 0 auto; }\n.umh-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }\n.umh-header h1 { color: var(--primary); display: flex; align-items: center; gap: 10px; margin: 0;}\n.umh-nav { display: flex; gap: 5px; }\n.umh-nav-button { \n    background: var(--white); \n    color: var(--text-light); \n    border: 1px solid var(--border); \n    padding: 8px 12px; \n    border-radius: 6px; \n    cursor: pointer; \n    display: flex; \n    align-items: center; \n    gap: 6px; \n    font-weight: 500;\n    transition: all 0.2s ease;\n}\n.umh-nav-button:hover { background-color: var(--secondary); color: var(--text); }\n.umh-nav-button.active { \n    background-color: var(--primary); \n    color: var(--white); \n    border-color: var(--primary); \n}\n.umh-component-container { \n    background: var(--white); \n    border-radius: 8px; \n    box-shadow: var(--shadow); \n    padding: 20px; \n    overflow: hidden;\n}\n.umh-table-toolbar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; flex-wrap: wrap; gap: 10px; }\n.umh-table-toolbar h2 { margin: 0; }\n.umh-button { \n    background: var(--primary); \n    color: var(--white); \n    border: none; \n    padding: 9px 15px; \n    border-radius: 6px; \n    cursor: pointer; \n    display: inline-flex; \n    align-items: center; \n    gap: 6px; \n    font-weight: 500;\n    transition: background-color 0.2s ease;\n}\n.umh-button:hover { background: var(--primary-dark); }\n.umh-button.secondary { background: var(--secondary); color: var(--text); border: 1px solid var(--border); }\n.umh-button.secondary:hover { background: var(--border); }\n.umh-button.danger { background: var(--danger); }\n.umh-button.danger:hover { background: #c53030; }\n.umh-table-wrapper { width: 100%; overflow-x: auto; }\n.umh-table { width: 100%; border-collapse: collapse; }\n.umh-table th, .umh-table td { \n    padding: 12px 15px; \n    border-bottom: 1px solid var(--border); \n    text-align: left; \n    white-space: nowrap; \n}\n.umh-table th { background: var(--secondary); font-weight: 600; }\n.umh-table tr:last-child td { border-bottom: none; }\n.umh-table tr:hover { background-color: var(--background); }\n.umh-table .actions { display: flex; gap: 8px; }\n.action-icon { cursor: pointer; transition: color 0.2s ease; }\n.action-icon:hover { color: var(--primary); }\n.action-icon.danger:hover { color: var(--danger); }\n.umh-modal-overlay { \n    position: fixed; \n    top: 0; left: 0; right: 0; bottom: 0; \n    background: rgba(0, 0, 0, 0.5); \n    display: flex; \n    justify-content: center; \n    padding-top: 50px;\n    z-index: 1000;\n    overflow-y: auto;\n}\n.umh-modal-content { \n    background: var(--white); \n    border-radius: 8px; \n    padding: 25px; \n    width: 90%; \n    max-width: 800px; \n    box-shadow: var(--shadow);\n    animation: modal-fade-in 0.3s ease;\n    margin-bottom: 50px;\n    max-height: 85vh;\n    display: flex;\n    flex-direction: column;\n}\n.umh-modal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }\n.umh-modal-header h3 { margin: 0; font-size: 1.4em; }\n.umh-modal-header .close-button { cursor: pointer; color: var(--text-light); }\n.umh-modal-body {\n    overflow-y: auto;\n    padding-right: 10px; /* for scrollbar */\n    margin-right: -10px;\n}\n.umh-modal-footer { margin-top: 20px; display: flex; justify-content: flex-end; gap: 10px; border-top: 1px solid var(--border); padding-top: 20px; }\n@keyframes modal-fade-in { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }\n.form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }\n.form-group { margin-bottom: 15px; }\n.form-group.full-width { grid-column: 1 / -1; }\n.form-group label { display: block; font-weight: 500; margin-bottom: 6px; font-size: 0.9em; }\n.form-group input, .form-group select, .form-group textarea { \n    width: 100%; \n    padding: 9px 12px; \n    border: 1px solid var(--border); \n    border-radius: 6px; \n    box-sizing: border-box; \n    transition: border-color 0.2s ease, box-shadow 0.2s ease;\n}\n.form-group input:focus, .form-group select:focus, .form-group textarea:focus {\n    outline: none;\n    border-color: var(--primary);\n    box-shadow: 0 0 0 2px rgba(0,124,186,0.2);\n}\n.form-group textarea { min-height: 100px; resize: vertical; }\n.form-group.checkbox-group { display: flex; align-items: center; gap: 8px; }\n.form-group.checkbox-group input { width: auto; }\n.form-group.checkbox-group label { margin-bottom: 0; font-weight: normal; }\n.loading-overlay { \n    position: absolute; \n    top: 0; left: 0; right: 0; bottom: 0; \n    background: rgba(255, 255, 255, 0.7); \n    display: flex; \n    justify-content: center; \n    align-items: center; \n    z-index: 900;\n}\n.loading-overlay .loader { animation: spin 1s linear infinite; }\n@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }\n.status-badge { \n    padding: 3px 8px; \n    border-radius: 12px; \n    font-size: 0.8em; \n    font-weight: 500; \n    white-space: nowrap;\n}\n.status-badge.pending, .status-badge.belum, .status-badge.belum_di_kirim { background: #fffbeb; color: #b45309; }\n.status-badge.approved, .status-badge.lunas, .status-badge.diterima, .status-badge.published, .status-badge.verified, .status-badge.lengkap { background: #ecfdf5; color: #067647; }\n.status-badge.rejected { background: #fef2f2; color: #b91c1c; }\n.status-badge.cicil, .status-badge.di_kirim { background: #eff6ff; color: #1d4ed8; }\n.status-badge.draft { background: #f3f4f6; color: #4b5563; }\n.dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }\n.stat-card {\n    background: var(--white);\n    border: 1px solid var(--border);\n    border-radius: 8px;\n    padding: 20px;\n    display: flex;\n    align-items: center;\n    gap: 16px;\n    transition: all 0.2s ease;\n}\n.stat-card:hover { box-shadow: var(--shadow); transform: translateY(-2px); }\n.stat-card-icon {\n    padding: 12px;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n.stat-card-icon.primary { background: #e0f2fe; color: #0284c7; }\n.stat-card-icon.success { background: #dcfce7; color: #16a34a; }\n.stat-card-icon.warning { background: #fefce8; color: #ca8a04; }\n.stat-card-icon.danger { background: #fef2f2; color: #dc2626; }\n.stat-card-info h3 { font-size: 1.8em; margin: 0 0 5px 0; }\n.stat-card-info p { margin: 0; color: var(--text-light); }\n.umh-sub-header {\n    display: flex;\n    gap: 15px;\n    align-items: center;\n    padding: 10px;\n    background-color: var(--secondary);\n    border-radius: 6px;\n    margin-bottom: 15px;\n    flex-wrap: wrap;\n}\n.umh-sub-header .filter-group { display: flex; align-items: center; gap: 8px; }\n.umh-sub-header .filter-group label { font-weight: 500; font-size: 0.9em; }\n.umh-sub-header .filter-group select, .umh-sub-header .filter-group input {\n    background-color: var(--white);\n    padding: 6px 10px;\n    font-size: 0.9em;\n    border: 1px solid var(--border);\n    border-radius: 6px;\n}\n.umh-sub-header .filter-group input {\n    padding-left: 30px; /* Ruang untuk ikon search */\n}\n.umh-sub-header .filter-group .search-wrapper {\n    position: relative;\n    display: flex;\n    align-items: center;\n}\n.umh-sub-header .filter-group .search-wrapper svg {\n    position: absolute;\n    left: 8px;\n    color: var(--text-light);\n}\n.payment-history-list { list-style: none; padding: 0; margin: 0; }\n.payment-history-list li {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 10px;\n    border-bottom: 1px solid var(--border);\n}\n.payment-history-list li:last-child { border-bottom: none; }\n.payment-info { display: flex; flex-direction: column; }\n.payment-info strong { font-size: 1.1em; }\n.payment-info span { font-size: 0.9em; color: var(--text-light); }\n.payment-actions { display: flex; gap: 8px; }\n.payment-form {\n    padding: 15px;\n    border: 1px solid var(--border);\n    border-radius: 6px;\n    margin-top: 20px;\n    background: var(--background);\n}\n.finance-summary {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n    gap: 15px;\n    margin-bottom: 20px;\n}\n.summary-card {\n    background: var(--secondary);\n    border-radius: 8px;\n    padding: 15px;\n    border: 1px solid var(--border);\n}\n.summary-card h4 {\n    margin: 0 0 10px 0;\n    font-size: 1em;\n    font-weight: 600;\n    color: var(--text-light);\n    display: flex;\n    align-items: center;\n    gap: 6px;\n}\n.summary-card p {\n    margin: 0;\n    font-size: 1.5em;\n    font-weight: 700;\n}\n.summary-card p.debit { color: var(--danger); }\n.summary-card p.kredit { color: var(--success); }\n.summary-card p.saldo { color: var(--primary); }\n",P=(0,t.createContext)(),T=e=>("number"!=typeof e&&(e=parseFloat(e)||0),new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e)),D=e=>{if(!e)return"-";try{const a=new Date(e);return isNaN(a.getTime())?"-":a.toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"})}catch(a){return e}},M=e=>{const a=(e||"pending").toLowerCase().replace(/ /g,"_").replace(/[^a-z0-9_]/g,"");return(0,t.createElement)("span",{className:`status-badge ${a}`},e.replace(/_/g," "))},j=({title:e,isOpen:a,onClose:n,children:r,footer:l,size:m="800px"})=>a?(0,t.createElement)("div",{className:"umh-modal-overlay",onClick:n},(0,t.createElement)("div",{className:"umh-modal-content",style:{maxWidth:m},onClick:e=>e.stopPropagation()},(0,t.createElement)("div",{className:"umh-modal-header"},(0,t.createElement)("h3",null,e),(0,t.createElement)(i,{className:"close-button",onClick:n})),(0,t.createElement)("div",{className:"umh-modal-body"},r),l&&(0,t.createElement)("div",{className:"umh-modal-footer"},l))):null,q=({onCancel:e,submitText:a="Simpan"})=>(0,t.createElement)("div",{className:"umh-modal-footer"},(0,t.createElement)("button",{type:"button",className:"umh-button secondary",onClick:e},"Batal"),(0,t.createElement)("button",{type:"submit",className:"umh-button"},a)),A=({title:e,value:a,icon:n,color:r})=>(0,t.createElement)("div",{className:"stat-card"},(0,t.createElement)("div",{className:`stat-card-icon ${r}`},n),(0,t.createElement)("div",{className:"stat-card-info"},(0,t.createElement)("h3",null,a),(0,t.createElement)("p",null,e))),L=()=>(0,t.createElement)("div",{className:"loading-overlay",style:{position:"relative",height:"300px"}},(0,t.createElement)(m,{size:32,className:"loader"})),J=({message:e})=>(0,t.createElement)("div",{style:{color:"var(--danger)",padding:"20px",border:"1px solid var(--danger)",borderRadius:"6px"}},(0,t.createElement)("strong",null,"Error:")," ",e),H=()=>{const{jamaah:e,packages:a,tasks:n,finance:r,loading:l,error:i}=(0,t.useContext)(P),m=(0,t.useMemo)(()=>({totalJamaah:e.filter(e=>"approved"===e.status).length,totalPackages:a.filter(e=>"published"===e.status).length,pendingJamaah:e.filter(e=>"pending"===e.status).length,pendingTasks:n.filter(e=>"completed"!==e.status).length,totalRevenue:r.filter(e=>"income"===e.transaction_type).reduce((e,a)=>e+parseFloat(a.amount),0),totalExpense:r.filter(e=>"expense"===e.transaction_type).reduce((e,a)=>e+parseFloat(a.amount),0)}),[e,a,n,r]);return l?(0,t.createElement)(L,null):i?(0,t.createElement)(J,{message:i}):(0,t.createElement)("div",{className:"dashboard-grid"},(0,t.createElement)(A,{title:"Jemaah (Approved)",value:m.totalJamaah,icon:(0,t.createElement)(o,{size:24}),color:"primary"}),(0,t.createElement)(A,{title:"Paket (Published)",value:m.totalPackages,icon:(0,t.createElement)(c,{size:24}),color:"success"}),(0,t.createElement)(A,{title:"Pemasukan",value:T(m.totalRevenue),icon:(0,t.createElement)(s,{size:24}),color:"success"}),(0,t.createElement)(A,{title:"Pengeluaran",value:T(m.totalExpense),icon:(0,t.createElement)(u,{size:24}),color:"danger"}),(0,t.createElement)(A,{title:"Jemaah (Pending)",value:m.pendingJamaah,icon:(0,t.createElement)(d,{size:24}),color:"warning"}),(0,t.createElement)(A,{title:"Tugas (Pending)",value:m.pendingTasks,icon:(0,t.createElement)(p,{size:24}),color:"warning"}))},F=({initialData:e,onSubmit:a,onCancel:n})=>{const[r,l]=(0,t.useState)({title:"",slug:"",status:"draft",promo:0,departure_city:"",duration:9,departure_date:"",slots_available:50,price_quad:"",price_triple:"",price_double:"",short_description:"",itinerary:"",meta_title:"",meta_description:"",...e});(0,t.useEffect)(()=>{if(e&&e.price_details)try{const a=JSON.parse(e.price_details);l(e=>({...e,price_quad:a.quad||"",price_triple:a.triple||"",price_double:a.double||""}))}catch(e){console.error("Gagal parse price_details JSON:",e)}e&&e.departure_date&&l(a=>({...a,departure_date:e.departure_date.split("T")[0]}))},[e]);const i=e=>{const{name:a,value:t,type:n,checked:r}=e.target;l(e=>({...e,[a]:"checkbox"===n?r?1:0:t}))};return(0,t.createElement)("form",{onSubmit:e=>{e.preventDefault();const t=JSON.stringify({quad:r.price_quad||0,triple:r.price_triple||0,double:r.price_double||0}),n={...r};delete n.price_quad,delete n.price_triple,delete n.price_double,n.price_details=t,a(n)}},(0,t.createElement)("div",{className:"form-grid"},(0,t.createElement)("div",{className:"form-group full-width"},(0,t.createElement)("label",null,"Judul Paket"),(0,t.createElement)("input",{type:"text",name:"title",value:r.title,onChange:i,required:!0,className:"form-group input"})),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Status"),(0,t.createElement)("select",{name:"status",value:r.status,onChange:i,className:"form-group select"},(0,t.createElement)("option",{value:"draft"},"Draft"),(0,t.createElement)("option",{value:"published"},"Published"),(0,t.createElement)("option",{value:"archived"},"Archived"))),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Slug (URL)"),(0,t.createElement)("input",{type:"text",name:"slug",value:r.slug,onChange:i,className:"form-group input"})),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Durasi (Hari)"),(0,t.createElement)("input",{type:"number",name:"duration",value:r.duration,onChange:i,required:!0,className:"form-group input"})),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Kota Keberangkatan"),(0,t.createElement)("input",{type:"text",name:"departure_city",value:r.departure_city,onChange:i,className:"form-group input"})),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Tanggal Keberangkatan (Opsional)"),(0,t.createElement)("input",{type:"date",name:"departure_date",value:r.departure_date,onChange:i,className:"form-group input"})),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Jumlah Slot Tersedia"),(0,t.createElement)("input",{type:"number",name:"slots_available",value:r.slots_available,onChange:i,className:"form-group input"})),(0,t.createElement)("div",{className:"form-group checkbox-group full-width",style:{marginTop:"10px"}},(0,t.createElement)("input",{type:"checkbox",id:"promo",name:"promo",checked:!!r.promo,onChange:i}),(0,t.createElement)("label",{htmlFor:"promo"},"Tandai sebagai Promo")),(0,t.createElement)("hr",{className:"full-width"}),(0,t.createElement)("h4",{className:"full-width",style:{margin:0}},"Detail Harga"),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Harga Quad (Rp)"),(0,t.createElement)("input",{type:"number",name:"price_quad",value:r.price_quad,onChange:i,className:"form-group input"})),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Harga Triple (Rp)"),(0,t.createElement)("input",{type:"number",name:"price_triple",value:r.price_triple,onChange:i,className:"form-group input"})),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Harga Double (Rp)"),(0,t.createElement)("input",{type:"number",name:"price_double",value:r.price_double,onChange:i,className:"form-group input"})),(0,t.createElement)("hr",{className:"full-width"}),(0,t.createElement)("h4",{className:"full-width",style:{margin:0}},"Deskripsi & SEO"),(0,t.createElement)("div",{className:"form-group full-width"},(0,t.createElement)("label",null,"Deskripsi Singkat"),(0,t.createElement)("textarea",{name:"short_description",value:r.short_description,onChange:i,className:"form-group textarea"})),(0,t.createElement)("div",{className:"form-group full-width"},(0,t.createElement)("label",null,"Itinerary (JSON/Text)"),(0,t.createElement)("textarea",{name:"itinerary",value:r.itinerary,onChange:i,className:"form-group textarea"})),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Meta Title (SEO)"),(0,t.createElement)("input",{type:"text",name:"meta_title",value:r.meta_title,onChange:i,className:"form-group input"})),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Meta Description (SEO)"),(0,t.createElement)("input",{type:"text",name:"meta_description",value:r.meta_description,onChange:i,className:"form-group input"}))),(0,t.createElement)(q,{onCancel:n}))},K=({initialData:e,onSubmit:a,onCancel:n,packages:r})=>{const[l,i]=(0,t.useState)({package_id:"",full_name:"",id_number:"",phone:"",email:"",address:"",gender:"male",birth_date:"",passport_number:"",status:"pending",total_price:"",equipment_status:"belum_di_kirim",is_passport_verified:!1,is_ktp_verified:!1,is_kk_verified:!1,is_meningitis_verified:!1,...e});(0,t.useEffect)(()=>{e&&i(a=>({...a,is_passport_verified:!!e.is_passport_verified,is_ktp_verified:!!e.is_ktp_verified,is_kk_verified:!!e.is_kk_verified,is_meningitis_verified:!!e.is_meningitis_verified,birth_date:e.birth_date?e.birth_date.split("T")[0]:""}))},[e]);const m=e=>{const{name:a,value:t,type:n,checked:r}=e.target;i(e=>({...e,[a]:"checkbox"===n?r:t}))};return(0,t.createElement)("form",{onSubmit:e=>{e.preventDefault(),a(l)}},(0,t.createElement)("div",{className:"form-grid"},(0,t.createElement)("div",{className:"form-group full-width"},(0,t.createElement)("label",null,"Paket yang Diambil"),(0,t.createElement)("select",{name:"package_id",value:l.package_id,onChange:m,required:!0,className:"form-group select"},(0,t.createElement)("option",{value:""},"Pilih Paket"),r.map(e=>(0,t.createElement)("option",{key:e.id,value:e.id},e.title," (",D(e.departure_date),")")))),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Nama Lengkap"),(0,t.createElement)("input",{type:"text",name:"full_name",value:l.full_name,onChange:m,required:!0,className:"form-group input"})),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"No. KTP (NIK)"),(0,t.createElement)("input",{type:"text",name:"id_number",value:l.id_number,onChange:m,required:!0,className:"form-group input"})),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"No. Telepon (WA)"),(0,t.createElement)("input",{type:"tel",name:"phone",value:l.phone,onChange:m,className:"form-group input"})),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Email"),(0,t.createElement)("input",{type:"email",name:"email",value:l.email,onChange:m,className:"form-group input"})),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Tanggal Lahir"),(0,t.createElement)("input",{type:"date",name:"birth_date",value:l.birth_date,onChange:m,className:"form-group input"})),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Jenis Kelamin"),(0,t.createElement)("select",{name:"gender",value:l.gender,onChange:m,className:"form-group select"},(0,t.createElement)("option",{value:"male"},"Laki-laki"),(0,t.createElement)("option",{value:"female"},"Perempuan"))),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"No. Paspor"),(0,t.createElement)("input",{type:"text",name:"passport_number",value:l.passport_number,onChange:m,className:"form-group input"})),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Alamat"),(0,t.createElement)("input",{type:"text",name:"address",value:l.address,onChange:m,className:"form-group input"})),(0,t.createElement)("hr",{className:"full-width"}),(0,t.createElement)("h4",{className:"full-width",style:{margin:0}},"Administrasi & Keuangan"),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Status Jemaah"),(0,t.createElement)("select",{name:"status",value:l.status,onChange:m,className:"form-group select"},(0,t.createElement)("option",{value:"pending"},"Pending"),(0,t.createElement)("option",{value:"approved"},"Approved"),(0,t.createElement)("option",{value:"rejected"},"Rejected"),(0,t.createElement)("option",{value:"waitlist"},"Waitlist"))),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Total Tagihan (Rp)"),(0,t.createElement)("input",{type:"number",name:"total_price",value:l.total_price,onChange:m,placeholder:"Otomatis jika kosong",className:"form-group input"})),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Status Perlengkapan"),(0,t.createElement)("select",{name:"equipment_status",value:l.equipment_status,onChange:m,className:"form-group select"},(0,t.createElement)("option",{value:"belum_di_kirim"},"Belum Dikirim"),(0,t.createElement)("option",{value:"di_kirim"},"Dikirim"),(0,t.createElement)("option",{value:"diterima"},"Diterima"))),(0,t.createElement)("hr",{className:"full-width"}),(0,t.createElement)("h4",{className:"full-width",style:{margin:0}},"Checklist Verifikasi Dokumen (Admin)"),(0,t.createElement)("div",{className:"form-group checkbox-group"},(0,t.createElement)("input",{type:"checkbox",id:"is_passport_verified",name:"is_passport_verified",checked:!!l.is_passport_verified,onChange:m}),(0,t.createElement)("label",{htmlFor:"is_passport_verified"},"Paspor Verified")),(0,t.createElement)("div",{className:"form-group checkbox-group"},(0,t.createElement)("input",{type:"checkbox",id:"is_ktp_verified",name:"is_ktp_verified",checked:!!l.is_ktp_verified,onChange:m}),(0,t.createElement)("label",{htmlFor:"is_ktp_verified"},"KTP Verified")),(0,t.createElement)("div",{className:"form-group checkbox-group"},(0,t.createElement)("input",{type:"checkbox",id:"is_kk_verified",name:"is_kk_verified",checked:!!l.is_kk_verified,onChange:m}),(0,t.createElement)("label",{htmlFor:"is_kk_verified"},"KK Verified")),(0,t.createElement)("div",{className:"form-group checkbox-group"},(0,t.createElement)("input",{type:"checkbox",id:"is_meningitis_verified",name:"is_meningitis_verified",checked:!!l.is_meningitis_verified,onChange:m}),(0,t.createElement)("label",{htmlFor:"is_meningitis_verified"},"Meningitis Verified"))),(0,t.createElement)(q,{onCancel:n}))},O=({isOpen:e,onClose:a,jamaah:n,api:r})=>{const{jamaahPayments:l,loadingPayments:i,fetchJamaahPayments:m,saveJamaahPayment:o,deleteJamaahPayment:c}=r,[s,u]=(0,t.useState)({amount:"",description:"",payment_date:(new Date).toISOString().split("T")[0]});(0,t.useEffect)(()=>{m(e&&n?n.id:null)},[e,n,m]);const d=e=>{const{name:a,value:t}=e.target;u(e=>({...e,[a]:t}))};if(!n)return null;const p=(n.total_price||0)-(n.amount_paid||0);return(0,t.createElement)(j,{title:`Riwayat Pembayaran: ${n.full_name}`,isOpen:e,onClose:a},i&&(0,t.createElement)("p",null,"Memuat riwayat..."),(0,t.createElement)("div",{className:"finance-summary",style:{marginBottom:"20px"}},(0,t.createElement)("div",{className:"summary-card"},(0,t.createElement)("h4",null,"Total Tagihan"),(0,t.createElement)("p",null,T(n.total_price))),(0,t.createElement)("div",{className:"summary-card"},(0,t.createElement)("h4",null,"Total Terbayar (Verified)"),(0,t.createElement)("p",{className:"kredit"},T(n.amount_paid))),(0,t.createElement)("div",{className:"summary-card"},(0,t.createElement)("h4",null,"Sisa Tagihan"),(0,t.createElement)("p",{className:"debit"},T(p)))),(0,t.createElement)("h4",{style:{margin:"15px 0 10px 0"}},"Riwayat Transaksi"),(0,t.createElement)("ul",{className:"payment-history-list"},0===l.length&&!i&&(0,t.createElement)("li",null,"Tidak ada riwayat pembayaran."),l.map(e=>(0,t.createElement)("li",{key:e.id},(0,t.createElement)("div",{className:"payment-info"},(0,t.createElement)("strong",null,T(e.amount)),(0,t.createElement)("span",null,e.description||"Pembayaran"," - ",D(e.payment_date))),(0,t.createElement)("div",{className:"payment-actions"},M(e.status),"pending"===e.status&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)("button",{className:"umh-button",style:{padding:"4px 8px",fontSize:"0.8em",background:"var(--success)"},onClick:()=>(async e=>{if(confirm("Anda yakin ingin MEMVERIFIKASI pembayaran ini?"))try{await o(n.id,{...e,status:"verified"})}catch(e){alert(`Gagal verifikasi: ${e.message}`)}})(e)},(0,t.createElement)(g,{size:14})," Verifikasi"),(0,t.createElement)("button",{className:"umh-button secondary",style:{padding:"4px 8px",fontSize:"0.8em",background:"var(--warning)"},onClick:()=>(async e=>{if(confirm("Anda yakin ingin MENOLAK pembayaran ini?"))try{await o(n.id,{...e,status:"rejected"})}catch(e){alert(`Gagal menolak: ${e.message}`)}})(e)},(0,t.createElement)(h,{size:14})," Tolak")),(0,t.createElement)(E,{size:18,className:"action-icon danger",onClick:()=>(async e=>{if(confirm("Anda yakin ingin MENGHAPUS riwayat pembayaran ini? Ini tidak bisa dikembalikan."))try{await c(n.id,e)}catch(e){alert(`Gagal menghapus: ${e.message}`)}})(e.id)}))))),(0,t.createElement)("form",{onSubmit:async e=>{if(e.preventDefault(),s.amount&&s.payment_date)try{await o(n.id,s),u({amount:"",description:"",payment_date:(new Date).toISOString().split("T")[0]})}catch(e){alert(`Gagal menyimpan: ${e.message}`)}else alert("Jumlah dan Tanggal wajib diisi.")},className:"payment-form"},(0,t.createElement)("h4",{style:{margin:"0 0 15px 0"}},"Tambah Pembayaran Baru"),(0,t.createElement)("div",{className:"form-grid"},(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Jumlah (Rp)"),(0,t.createElement)("input",{type:"number",name:"amount",value:s.amount,onChange:d,required:!0,className:"form-group input"})),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Tanggal Bayar"),(0,t.createElement)("input",{type:"date",name:"payment_date",value:s.payment_date,onChange:d,required:!0,className:"form-group input"}))),(0,t.createElement)("div",{className:"form-group full-width"},(0,t.createElement)("label",null,"Keterangan (Cth: DP, Cicilan 1, Pelunasan)"),(0,t.createElement)("input",{type:"text",name:"description",value:s.description,onChange:d,className:"form-group input"})),(0,t.createElement)("button",{type:"submit",className:"umh-button"},(0,t.createElement)(y,{size:16})," Tambah")))},R=({initialData:e,onSubmit:a,onCancel:n,accounts:r})=>{const[l,i]=(0,t.useState)({transaction_date:(new Date).toISOString().split("T")[0],description:"",transaction_type:"expense",amount:"",account_id:"",...e}),m=e=>{const{name:a,value:t}=e.target;i(e=>({...e,[a]:t}))};return(0,t.createElement)("form",{onSubmit:e=>{e.preventDefault(),a(l)}},(0,t.createElement)("div",{className:"form-grid"},(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Tanggal"),(0,t.createElement)("input",{type:"date",name:"transaction_date",value:l.transaction_date,onChange:m,required:!0,className:"form-group input"})),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Akun"),(0,t.createElement)("select",{name:"account_id",value:l.account_id,onChange:m,required:!0,className:"form-group select"},(0,t.createElement)("option",{value:""},"Pilih Akun Kas"),r.map(e=>(0,t.createElement)("option",{key:e.id,value:e.id},e.name)))),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Jenis Transaksi"),(0,t.createElement)("select",{name:"transaction_type",value:l.transaction_type,onChange:m,required:!0,className:"form-group select"},(0,t.createElement)("option",{value:"expense"},"Debit (Pengeluaran)"),(0,t.createElement)("option",{value:"income"},"Kredit (Pemasukan)"))),(0,t.createElement)("div",{className:"form-group"},(0,t.createElement)("label",null,"Jumlah (Rp)"),(0,t.createElement)("input",{type:"number",name:"amount",value:l.amount,onChange:m,required:!0,className:"form-group input"})),(0,t.createElement)("div",{className:"form-group full-width"},(0,t.createElement)("label",null,"Deskripsi"),(0,t.createElement)("input",{type:"text",name:"description",value:l.description,onChange:m,className:"form-group input"}))),(0,t.createElement)(q,{onCancel:n}))},I=()=>{const{packages:e,savePackage:a,deletePackage:n,loading:r,error:l,fetchData:i}=(0,t.useContext)(P),[m,o]=(0,t.useState)(!1),[c,s]=(0,t.useState)(null),u=(e=null)=>{s(e),o(!0)},d=()=>{o(!1),s(null)};return(0,t.createElement)("div",{className:"umh-component-container"},(0,t.createElement)("div",{className:"umh-table-toolbar"},(0,t.createElement)("h2",null,"Manajemen Paket"),(0,t.createElement)("button",{className:"umh-button",onClick:()=>u()},(0,t.createElement)(y,{size:16})," Tambah Paket")),l&&(0,t.createElement)(J,{message:l}),r&&(0,t.createElement)(L,null),!r&&!l&&(0,t.createElement)("div",{className:"umh-table-wrapper"},(0,t.createElement)("table",{className:"umh-table"},(0,t.createElement)("thead",null,(0,t.createElement)("tr",null,(0,t.createElement)("th",null,"Judul Paket"),(0,t.createElement)("th",null,"Status"),(0,t.createElement)("th",null,"Tgl Berangkat"),(0,t.createElement)("th",null,"Durasi"),(0,t.createElement)("th",null,"Kota"),(0,t.createElement)("th",null,"Harga Mulai (Quad)"),(0,t.createElement)("th",null,"Slot"),(0,t.createElement)("th",null,"Aksi"))),(0,t.createElement)("tbody",null,0===e.length&&(0,t.createElement)("tr",null,(0,t.createElement)("td",{colSpan:"8"},"Tidak ada paket.")),e.map(e=>(0,t.createElement)("tr",{key:e.id},(0,t.createElement)("td",null,e.title),(0,t.createElement)("td",null,M(e.status)),(0,t.createElement)("td",null,D(e.departure_date)),(0,t.createElement)("td",null,e.duration," Hari"),(0,t.createElement)("td",null,e.departure_city),(0,t.createElement)("td",null,T((e=>{if(!e)return 0;try{const a=JSON.parse(e);return a.quad||a.triple||a.double||0}catch(e){return 0}})(e.price_details))),(0,t.createElement)("td",null,e.slots_filled||0," / ",e.slots_available||0),(0,t.createElement)("td",{className:"actions"},(0,t.createElement)(b,{size:18,className:"action-icon",onClick:()=>u(e)}),(0,t.createElement)(E,{size:18,className:"action-icon danger",onClick:()=>(async e=>{if(window.confirm("Yakin ingin menghapus paket ini?"))try{await n(e)}catch(e){alert(`Error: ${e.message}`)}})(e.id)}))))))),(0,t.createElement)(j,{title:c?"Edit Paket":"Tambah Paket Baru",isOpen:m,onClose:d},(0,t.createElement)(F,{initialData:c,onSubmit:async e=>{try{await a(e),d()}catch(e){alert(`Error: ${e.message}`)}},onCancel:d})))},B=({onOpenPayments:e})=>{const{jamaah:a,packages:n,saveJamaah:r,deleteJamaah:l,loading:i,error:m,fetchData:o}=(0,t.useContext)(P),[c,s]=(0,t.useState)(!1),[d,p]=(0,t.useState)(null),[g,h]=(0,t.useState)(""),[y,k]=(0,t.useState)(""),x=(e=null)=>{p(e),s(!0)},N=()=>{s(!1),p(null)},_=(0,t.useMemo)(()=>{const e=y.toLowerCase();return a.filter(a=>(!g||a.package_id==g)&&(!y||a.full_name?.toLowerCase().includes(e)||a.id_number?.toLowerCase().includes(e)||a.phone?.toLowerCase().includes(e)||a.email?.toLowerCase().includes(e)))},[a,g,y]);return(0,t.createElement)("div",{className:"umh-component-container"},(0,t.createElement)("div",{className:"umh-table-toolbar"},(0,t.createElement)("h2",null,"Manajemen Jemaah"),(0,t.createElement)("button",{className:"umh-button",onClick:()=>x()},(0,t.createElement)(f,{size:16})," Tambah Jemaah")),(0,t.createElement)("div",{className:"umh-sub-header"},(0,t.createElement)("div",{className:"filter-group"},(0,t.createElement)("label",{htmlFor:"search-jemaah"},"Cari Jemaah:"),(0,t.createElement)("div",{className:"search-wrapper"},(0,t.createElement)(v,{size:16}),(0,t.createElement)("input",{id:"search-jemaah",type:"text",placeholder:"Nama, NIK, HP, Email...",value:y,onChange:e=>k(e.target.value)}))),(0,t.createElement)("div",{className:"filter-group"},(0,t.createElement)("label",{htmlFor:"filter-paket"},"Filter Paket:"),(0,t.createElement)("select",{id:"filter-paket",value:g,onChange:e=>h(e.target.value)},(0,t.createElement)("option",{value:""},"Semua Paket"),n.map(e=>(0,t.createElement)("option",{key:e.id,value:e.id},e.title," (",D(e.departure_date),")"))))),m&&(0,t.createElement)(J,{message:m}),i&&(0,t.createElement)(L,null),!i&&!m&&(0,t.createElement)("div",{className:"umh-table-wrapper"},(0,t.createElement)("table",{className:"umh-table"},(0,t.createElement)("thead",null,(0,t.createElement)("tr",null,(0,t.createElement)("th",null,"Nama"),(0,t.createElement)("th",null,"Paket"),(0,t.createElement)("th",null,"Status Bayar"),(0,t.createElement)("th",null,"Sisa Tagihan"),(0,t.createElement)("th",null,"Dokumen"),(0,t.createElement)("th",null,"Perlengkapan"),(0,t.createElement)("th",null,"Kontak"),(0,t.createElement)("th",null,"Aksi"))),(0,t.createElement)("tbody",null,0===_.length&&(0,t.createElement)("tr",null,(0,t.createElement)("td",{colSpan:"8",className:"text-center p-4"},"Tidak ada jemaah yang cocok.")),_.map(a=>{const n=(a.total_price||0)-(a.amount_paid||0);return(0,t.createElement)("tr",{key:a.id},(0,t.createElement)("td",null,a.full_name),(0,t.createElement)("td",null,a.package_name||"..."),(0,t.createElement)("td",null,M(a.payment_status)),(0,t.createElement)("td",{style:{color:n>0?"var(--danger)":"var(--success)"}},T(n)),(0,t.createElement)("td",null,(e=>{let a=0;return e.is_passport_verified&&a++,e.is_ktp_verified&&a++,e.is_kk_verified&&a++,e.is_meningitis_verified&&a++,M(4===a?"Lengkap":a>0?`${a}/4`:"Belum")})(a)),(0,t.createElement)("td",null,M(a.equipment_status)),(0,t.createElement)("td",null,a.phone),(0,t.createElement)("td",{className:"actions"},(0,t.createElement)("button",{className:"umh-button",style:{padding:"4px 8px",fontSize:"0.8em"},onClick:()=>e(a)},(0,t.createElement)(u,{size:14})," Bayar"),(0,t.createElement)(b,{size:18,className:"action-icon",onClick:()=>x(a)}),(0,t.createElement)(E,{size:18,className:"action-icon danger",onClick:()=>(async e=>{if(window.confirm("Yakin ingin menghapus jemaah ini? Semua data pembayaran terkait akan ikut terhapus."))try{await l(e)}catch(e){alert(`Error: ${e.message}`)}})(a.id)})))})))),(0,t.createElement)(j,{title:d?"Edit Jemaah":"Tambah Jemaah Baru",isOpen:c,onClose:N},(0,t.createElement)(K,{initialData:d,onSubmit:async e=>{try{await r(e),N()}catch(e){alert(`Error: ${e.message}`)}},onCancel:N,packages:n})))},$=()=>{const{finance:e,financeAccounts:a,saveFinance:n,deleteFinance:r,loading:l,error:i,fetchData:m}=(0,t.useContext)(P),[o,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)(null),[p,h]=(0,t.useState)(""),f=(e=null)=>{d(e),c(!0)},v=()=>{c(!1),d(null)},x=(0,t.useMemo)(()=>{const a=e.filter(e=>!p||e.account_id==p).sort((e,a)=>new Date(e.transaction_date)-new Date(a.transaction_date));let t=0,n=0,r=0;return{transactions:a.map(e=>{const a=parseFloat(e.amount)||0;let l=0,i=0;return"expense"===e.transaction_type?(l=a,t+=a,r-=a):(i=a,n+=a,r+=a),{...e,debit:l,kredit:i,balance:r}}).reverse(),totalDebit:t,totalKredit:n,saldoAkhir:r}},[e,p]);return(0,t.createElement)("div",{className:"umh-component-container"},(0,t.createElement)("div",{className:"umh-table-toolbar"},(0,t.createElement)("h2",null,"Buku Kas"),(0,t.createElement)("button",{className:"umh-button",onClick:()=>f()},(0,t.createElement)(y,{size:16})," Catat Transaksi")),(0,t.createElement)("div",{className:"umh-sub-header"},(0,t.createElement)("div",{className:"filter-group"},(0,t.createElement)("label",null,"Tampilkan Akun:"),(0,t.createElement)("select",{value:p,onChange:e=>h(e.target.value)},(0,t.createElement)("option",{value:""},"Semua Akun Kas"),a.map(e=>(0,t.createElement)("option",{key:e.id,value:e.id},e.name))))),(0,t.createElement)("div",{className:"finance-summary"},(0,t.createElement)("div",{className:"summary-card"},(0,t.createElement)("h4",null,(0,t.createElement)(g,{size:16})," Total Kredit (Masuk)"),(0,t.createElement)("p",{className:"kredit"},T(x.totalKredit))),(0,t.createElement)("div",{className:"summary-card"},(0,t.createElement)("h4",null,(0,t.createElement)(k,{size:16})," Total Debit (Keluar)"),(0,t.createElement)("p",{className:"debit"},T(x.totalDebit))),(0,t.createElement)("div",{className:"summary-card"},(0,t.createElement)("h4",null,(0,t.createElement)(s,{size:16})," Saldo Akhir"),(0,t.createElement)("p",{className:"saldo"},T(x.saldoAkhir)))),i&&(0,t.createElement)(J,{message:i}),l&&(0,t.createElement)(L,null),!l&&!i&&(0,t.createElement)("div",{className:"umh-table-wrapper"},(0,t.createElement)("table",{className:"umh-table"},(0,t.createElement)("thead",null,(0,t.createElement)("tr",null,(0,t.createElement)("th",null,"Tanggal"),(0,t.createElement)("th",null,"Deskripsi"),(0,t.createElement)("th",null,"Akun"),(0,t.createElement)("th",null,"Debit"),(0,t.createElement)("th",null,"Kredit"),(0,t.createElement)("th",null,"Saldo"),(0,t.createElement)("th",null,"Aksi"))),(0,t.createElement)("tbody",null,0===x.transactions.length&&(0,t.createElement)("tr",null,(0,t.createElement)("td",{colSpan:"7"},"Tidak ada transaksi.")),x.transactions.map(e=>{const n=a.find(a=>a.id==e.account_id);return(0,t.createElement)("tr",{key:e.id},(0,t.createElement)("td",null,D(e.transaction_date)),(0,t.createElement)("td",null,e.description),(0,t.createElement)("td",null,n?n.name:"N/A"),(0,t.createElement)("td",null,e.debit?T(e.debit):"-"),(0,t.createElement)("td",null,e.kredit?T(e.kredit):"-"),(0,t.createElement)("td",null,T(e.balance)),(0,t.createElement)("td",{className:"actions"},(0,t.createElement)(b,{size:18,className:"action-icon",onClick:()=>f(e)}),(0,t.createElement)(E,{size:18,className:"action-icon danger",onClick:()=>(async e=>{if(window.confirm("Yakin ingin menghapus transaksi ini?"))try{await r(e)}catch(e){alert(`Error: ${e.message}`)}})(e.id)})))})))),(0,t.createElement)(j,{title:u?"Edit Transaksi":"Catat Transaksi Baru",isOpen:o,onClose:v},(0,t.createElement)(R,{initialData:u,onSubmit:async e=>{try{await n(e),v()}catch(e){alert(`Error: ${e.message}`)}},onCancel:v,accounts:a})))},V=()=>(0,t.createElement)("div",{className:"umh-component-container"},(0,t.createElement)("h2",null,"Manajemen HR"),(0,t.createElement)("p",null,"Fitur HR (Gaji, Absensi, Karyawan) sedang dalam pengembangan.")),U=()=>(0,t.createElement)("div",{className:"umh-component-container"},(0,t.createElement)("h2",null,"Manajemen Marketing"),(0,t.createElement)("p",null,"Fitur Marketing (Leads, Campaign) sedang dalam pengembangan.")),G=()=>(0,t.createElement)("div",{className:"umh-component-container"},(0,t.createElement)("h2",null,"Log Aktivitas"),(0,t.createElement)("p",null,"Fitur Log sedang dalam pengembangan.")),W=()=>{const{currentUser:e,isLoading:a,login:n,logout:r,api:l}=(0,t.useContext)(P),[i,o]=(0,t.useState)("dashboard"),[u,d]=(0,t.useState)(!1),[p,g]=(0,t.useState)(null),h=e=>{g(e),d(!0)};if(a)return(0,t.createElement)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"}},(0,t.createElement)(m,{size:48,className:"loader"}));if(!e)return(0,t.createElement)("div",null,"Login Form Here...");const E=({view:e,icon:a,label:n})=>(0,t.createElement)("button",{className:"umh-nav-button "+(i===e?"active":""),onClick:()=>o(e)},a," ",n);return(0,t.createElement)(t.Fragment,null,(0,t.createElement)("style",null,z),(0,t.createElement)("div",{className:"umh-header"},(0,t.createElement)("h1",null,(0,t.createElement)(x,null)," Umroh Manager"),(0,t.createElement)("div",{className:"flex items-center gap-4"},(0,t.createElement)("span",{className:"text-sm text-gray-600"},"Halo, ",(0,t.createElement)("strong",null,e?.full_name||e?.email)," (",e?.role,")"),(0,t.createElement)("button",{className:"umh-nav-button",onClick:r},(0,t.createElement)(N,{size:16})," Logout"))),(0,t.createElement)("nav",{className:"umh-nav",style:{marginBottom:"20px"}},(0,t.createElement)(E,{view:"dashboard",icon:(0,t.createElement)(_,{size:16}),label:"Dashboard"}),(0,t.createElement)(E,{view:"packages",icon:(0,t.createElement)(c,{size:16}),label:"Paket"}),(0,t.createElement)(E,{view:"jamaah",icon:(0,t.createElement)(w,{size:16}),label:"Jemaah"}),(0,t.createElement)(E,{view:"finance",icon:(0,t.createElement)(s,{size:16}),label:"Keuangan"}),(0,t.createElement)(E,{view:"hr",icon:(0,t.createElement)(x,{size:16}),label:"HR"}),(0,t.createElement)(E,{view:"marketing",icon:(0,t.createElement)(C,{size:16}),label:"Marketing"}),(0,t.createElement)(E,{view:"logs",icon:(0,t.createElement)(S,{size:16}),label:"Logs"})),(0,t.createElement)("div",null,(()=>{switch(i){case"dashboard":default:return(0,t.createElement)(H,null);case"packages":return(0,t.createElement)(I,null);case"jamaah":return(0,t.createElement)(B,{onOpenPayments:h});case"finance":return(0,t.createElement)($,null);case"hr":return(0,t.createElement)(V,null);case"marketing":return(0,t.createElement)(U,null);case"logs":return(0,t.createElement)(G,null)}})()),(0,t.createElement)(O,{isOpen:u,onClose:()=>{g(null),d(!1)},jamaah:p,api:(0,t.useContext)(P)}))},Y=()=>{const{currentUser:e,isLoading:a,login:n}=(0,t.useContext)(P);return a?(0,t.createElement)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",fontFamily:"Inter, sans-serif"}},(0,t.createElement)(m,{size:48,className:"loader"}),(0,t.createElement)("style",null,z)," "):e?(0,t.createElement)(W,null):(0,t.createElement)(t.Fragment,null,(0,t.createElement)("style",null,z),(0,t.createElement)("div",null,"Loading Login..."))};document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("umh-admin-app");if(e){if(!document.getElementById("tailwind-css")){const e=document.createElement("script");e.id="tailwind-css",e.src="https://cdn.tailwindcss.com",document.head.appendChild(e)}(0,n.H)(e).render((0,t.createElement)(AuthProvider,null,(0,t.createElement)(Y,null)))}})})();