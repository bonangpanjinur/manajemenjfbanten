(()=>{"use strict";var e={338:(e,t,a)=>{var l=a(795);t.H=l.createRoot,l.hydrateRoot},795:e=>{e.exports=window.ReactDOM}},t={};function a(l){var r=t[l];if(void 0!==r)return r.exports;var n=t[l]={exports:{}};return e[l](n,n.exports,a),n.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const l=window.React;var r=a.n(l),n=a(338);const s=(0,l.createContext)(),c=()=>(0,l.useContext)(s),m=({children:e})=>{const t=window.umh_wp_data||{},[a,r]=(0,l.useState)(t.user||null),[n,c]=(0,l.useState)(t.nonce||""),[m,i]=(0,l.useState)(localStorage.getItem("umh_token")||""),[o,d]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{t.nonce?console.log("✅ UMH: Terhubung sebagai",t.user?.name):console.warn("⚠️ UMH: Nonce tidak ditemukan. Pastikan plugin aktif.")},[]),(0,l.createElement)(s.Provider,{value:{currentUser:a,nonce:n,token:m,login:(e,t)=>{r(e),i(t),localStorage.setItem("umh_token",t)},logout:()=>{r(null),i(""),localStorage.removeItem("umh_token")},loading:o,isAdmin:t.is_wp_admin,urls:{admin:t.adminUrl,print:t.printUrl}}},e)},i=(0,l.createContext)(),o=()=>(0,l.useContext)(i),d=({children:e})=>{const{token:t,nonce:a}=c(),[r,n]=(0,l.useState)(!1),[s,m]=(0,l.useState)(null),o=async(e,l="GET",r=null,s=!1)=>{n(!0),m(null);try{const n={"X-WP-Nonce":a,Accept:"application/json"};t&&(n.Authorization=`Bearer ${t}`),s||(n["Content-Type"]="application/json");const c={method:l,headers:n};r&&(c.body=s?r:JSON.stringify(r));const m=await fetch(`/wp-json/umh/v1${e}`,c),i=await m.text();let o;try{o=JSON.parse(i)}catch(e){throw console.error("Invalid JSON Response:",i),new Error("Terjadi kesalahan server (Invalid JSON)")}if(!m.ok)throw new Error(o.message||o.code||"Terjadi kesalahan pada request API");return o}catch(e){throw console.error("API Error:",e),m(e.message),e}finally{n(!1)}},d={get:e=>o(e,"GET"),post:(e,t)=>o(e,"POST",t),put:(e,t)=>o(e,"PUT",t),delete:e=>o(e,"DELETE")};return(0,l.createElement)(i.Provider,{value:{loading:r,error:s,apiCall:o,api:d,getPackages:e=>o(`/packages?${new URLSearchParams(e)}`),deletePackage:e=>o(`/packages/${e}`,"DELETE"),createJamaah:e=>o("/jamaah","POST",e),updateJamaah:(e,t)=>o(`/jamaah/${e}`,"PUT",t),getJamaahList:e=>o(`/jamaah?${new URLSearchParams(e)}`),createPayment:e=>o("/finance/payments","POST",e),createCashTransaction:e=>o("/finance/cash-flow","POST",e),createOrUpdate:(e,t,a=null)=>a?o(`/${e}/${a}`,"PUT",t):o(`/${e}`,"POST",t),getDashboardStats:()=>o("/stats/dashboard"),fetchLogs:()=>o("/logs")}},e)},u=({size:e="md",color:t="blue"})=>(0,l.createElement)("svg",{className:`animate-spin ${{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12",xl:"h-16 w-16"}[e]} ${{blue:"text-blue-600",white:"text-white",gray:"text-gray-600"}[t]}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},(0,l.createElement)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,l.createElement)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),p=({text:e="Memuat data..."})=>(0,l.createElement)("div",{className:"flex flex-col items-center justify-center p-10 h-64 w-full"},(0,l.createElement)(u,{size:"lg",color:"blue"}),(0,l.createElement)("p",{className:"mt-4 text-gray-500 font-medium animate-pulse"},e)),g=({title:e,value:t,icon:a,color:r})=>{const n={blue:"bg-blue-500",green:"bg-green-500",yellow:"bg-yellow-500",indigo:"bg-indigo-500",red:"bg-red-500",gray:"bg-gray-500"}[r]||"bg-blue-500";return(0,l.createElement)("div",{className:"bg-white overflow-hidden shadow rounded-lg"},(0,l.createElement)("div",{className:"p-5"},(0,l.createElement)("div",{className:"flex items-center"},(0,l.createElement)("div",{className:"flex-shrink-0"},(0,l.createElement)("div",{className:`rounded-md p-3 ${n} text-white flex items-center justify-center h-12 w-12`},(0,l.createElement)("span",{className:"text-2xl leading-none"},a))),(0,l.createElement)("div",{className:"ml-5 w-0 flex-1"},(0,l.createElement)("dl",null,(0,l.createElement)("dt",{className:"text-sm font-medium text-gray-500 truncate uppercase"},e),(0,l.createElement)("dd",null,(0,l.createElement)("div",{className:"text-lg font-bold text-gray-900"},t)))))))};var b={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},h=l.createContext&&l.createContext(b),y=["attr","size","title"];function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},E.apply(this,arguments)}function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,l)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach(function(t){var l,r,n,s;l=e,r=t,n=a[t],(r="symbol"==typeof(s=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r))?s:s+"")in l?Object.defineProperty(l,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[r]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function v(e){return e&&e.map((e,t)=>l.createElement(e.tag,f({key:t},e.attr),v(e.child)))}function N(e){return t=>l.createElement(w,E({attr:f({},e.attr)},t),v(e.child))}function w(e){var t=t=>{var a,{attr:r,size:n,title:s}=e,c=function(e,t){if(null==e)return{};var a,l,r=function(e,t){if(null==e)return{};var a={};for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){if(t.indexOf(l)>=0)continue;a[l]=e[l]}return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(l=0;l<n.length;l++)a=n[l],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,y),m=n||t.size||"1em";return t.className&&(a=t.className),e.className&&(a=(a?a+" ":"")+e.className),l.createElement("svg",E({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,c,{className:a,style:f(f({color:e.color||t.color},t.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),s&&l.createElement("title",null,s),e.children)};return void 0!==h?l.createElement(h.Consumer,null,e=>t(e)):t(b)}function k(e){return N({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(e)}function _(e){return N({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"},child:[]}]})(e)}function S(e){return N({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"},child:[]}]})(e)}function C(e){return N({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 448H16c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h608c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM80.55 341.27c6.28 6.84 15.1 10.72 24.33 10.71l130.54-.18a65.62 65.62 0 0 0 29.64-7.12l290.96-147.65c26.74-13.57 50.71-32.94 67.02-58.31 18.31-28.48 20.3-49.09 13.07-63.65-7.21-14.57-24.74-25.27-58.25-27.45-29.85-1.94-59.54 5.92-86.28 19.48l-98.51 49.99-218.7-82.06a17.799 17.799 0 0 0-18-1.11L90.62 67.29c-10.67 5.41-13.25 19.65-5.17 28.53l156.22 98.1-103.21 52.38-72.35-36.47a17.804 17.804 0 0 0-16.07.02L9.91 230.22c-10.44 5.3-13.19 19.12-5.57 28.08l76.21 82.97z"},child:[]}]})(e)}function j(e){return N({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function P(e){return N({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(e)}function z(e){return N({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4zm323-128.4l-27.8-28.1c-4.6-4.7-12.1-4.7-16.8-.1l-104.8 104-45.5-45.8c-4.6-4.7-12.1-4.7-16.8-.1l-28.1 27.9c-4.7 4.6-4.7 12.1-.1 16.8l81.7 82.3c4.6 4.7 12.1 4.7 16.8.1l141.3-140.2c4.6-4.7 4.7-12.2.1-16.8z"},child:[]}]})(e)}function M(e){return N({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M461.2 128H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h384c8.84 0 16-7.16 16-16 0-26.51-21.49-48-48-48H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h397.2c28.02 0 50.8-21.53 50.8-48V176c0-26.47-22.78-48-50.8-48zM416 336c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"},child:[]}]})(e)}const D=()=>{const{getDashboardStats:e,apiCall:t,loading:a}=o(),{currentUser:r}=c(),[n,s]=(0,l.useState)(null),[m,i]=(0,l.useState)(""),[d,u]=(0,l.useState)(!1);if((0,l.useEffect)(()=>{e().then(e=>s(e)).catch(console.error)},[]),a||!n)return(0,l.createElement)(p,{text:"Menyiapkan Dashboard..."});const b=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(e);return(0,l.createElement)("div",{className:"p-6 space-y-8 bg-gray-50 min-h-screen font-sans"},(0,l.createElement)("div",{className:"flex justify-between items-end"},(0,l.createElement)("div",null,(0,l.createElement)("h1",{className:"text-3xl font-extrabold text-gray-900"},"Dashboard"),(0,l.createElement)("p",{className:"text-gray-500 mt-1"},"Selamat datang, ",(0,l.createElement)("span",{className:"font-semibold text-blue-600"},r?.full_name),"!"))),(0,l.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5"},(0,l.createElement)(g,{title:"Total Jamaah",value:n.cards.total_jamaah,icon:(0,l.createElement)(z,null),color:"blue"}),(0,l.createElement)(g,{title:"Jamaah Bulan Ini",value:n.cards.new_jamaah_month,icon:(0,l.createElement)(k,null),color:"green"}),(0,l.createElement)(g,{title:"Total Pemasukan",value:b(n.cards.revenue),icon:(0,l.createElement)(S,null),color:"yellow"}),(0,l.createElement)(g,{title:"Saldo Kas",value:b(n.cards.profit),icon:(0,l.createElement)(M,null),color:"indigo"})),(0,l.createElement)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8"},(0,l.createElement)("div",{className:"lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"},(0,l.createElement)("div",{className:"p-5 border-b border-gray-100 flex items-center gap-2"},(0,l.createElement)(C,{className:"text-blue-500"}),(0,l.createElement)("h3",{className:"font-bold text-gray-800"},"Jadwal Keberangkatan Terdekat")),(0,l.createElement)("div",{className:"overflow-x-auto"},(0,l.createElement)("table",{className:"w-full text-sm text-left"},(0,l.createElement)("thead",{className:"bg-gray-50 text-gray-500"},(0,l.createElement)("tr",null,(0,l.createElement)("th",{className:"p-4 font-medium"},"Nama Paket"),(0,l.createElement)("th",{className:"p-4 font-medium"},"Maskapai"),(0,l.createElement)("th",{className:"p-4 font-medium"},"Tanggal"),(0,l.createElement)("th",{className:"p-4 font-medium text-center"},"Jamaah"))),(0,l.createElement)("tbody",{className:"divide-y"},n.upcoming?.map((e,t)=>(0,l.createElement)("tr",{key:t,className:"hover:bg-gray-50 transition"},(0,l.createElement)("td",{className:"p-4 font-medium text-gray-900"},e.name),(0,l.createElement)("td",{className:"p-4 text-gray-600"},e.airline_name),(0,l.createElement)("td",{className:"p-4 text-blue-600 font-medium"},e.departure_date),(0,l.createElement)("td",{className:"p-4 text-center"},(0,l.createElement)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-bold"},e.jamaah_count)))))))),(0,l.createElement)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 flex flex-col"},(0,l.createElement)("div",{className:"p-5 border-b border-gray-100 bg-gradient-to-r from-blue-600 to-blue-700 rounded-t-xl"},(0,l.createElement)("h3",{className:"font-bold text-white"},"Laporan Kinerja Harian"),(0,l.createElement)("p",{className:"text-blue-100 text-xs mt-1"},"Wajib diisi sebelum pulang.")),(0,l.createElement)("div",{className:"p-5 flex-1"},(0,l.createElement)("form",{onSubmit:async e=>{if(e.preventDefault(),m.trim()){u(!0);try{await t("/reports","POST",{user_id:r?.id,content:m}),alert("Laporan kerja berhasil dikirim!"),i("")}catch(e){alert("Gagal: "+e.message)}finally{u(!1)}}},className:"flex flex-col h-full"},(0,l.createElement)("textarea",{className:"w-full p-3 rounded-lg border border-gray-300 text-sm flex-1 mb-4 resize-none",rows:"6",placeholder:"Tuliskan hasil pekerjaan hari ini...",value:m,onChange:e=>i(e.target.value),required:!0}),(0,l.createElement)("button",{type:"submit",disabled:d,className:"w-full bg-blue-600 text-white font-bold py-2.5 rounded-lg shadow-md disabled:bg-gray-400"},"Kirim Laporan"))))))},O=({isOpen:e,onClose:t,title:a,children:r,size:n="md",noPadding:s=!1})=>((0,l.useEffect)(()=>{const a=e=>{"Escape"===e.key&&t()};return e&&window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[e,t]),e?(0,l.createElement)("div",{className:"fixed inset-0 z-50 overflow-y-auto"},(0,l.createElement)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),(0,l.createElement)("div",{className:"flex items-center justify-center min-h-screen p-4"},(0,l.createElement)("div",{className:`relative bg-white rounded-xl shadow-2xl w-full transform transition-all ${{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"}[n]}`,onClick:e=>e.stopPropagation()},(0,l.createElement)("div",{className:"flex justify-between items-center p-5 border-b border-gray-100"},(0,l.createElement)("h3",{className:"text-xl font-bold text-gray-800"},a),(0,l.createElement)("button",{onClick:t,className:"text-gray-400 hover:text-red-500 transition-colors p-1 rounded-full hover:bg-red-50"},(0,l.createElement)(j,null))),(0,l.createElement)("div",{className:s?"":"p-6"},r)))):null),T=({label:e,type:t="text",className:a="",...r})=>(0,l.createElement)("div",{className:"w-full"},e&&(0,l.createElement)("label",{className:"block text-sm font-medium text-gray-700 mb-1"},e),(0,l.createElement)("input",{type:t,className:`w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition text-sm ${a}`,...r})),A=({label:e,children:t,className:a="",...r})=>(0,l.createElement)("div",{className:"w-full"},e&&(0,l.createElement)("label",{className:"block text-sm font-medium text-gray-700 mb-1"},e),(0,l.createElement)("select",{className:`w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition text-sm bg-white ${a}`,...r},t)),L=({label:e,className:t="",...a})=>(0,l.createElement)("div",{className:"w-full"},e&&(0,l.createElement)("label",{className:"block text-sm font-medium text-gray-700 mb-1"},e),(0,l.createElement)("textarea",{className:`w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition text-sm resize-none ${t}`,...a})),K=({children:e,className:t="",type:a="button",...r})=>(0,l.createElement)("button",{type:a,className:`px-4 py-2 rounded-lg font-bold shadow-sm transition focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed ${t}`,...r},e),H=({mode:e="operational",onSuccess:t,onCancel:a})=>{const{createCashTransaction:r,createPayment:n,getJamaahList:s}=o(),[c,m]=(0,l.useState)(!1),[i,d]=(0,l.useState)([]),[u,p]=(0,l.useState)({type:"operational"===e?"out":"in",category:"",amount:"",transaction_date:(new Date).toISOString().split("T")[0],description:"",proof_file:"",jamaah_id:"",payment_method:"Transfer"});(0,l.useEffect)(()=>{"payment"===e&&s({payment_status:"unpaid_partial"}).then(e=>d(Array.isArray(e)?e:[])).catch(console.error)},[e]);const g=e=>p({...u,[e.target.name]:e.target.value});return(0,l.createElement)("form",{onSubmit:async a=>{a.preventDefault(),m(!0);try{if("operational"===e)await r(u);else{if(!u.jamaah_id)throw new Error("Pilih Jamaah");await n({jamaah_id:u.jamaah_id,amount:u.amount,payment_date:u.transaction_date,payment_method:u.payment_method,description:u.description,proof_file:u.proof_file})}t()}catch(e){alert(e.message)}finally{m(!1)}},className:"space-y-4"},"payment"===e&&(0,l.createElement)("div",{className:"bg-blue-50 p-3 rounded"},(0,l.createElement)("label",{className:"block text-sm font-bold mb-1"},"Pilih Jamaah"),(0,l.createElement)("select",{name:"jamaah_id",value:u.jamaah_id,onChange:g,className:"w-full border p-2 rounded",required:!0},(0,l.createElement)("option",{value:""},"-- Cari Jamaah --"),i.map(e=>(0,l.createElement)("option",{key:e.id,value:e.id},e.full_name," (Sisa: ",parseInt(e.remaining_payment).toLocaleString(),")")))),"operational"===e&&(0,l.createElement)("div",{className:"flex gap-4"},(0,l.createElement)("label",null,(0,l.createElement)("input",{type:"radio",name:"type",value:"out",checked:"out"===u.type,onChange:g})," Pengeluaran"),(0,l.createElement)("label",null,(0,l.createElement)("input",{type:"radio",name:"type",value:"in",checked:"in"===u.type,onChange:g})," Pemasukan Lain")),(0,l.createElement)("div",{className:"grid grid-cols-2 gap-4"},(0,l.createElement)(T,{label:"Tanggal",type:"date",name:"transaction_date",value:u.transaction_date,onChange:g,required:!0}),(0,l.createElement)(T,{label:"Nominal",type:"number",name:"amount",value:u.amount,onChange:g,required:!0})),"operational"===e&&(0,l.createElement)(T,{label:"Kategori",name:"category",value:u.category,onChange:g,required:!0}),(0,l.createElement)(L,{label:"Keterangan",name:"description",value:u.description,onChange:g}),(0,l.createElement)("div",{className:"flex justify-end gap-2 pt-4"},(0,l.createElement)(K,{type:"button",variant:"secondary",onClick:a},"Batal"),(0,l.createElement)(K,{type:"submit",disabled:c},"Simpan")))},B=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},$=(...e)=>e.filter((e,t,a)=>Boolean(e)&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),J=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var q={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const I=(0,l.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:n="",children:s,iconNode:c,...m},i)=>(0,l.createElement)("svg",{ref:i,...q,width:t,height:t,stroke:e,strokeWidth:r?24*Number(a)/Number(t):a,className:$("lucide",n),...!s&&!J(m)&&{"aria-hidden":"true"},...m},[...c.map(([e,t])=>(0,l.createElement)(e,t)),...Array.isArray(s)?s:[s]])),U=(e,t)=>{const a=(0,l.forwardRef)(({className:a,...r},n)=>{return(0,l.createElement)(I,{ref:n,iconNode:t,className:$(`lucide-${s=B(e),s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,a),...r});var s});return a.displayName=B(e),a},R=U("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]),V=U("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]),F=()=>{const{api:e}=o(),[t,a]=(0,l.useState)([]),[r,n]=(0,l.useState)(!0),[s,c]=(0,l.useState)(!1),[m,i]=(0,l.useState)("income"),d=async()=>{n(!0);try{const t=await e.get("/finance/transactions");a(t.data||[])}catch(e){console.error(e)}finally{n(!1)}};(0,l.useEffect)(()=>{d()},[]);const u=e=>{i(e),c(!0)},p=t.filter(e=>"in"===e.type).reduce((e,t)=>e+parseFloat(t.amount),0),g=t.filter(e=>"out"===e.type).reduce((e,t)=>e+parseFloat(t.amount),0);return(0,l.createElement)("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen"},(0,l.createElement)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4"},(0,l.createElement)("h1",{className:"text-2xl font-bold text-gray-800"},"Keuangan & Kas"),(0,l.createElement)("div",{className:"flex gap-2"},(0,l.createElement)("button",{onClick:()=>u("expense"),className:"bg-red-100 text-red-700 px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-red-200"},(0,l.createElement)(R,{size:16})," Pengeluaran / Operasional"),(0,l.createElement)("button",{onClick:()=>u("loan"),className:"bg-yellow-100 text-yellow-700 px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-yellow-200"},(0,l.createElement)(V,{size:16})," Kasbon Karyawan"))),(0,l.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},(0,l.createElement)("div",{className:"bg-white p-4 rounded-xl shadow border-l-4 border-green-500"},(0,l.createElement)("p",{className:"text-gray-500 text-sm"},"Total Pemasukan"),(0,l.createElement)("h3",{className:"text-2xl font-bold text-gray-800"},"Rp ",p.toLocaleString())),(0,l.createElement)("div",{className:"bg-white p-4 rounded-xl shadow border-l-4 border-red-500"},(0,l.createElement)("p",{className:"text-gray-500 text-sm"},"Total Pengeluaran"),(0,l.createElement)("h3",{className:"text-2xl font-bold text-gray-800"},"Rp ",g.toLocaleString())),(0,l.createElement)("div",{className:"bg-white p-4 rounded-xl shadow border-l-4 border-blue-500"},(0,l.createElement)("p",{className:"text-gray-500 text-sm"},"Saldo Akhir"),(0,l.createElement)("h3",{className:"text-2xl font-bold text-gray-800"},"Rp ",(p-g).toLocaleString()))),(0,l.createElement)("div",{className:"bg-white rounded-xl shadow overflow-hidden"},(0,l.createElement)("table",{className:"w-full text-left text-sm"},(0,l.createElement)("thead",{className:"bg-gray-50 border-b uppercase text-gray-500"},(0,l.createElement)("tr",null,(0,l.createElement)("th",{className:"p-4"},"Tanggal"),(0,l.createElement)("th",{className:"p-4"},"Kategori"),(0,l.createElement)("th",{className:"p-4"},"Keterangan"),(0,l.createElement)("th",{className:"p-4 text-right"},"Nominal"))),(0,l.createElement)("tbody",{className:"divide-y"},t.map(e=>(0,l.createElement)("tr",{key:e.id},(0,l.createElement)("td",{className:"p-4"},e.transaction_date),(0,l.createElement)("td",{className:"p-4"},(0,l.createElement)("span",{className:"px-2 py-1 rounded text-xs font-bold "+("in"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800")},e.category)),(0,l.createElement)("td",{className:"p-4"},e.description),(0,l.createElement)("td",{className:"p-4 text-right font-mono font-medium "+("in"===e.type?"text-green-600":"text-red-600")},"in"===e.type?"+":"-"," Rp ",parseFloat(e.amount).toLocaleString())))))),(0,l.createElement)(O,{isOpen:s,onClose:()=>c(!1),title:"loan"===m?"Catat Kasbon Karyawan":"Catat Pengeluaran Operasional"},(0,l.createElement)(H,{type:m,onSuccess:()=>{c(!1),d()},onCancel:()=>c(!1)})))},W=({initialData:e,onSuccess:t,onCancel:a})=>{const{apiCall:r}=o(),[n,s]=(0,l.useState)(!1),[c,m]=(0,l.useState)(e||{name:"",contact:"",source:"wa",status:"new",notes:""}),i=e=>{m({...c,[e.target.name]:e.target.value})};return(0,l.createElement)("form",{onSubmit:async a=>{a.preventDefault(),s(!0);try{e?.id?await r(`/leads/${e.id}`,"PUT",c):await r("/leads","POST",c),t()}catch(e){alert(e.message)}finally{s(!1)}},className:"space-y-4"},(0,l.createElement)(T,{label:"Nama Calon Jamaah",name:"name",value:c.name,onChange:i,required:!0}),(0,l.createElement)(T,{label:"Kontak (WA/HP)",name:"contact",value:c.contact,onChange:i,required:!0}),(0,l.createElement)("div",{className:"grid grid-cols-2 gap-4"},(0,l.createElement)(A,{label:"Sumber",name:"source",value:c.source,onChange:i},(0,l.createElement)("option",{value:"wa"},"WhatsApp"),(0,l.createElement)("option",{value:"ig"},"Instagram"),(0,l.createElement)("option",{value:"fb"},"Facebook"),(0,l.createElement)("option",{value:"tiktok"},"TikTok"),(0,l.createElement)("option",{value:"offline"},"Offline / Walk-in")),(0,l.createElement)(A,{label:"Status",name:"status",value:c.status,onChange:i},(0,l.createElement)("option",{value:"new"},"Baru Dihubungi"),(0,l.createElement)("option",{value:"prospect"},"Prospek"),(0,l.createElement)("option",{value:"closing"},"Closing (Jadi Jamaah)"),(0,l.createElement)("option",{value:"lost"},"Lost (Batal)"))),(0,l.createElement)(L,{label:"Catatan",name:"notes",value:c.notes,onChange:i,rows:3}),(0,l.createElement)("div",{className:"flex justify-end gap-2 pt-2"},(0,l.createElement)(K,{onClick:a,className:"bg-gray-200 text-gray-700"},"Batal"),(0,l.createElement)(K,{type:"submit",className:"bg-blue-600 text-white"},"Simpan")))},G=U("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Y=U("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),X=()=>{const{api:e}=o(),[t,a]=(0,l.useState)([]),[r,n]=(0,l.useState)(!0),[s,c]=(0,l.useState)(!1),[m,i]=(0,l.useState)(null),d=async()=>{n(!0);try{const t=await e.get("/leads");a(t.data||[])}catch(e){console.error("Gagal load leads:",e)}finally{n(!1)}};return(0,l.useEffect)(()=>{d()},[]),(0,l.createElement)("div",{className:"p-6 space-y-6"},(0,l.createElement)("div",{className:"flex justify-between items-center"},(0,l.createElement)("h1",{className:"text-2xl font-bold text-gray-800"},"Marketing Leads"),(0,l.createElement)("button",{onClick:()=>{i(null),c(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 flex items-center gap-2"},(0,l.createElement)(G,{size:18})," Tambah Lead")),r?(0,l.createElement)(p,null):(0,l.createElement)("div",{className:"bg-white rounded-xl shadow overflow-hidden"},(0,l.createElement)("table",{className:"w-full text-left text-sm"},(0,l.createElement)("thead",{className:"bg-gray-50 border-b uppercase text-gray-500"},(0,l.createElement)("tr",null,(0,l.createElement)("th",{className:"p-4"},"Nama"),(0,l.createElement)("th",{className:"p-4"},"Kontak"),(0,l.createElement)("th",{className:"p-4"},"Sumber"),(0,l.createElement)("th",{className:"p-4"},"Status"),(0,l.createElement)("th",{className:"p-4 text-right"},"Aksi"))),(0,l.createElement)("tbody",{className:"divide-y"},t.map(e=>(0,l.createElement)("tr",{key:e.id,className:"hover:bg-gray-50"},(0,l.createElement)("td",{className:"p-4 font-medium"},e.name),(0,l.createElement)("td",{className:"p-4"},e.contact),(0,l.createElement)("td",{className:"p-4 capitalize"},e.source),(0,l.createElement)("td",{className:"p-4"},(0,l.createElement)("span",{className:"px-2 py-1 rounded text-xs font-bold "+("closing"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800")},e.status)),(0,l.createElement)("td",{className:"p-4 text-right flex justify-end gap-2"},(0,l.createElement)("button",{onClick:()=>{i(e),c(!0)},className:"text-blue-600"},(0,l.createElement)(Y,{size:18})))))))),(0,l.createElement)(O,{isOpen:s,onClose:()=>c(!1),title:m?"Edit Lead":"Input Lead Baru"},(0,l.createElement)(W,{initialData:m,onSuccess:()=>{c(!1),d()},onCancel:()=>c(!1)})))},Z=U("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),Q=()=>{const{api:e}=o(),[t,a]=(0,l.useState)([]),[r,n]=(0,l.useState)(!0),[s,c]=(0,l.useState)(!1),[m,i]=(0,l.useState)(null),[d,u]=(0,l.useState)({name:"",position:"",phone:"",email:"",salary:0,status:"active"}),g=async()=>{n(!0);try{const t=await e.get("/employees");a(t.data||[])}catch(e){console.error(e)}finally{n(!1)}};return(0,l.useEffect)(()=>{g()},[]),(0,l.createElement)("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen"},(0,l.createElement)("div",{className:"flex justify-between items-center"},(0,l.createElement)("h1",{className:"text-2xl font-bold text-gray-800"},"Data HR & Karyawan"),(0,l.createElement)("button",{onClick:()=>{u({name:"",position:"",phone:"",email:"",salary:0,status:"active"}),i(null),c(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-blue-700"},(0,l.createElement)(G,{size:18})," Tambah Karyawan")),r?(0,l.createElement)(p,null):(0,l.createElement)("div",{className:"bg-white rounded-xl shadow overflow-hidden"},(0,l.createElement)("table",{className:"w-full text-left text-sm"},(0,l.createElement)("thead",{className:"bg-gray-50 border-b uppercase text-gray-500"},(0,l.createElement)("tr",null,(0,l.createElement)("th",{className:"p-4"},"Nama"),(0,l.createElement)("th",{className:"p-4"},"Jabatan"),(0,l.createElement)("th",{className:"p-4"},"Kontak"),(0,l.createElement)("th",{className:"p-4"},"Gaji"),(0,l.createElement)("th",{className:"p-4"},"Status"),(0,l.createElement)("th",{className:"p-4 text-right"},"Aksi"))),(0,l.createElement)("tbody",{className:"divide-y"},t.map(t=>(0,l.createElement)("tr",{key:t.id},(0,l.createElement)("td",{className:"p-4 font-medium"},t.name),(0,l.createElement)("td",{className:"p-4"},(0,l.createElement)("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded text-xs"},t.position)),(0,l.createElement)("td",{className:"p-4"},t.phone),(0,l.createElement)("td",{className:"p-4"},"Rp ",parseFloat(t.salary).toLocaleString()),(0,l.createElement)("td",{className:"p-4"},t.status),(0,l.createElement)("td",{className:"p-4 text-right flex justify-end gap-2"},(0,l.createElement)("button",{onClick:()=>{return u(e=t),i(e.id),void c(!0);var e},className:"text-indigo-600"},(0,l.createElement)(Y,{size:16})),(0,l.createElement)("button",{onClick:()=>(async t=>{if(confirm("Hapus data karyawan ini?"))try{await e.delete(`/employees/${t}`),g()}catch(e){alert("Gagal hapus")}})(t.id),className:"text-red-600"},(0,l.createElement)(Z,{size:16})))))))),s&&(0,l.createElement)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},(0,l.createElement)("div",{className:"bg-white rounded-xl p-6 w-full max-w-md shadow-xl"},(0,l.createElement)("h2",{className:"text-xl font-bold mb-4"},m?"Edit Karyawan":"Karyawan Baru"),(0,l.createElement)("form",{onSubmit:async t=>{t.preventDefault();try{m?await e.put(`/employees/${m}`,d):await e.post("/employees",d),c(!1),g()}catch(e){alert("Gagal menyimpan data: "+e.message)}},className:"space-y-3"},(0,l.createElement)("input",{className:"w-full border p-2 rounded",placeholder:"Nama Lengkap",required:!0,value:d.name,onChange:e=>u({...d,name:e.target.value})}),(0,l.createElement)("input",{className:"w-full border p-2 rounded",placeholder:"Jabatan (cth: Manager, Staff, Driver)",required:!0,value:d.position,onChange:e=>u({...d,position:e.target.value})}),(0,l.createElement)("div",{className:"grid grid-cols-2 gap-3"},(0,l.createElement)("input",{className:"w-full border p-2 rounded",placeholder:"No HP",value:d.phone,onChange:e=>u({...d,phone:e.target.value})}),(0,l.createElement)("input",{className:"w-full border p-2 rounded",placeholder:"Gaji Pokok",type:"number",value:d.salary,onChange:e=>u({...d,salary:e.target.value})})),(0,l.createElement)("div",{className:"flex justify-end gap-2 pt-4"},(0,l.createElement)("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 bg-gray-200 rounded"},"Batal"),(0,l.createElement)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded"},"Simpan"))))))},ee=({initialData:e,onSuccess:t,onCancel:a})=>{const{createJamaah:r,updateJamaah:n,getPackages:s}=o(),[c,m]=(0,l.useState)([]),[i,d]=(0,l.useState)(!1),[u,p]=(0,l.useState)([]),[g,b]=(0,l.useState)({full_name:"",package_id:"",selected_room_type:"",package_price:0,gender:"L",birth_date:"",age:"",passport_number:"",passport_issued:"",passport_expiry:"",phone_number:"",address_details:{detail:"",city:"",province:""},document_status:{ktp:!1,passport:!1,kk:!1,meningitis:!1},files:{ktp:"",passport:"",kk:"",meningitis:""},pic_id:""});(0,l.useEffect)(()=>{s({status:"active"}).then(e=>m(e||[])).catch(e=>console.error("Gagal load paket:",e)),e&&b({...e,address_details:e.address_details||{detail:"",city:"",province:""},document_status:e.document_status||{ktp:!1,passport:!1,kk:!1,meningitis:!1},age:h(e.birth_date)})},[e]),(0,l.useEffect)(()=>{if(g.package_id&&c.length>0){const e=c.find(e=>e.id==g.package_id);if(e){const t="string"==typeof e.pricing_variants?JSON.parse(e.pricing_variants):e.pricing_variants;p(t||[])}}},[g.package_id,c]),(0,l.useEffect)(()=>{if(g.selected_room_type&&u.length>0){const e=u.find(e=>e.type===g.selected_room_type);e&&b(t=>({...t,package_price:e.price}))}},[g.selected_room_type,u]);const h=e=>{if(!e)return"";const t=new Date,a=new Date(e);let l=t.getFullYear()-a.getFullYear();const r=t.getMonth()-a.getMonth();return(r<0||0===r&&t.getDate()<a.getDate())&&l--,l},y=e=>{const{name:t,value:a}=e.target;if(t.startsWith("addr_")){const e=t.replace("addr_","");b(t=>({...t,address_details:{...t.address_details,[e]:a}}))}else b("birth_date"===t?e=>({...e,birth_date:a,age:h(a)}):e=>({...e,[t]:a}))};return(0,l.createElement)("form",{onSubmit:async a=>{a.preventDefault(),d(!0);try{e?.id?await n(e.id,g):await r(g),t()}catch(e){alert("Gagal menyimpan: "+e.message)}finally{d(!1)}},className:"bg-white p-6 rounded-xl shadow-lg space-y-6 h-full overflow-y-auto"},(0,l.createElement)("div",{className:"flex justify-between items-center border-b pb-3"},(0,l.createElement)("h3",{className:"text-xl font-bold text-gray-800"},e?"Edit Data Jamaah":"Input Jamaah Baru"),(0,l.createElement)("button",{type:"button",onClick:a,className:"text-gray-400 hover:text-gray-600 transition"},"✕")),(0,l.createElement)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100"},(0,l.createElement)("h4",{className:"text-blue-800 font-bold mb-3 text-sm uppercase tracking-wide"},"1. Detail Paket & Kamar"),(0,l.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,l.createElement)(A,{label:"Pilih Paket Keberangkatan",name:"package_id",value:g.package_id,onChange:y,required:!0},(0,l.createElement)("option",{value:""},"-- Cari Paket --"),c.map(e=>(0,l.createElement)("option",{key:e.id,value:e.id},e.name," (",e.departure_date,")"))),(0,l.createElement)("div",null,(0,l.createElement)(A,{label:"Tipe Kamar (Varian)",name:"selected_room_type",value:g.selected_room_type,onChange:y,required:!0,disabled:!g.package_id},(0,l.createElement)("option",{value:""},"-- Pilih Tipe Kamar --"),u.map((e,t)=>(0,l.createElement)("option",{key:t,value:e.type},e.type," - Rp ",parseInt(e.price).toLocaleString("id-ID")))),g.package_price>0&&(0,l.createElement)("div",{className:"mt-2 p-2 bg-white rounded border border-green-200 flex justify-between items-center"},(0,l.createElement)("span",{className:"text-xs text-gray-500"},"Harga Deal:"),(0,l.createElement)("span",{className:"text-sm font-bold text-green-700"},"Rp ",parseInt(g.package_price).toLocaleString("id-ID")))))),(0,l.createElement)("div",{className:"space-y-4 border-t pt-4"},(0,l.createElement)("h4",{className:"text-gray-800 font-bold text-sm uppercase tracking-wide"},"2. Data Diri Jamaah"),(0,l.createElement)(T,{label:"Nama Lengkap (Sesuai Paspor)",name:"full_name",value:g.full_name,onChange:y,required:!0,placeholder:"Contoh: MUHAMMAD ABDULLAH"}),(0,l.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,l.createElement)(A,{label:"Jenis Kelamin",name:"gender",value:g.gender,onChange:y},(0,l.createElement)("option",{value:"L"},"Laki-laki"),(0,l.createElement)("option",{value:"P"},"Perempuan")),(0,l.createElement)("div",{className:"flex gap-2 items-end"},(0,l.createElement)("div",{className:"w-2/3"},(0,l.createElement)(T,{label:"Tanggal Lahir",type:"date",name:"birth_date",value:g.birth_date,onChange:y,required:!0})),(0,l.createElement)("div",{className:"w-1/3"},(0,l.createElement)(T,{label:"Umur",value:g.age?`${g.age} Thn`:"",readOnly:!0,className:"bg-gray-100 text-center font-bold text-gray-600"})))),(0,l.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,l.createElement)(T,{label:"No. WhatsApp",name:"phone_number",value:g.phone_number,onChange:y,required:!0,placeholder:"0812xxx"}),(0,l.createElement)(T,{label:"Kota Asal",name:"addr_city",value:g.address_details.city,onChange:y,placeholder:"Contoh: Serang"})),(0,l.createElement)(L,{label:"Alamat Lengkap (KTP)",name:"addr_detail",value:g.address_details.detail,onChange:y,rows:2,placeholder:"Nama Jalan, RT/RW, Kelurahan, Kecamatan..."})),(0,l.createElement)("div",{className:"space-y-4 border-t pt-4"},(0,l.createElement)("h4",{className:"text-gray-800 font-bold text-sm uppercase tracking-wide"},"3. Data Paspor"),(0,l.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},(0,l.createElement)(T,{label:"Nomor Paspor",name:"passport_number",value:g.passport_number,onChange:y,placeholder:"X000000"}),(0,l.createElement)(T,{label:"Tanggal Issued",type:"date",name:"passport_issued",value:g.passport_issued,onChange:y}),(0,l.createElement)("div",null,(0,l.createElement)(T,{label:"Tanggal Expired",type:"date",name:"passport_expiry",value:g.passport_expiry,onChange:y}),(e=>{if(!e)return null;const t=new Date,a=new Date(e)-t,r=Math.ceil(a/864e5);return r<0?(0,l.createElement)("span",{className:"text-red-600 text-xs block mt-1 font-medium"},"⚠️ Paspor Sudah Kedaluwarsa!"):r<180?(0,l.createElement)("span",{className:"text-red-600 text-xs block mt-1 font-medium"},"⚠️ Paspor akan expired ","<"," 6 bulan. Segera perpanjang."):null})(g.passport_expiry)))),(0,l.createElement)("div",{className:"bg-gray-50 p-4 rounded border border-gray-200"},(0,l.createElement)("h4",{className:"text-gray-800 font-bold mb-3 text-sm uppercase tracking-wide"},"4. Kelengkapan Dokumen"),(0,l.createElement)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4"},["ktp","kk","passport","meningitis"].map(e=>(0,l.createElement)("div",{key:e,className:"flex flex-col items-center justify-center p-3 border-2 border-dashed border-gray-300 rounded-lg bg-white hover:border-blue-400 transition cursor-pointer"},(0,l.createElement)("p",{className:"text-xs font-bold uppercase mb-2 text-gray-600"},e),g.document_status[e]?(0,l.createElement)("div",{className:"text-green-600 flex flex-col items-center animate-pulse"},(0,l.createElement)("span",{className:"text-2xl mb-1"},"✅"),(0,l.createElement)("span",{className:"text-[10px] font-bold"},"TERUPLOAD"),(0,l.createElement)("button",{type:"button",className:"text-blue-500 text-[10px] flex items-center gap-1 mt-1 hover:underline"},(0,l.createElement)(_,null)," Lihat")):(0,l.createElement)("div",{className:"text-gray-400 flex flex-col items-center"},(0,l.createElement)(P,{className:"text-xl mb-1"}),(0,l.createElement)("span",{className:"text-[10px]"},"Belum Ada"),(0,l.createElement)("span",{className:"text-[10px] text-blue-500 mt-1"},"Klik Upload")))))),(0,l.createElement)("div",{className:"flex justify-end gap-3 pt-4 border-t sticky bottom-0 bg-white"},(0,l.createElement)("button",{type:"button",onClick:a,className:"px-5 py-2.5 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 font-medium transition"},"Batal"),(0,l.createElement)("button",{type:"submit",disabled:i,className:"px-6 py-2.5 rounded-lg bg-blue-600 text-white hover:bg-blue-700 font-bold shadow-md transition flex items-center gap-2 disabled:opacity-70"},i?(0,l.createElement)(l.Fragment,null,(0,l.createElement)("svg",{className:"animate-spin h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},(0,l.createElement)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,l.createElement)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Menyimpan..."):"Simpan Data Jamaah")))},te=U("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),ae=U("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),le=()=>{const{getJamaahList:e,loading:t}=o(),[a,r]=(0,l.useState)([]),[n,s]=(0,l.useState)(!1),[c,m]=(0,l.useState)(null),[i,d]=(0,l.useState)(""),u=async()=>{try{const t=await e({search:i});r(Array.isArray(t)?t:[])}catch(e){console.error(e)}};return(0,l.useEffect)(()=>{u()},[i]),(0,l.createElement)("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen"},(0,l.createElement)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4"},(0,l.createElement)("h1",{className:"text-2xl font-bold text-gray-800"},"Data Jemaah"),(0,l.createElement)("div",{className:"flex gap-3 w-full md:w-auto"},(0,l.createElement)("div",{className:"relative flex-1 md:w-64"},(0,l.createElement)(te,{className:"absolute left-3 top-2.5 text-gray-400",size:18}),(0,l.createElement)("input",{type:"text",placeholder:"Cari nama / paspor...",className:"pl-10 pr-4 py-2 border rounded-lg w-full focus:ring-2 focus:ring-blue-500 outline-none",value:i,onChange:e=>d(e.target.value)})),(0,l.createElement)("button",{onClick:()=>{m(null),s(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-blue-700 shadow"},(0,l.createElement)(G,{size:18})," ",(0,l.createElement)("span",{className:"hidden sm:inline"},"Tambah Jemaah")))),t?(0,l.createElement)(p,null):(0,l.createElement)("div",{className:"bg-white rounded-xl shadow overflow-hidden border"},(0,l.createElement)("table",{className:"w-full text-left text-sm"},(0,l.createElement)("thead",{className:"bg-gray-50 border-b text-gray-500 uppercase"},(0,l.createElement)("tr",null,(0,l.createElement)("th",{className:"p-4"},"Nama Lengkap"),(0,l.createElement)("th",{className:"p-4"},"Paket"),(0,l.createElement)("th",{className:"p-4"},"Keberangkatan"),(0,l.createElement)("th",{className:"p-4"},"Status"),(0,l.createElement)("th",{className:"p-4 text-right"},"Aksi"))),(0,l.createElement)("tbody",{className:"divide-y divide-gray-100"},0===a.length&&(0,l.createElement)("tr",null,(0,l.createElement)("td",{colSpan:"5",className:"p-6 text-center text-gray-400"},"Belum ada data jemaah.")),a.map(e=>(0,l.createElement)("tr",{key:e.id,className:"hover:bg-gray-50"},(0,l.createElement)("td",{className:"p-4"},(0,l.createElement)("div",{className:"font-medium text-gray-900"},e.full_name),(0,l.createElement)("div",{className:"text-xs text-gray-500"},e.passport_number||"No Passport")),(0,l.createElement)("td",{className:"p-4 text-gray-700"},e.package_name||"-"),(0,l.createElement)("td",{className:"p-4 text-gray-600"},e.departure_date||"-"),(0,l.createElement)("td",{className:"p-4"},(0,l.createElement)("span",{className:"px-2 py-1 rounded-full text-xs font-bold "+("lunas"===e.payment_status?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700")},e.payment_status||"Pending")),(0,l.createElement)("td",{className:"p-4 text-right flex justify-end gap-2"},(0,l.createElement)("button",{onClick:()=>(e=>{const t=`/wp-admin/admin-post.php?action=umh_print_registration&id=${e}`;window.open(t,"_blank","width=900,height=800")})(e.booking_id||e.id),className:"p-2 text-gray-500 hover:text-blue-600 bg-gray-100 rounded hover:bg-blue-50 transition",title:"Cetak Formulir"},(0,l.createElement)(ae,{size:16})),(0,l.createElement)("button",{onClick:()=>{m(e),s(!0)},className:"text-indigo-600 hover:underline text-sm font-medium"},"Edit"))))))),(0,l.createElement)(O,{isOpen:n,onClose:()=>s(!1),title:c?"Edit Jemaah":"Registrasi Jemaah Baru"},(0,l.createElement)(ee,{initialData:c,onSuccess:()=>{s(!1),u()},onCancel:()=>s(!1)})))},re=U("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ne=({initialData:e,onSuccess:t,onCancel:a})=>{const{api:r}=o(),[n,s]=(0,l.useState)(e||{name:"",category_id:"",airline_id:"",departure_date:"",duration_days:9,quota:45,itinerary_file:""}),[c,m]=(0,l.useState)(e?.hotels||[]),[i,d]=(0,l.useState)(e?.pricing_variants||[{type:"Quad",price:0},{type:"Triple",price:0},{type:"Double",price:0}]),[u,p]=(0,l.useState)([]),[g,b]=(0,l.useState)([]),[h,y]=(0,l.useState)([]);(0,l.useEffect)(()=>{(async()=>{try{const[e,t,a]=await Promise.all([r.get("/hotels"),r.get("/airlines"),r.get("/categories")]);p(e.data||[]),b(t.data||[]),y(a.data||[])}catch(e){console.error("Failed to load master data",e)}})()},[]);const E=(e,t,a)=>{const l=[...c];if(l[e]={...l[e],[t]:a},"id"===t){const t=u.find(e=>e.id==a);t&&(l[e].city=t.city)}m(l)};return(0,l.createElement)("form",{onSubmit:async a=>{a.preventDefault();const l={...n,hotels:c,pricing_variants:i};try{e?.id?await r.put(`/packages/${e.id}`,l):await r.post("/packages",l),t()}catch(e){alert("Gagal menyimpan paket: "+e.message)}},className:"space-y-6"},(0,l.createElement)("div",{className:"bg-white p-4 rounded-lg shadow-sm border"},(0,l.createElement)("h3",{className:"font-semibold mb-4 text-gray-700"},"Informasi Paket"),(0,l.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,l.createElement)("div",null,(0,l.createElement)("label",{className:"block text-sm font-medium mb-1"},"Nama Paket"),(0,l.createElement)("input",{type:"text",required:!0,className:"w-full border rounded p-2",value:n.name,onChange:e=>s({...n,name:e.target.value})})),(0,l.createElement)("div",null,(0,l.createElement)("label",{className:"block text-sm font-medium mb-1"},"Kategori"),(0,l.createElement)("select",{required:!0,className:"w-full border rounded p-2",value:n.category_id,onChange:e=>s({...n,category_id:e.target.value})},(0,l.createElement)("option",{value:""},"Pilih Kategori"),h.map(e=>(0,l.createElement)("option",{key:e.id,value:e.id},e.name)))),(0,l.createElement)("div",null,(0,l.createElement)("label",{className:"block text-sm font-medium mb-1"},"Maskapai"),(0,l.createElement)("select",{required:!0,className:"w-full border rounded p-2",value:n.airline_id,onChange:e=>s({...n,airline_id:e.target.value})},(0,l.createElement)("option",{value:""},"Pilih Maskapai"),g.map(e=>(0,l.createElement)("option",{key:e.id,value:e.id},e.name," (",e.code,")")))),(0,l.createElement)("div",null,(0,l.createElement)("label",{className:"block text-sm font-medium mb-1"},"Tanggal Keberangkatan"),(0,l.createElement)("input",{type:"date",required:!0,className:"w-full border rounded p-2",value:n.departure_date,onChange:e=>s({...n,departure_date:e.target.value})})),(0,l.createElement)("div",{className:"grid grid-cols-2 gap-2"},(0,l.createElement)("div",null,(0,l.createElement)("label",{className:"block text-sm font-medium mb-1"},"Durasi (Hari)"),(0,l.createElement)("input",{type:"number",required:!0,className:"w-full border rounded p-2",value:n.duration_days,onChange:e=>s({...n,duration_days:e.target.value})})),(0,l.createElement)("div",null,(0,l.createElement)("label",{className:"block text-sm font-medium mb-1"},"Kuota"),(0,l.createElement)("input",{type:"number",required:!0,className:"w-full border rounded p-2",value:n.quota,onChange:e=>s({...n,quota:e.target.value})}))))),(0,l.createElement)("div",{className:"bg-white p-4 rounded-lg shadow-sm border"},(0,l.createElement)("div",{className:"flex justify-between items-center mb-4"},(0,l.createElement)("h3",{className:"font-semibold text-gray-700"},"Akomodasi Hotel"),(0,l.createElement)("button",{type:"button",onClick:()=>m([...c,{id:"",city:"",nights:0}]),className:"text-sm text-blue-600 flex items-center gap-1"},(0,l.createElement)(re,{size:16})," Tambah Hotel")),(0,l.createElement)("div",{className:"space-y-3"},c.map((e,t)=>(0,l.createElement)("div",{key:t,className:"flex gap-3 items-end bg-gray-50 p-3 rounded border"},(0,l.createElement)("div",{className:"flex-1"},(0,l.createElement)("label",{className:"text-xs text-gray-500"},"Pilih Hotel"),(0,l.createElement)("select",{className:"w-full border rounded p-2 text-sm",value:e.id,onChange:e=>E(t,"id",e.target.value)},(0,l.createElement)("option",{value:""},"- Pilih -"),u.map(e=>(0,l.createElement)("option",{key:e.id,value:e.id},e.name," (",e.city,")")))),(0,l.createElement)("div",{className:"w-24"},(0,l.createElement)("label",{className:"text-xs text-gray-500"},"Durasi (Malam)"),(0,l.createElement)("input",{type:"number",className:"w-full border rounded p-2 text-sm",value:e.nights,onChange:e=>E(t,"nights",e.target.value)})),(0,l.createElement)("button",{type:"button",onClick:()=>{return e=t,m(c.filter((t,a)=>a!==e));var e},className:"text-red-500 p-2 hover:bg-red-50 rounded"},(0,l.createElement)(Z,{size:16})))),0===c.length&&(0,l.createElement)("p",{className:"text-sm text-gray-400 italic text-center"},"Belum ada hotel dipilih"))),(0,l.createElement)("div",{className:"bg-white p-4 rounded-lg shadow-sm border"},(0,l.createElement)("h3",{className:"font-semibold mb-4 text-gray-700"},"Varian Harga (Per Jamaah)"),(0,l.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},i.map((e,t)=>(0,l.createElement)("div",{key:t,className:"bg-gray-50 p-3 rounded border"},(0,l.createElement)("label",{className:"block text-sm font-medium text-gray-600 mb-1"},"Tipe ",e.type),(0,l.createElement)("div",{className:"relative"},(0,l.createElement)("span",{className:"absolute left-3 top-2 text-gray-500"},"Rp"),(0,l.createElement)("input",{type:"number",className:"w-full border rounded pl-8 p-2",value:e.price,onChange:e=>((e,t)=>{const a=[...i];a[e].price=t,d(a)})(t,e.target.value)})))))),(0,l.createElement)("div",{className:"flex justify-end gap-3 pt-4"},(0,l.createElement)("button",{type:"button",onClick:a,className:"px-6 py-2 border rounded-lg hover:bg-gray-50"},"Batal"),(0,l.createElement)("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"},"Simpan Paket")))},se=()=>{const{getPackages:e,deletePackage:t}=o(),[a,r]=(0,l.useState)([]),[n,s]=(0,l.useState)(!0),[c,m]=(0,l.useState)(!1),[i,d]=(0,l.useState)(null),[u,g]=(0,l.useState)("active"),b=async()=>{s(!0);try{const t=await e({status:"all"!==u?u:""});r(t||[])}catch(e){console.error("Error fetching packages:",e)}finally{s(!1)}};return(0,l.useEffect)(()=>{b()},[u]),(0,l.createElement)("div",{className:"p-6"},(0,l.createElement)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4"},(0,l.createElement)("div",null,(0,l.createElement)("h1",{className:"text-2xl font-bold text-gray-800"},"Manajemen Paket"),(0,l.createElement)("p",{className:"text-gray-500 text-sm mt-1"},"Kelola jadwal, harga, dan varian paket umroh.")),(0,l.createElement)("div",{className:"flex gap-3"},(0,l.createElement)("select",{className:"border border-gray-300 rounded-lg px-3 py-2 text-sm bg-white focus:ring-2 focus:ring-blue-500 outline-none",value:u,onChange:e=>g(e.target.value)},(0,l.createElement)("option",{value:"active"},"Paket Aktif"),(0,l.createElement)("option",{value:"full"},"Full Booked"),(0,l.createElement)("option",{value:"completed"},"Selesai"),(0,l.createElement)("option",{value:"all"},"Semua Status")),(0,l.createElement)("button",{onClick:()=>{d(null),m(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-lg font-medium shadow-sm flex items-center gap-2 transition"},(0,l.createElement)("span",null,"+")," Buat Paket"))),n?(0,l.createElement)(p,{text:"Memuat data paket..."}):(0,l.createElement)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},(0,l.createElement)("div",{className:"overflow-x-auto"},(0,l.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,l.createElement)("thead",{className:"bg-gray-50"},(0,l.createElement)("tr",null,(0,l.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider"},"Nama Paket"),(0,l.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider"},"Tgl Berangkat"),(0,l.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider"},"Kategori"),(0,l.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider"},"Harga Mulai"),(0,l.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider"},"Status"),(0,l.createElement)("th",{className:"px-6 py-3 text-right text-xs font-bold text-gray-500 uppercase tracking-wider"},"Aksi"))),(0,l.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},0===a.length?(0,l.createElement)("tr",null,(0,l.createElement)("td",{colSpan:"6",className:"px-6 py-10 text-center text-gray-400"},"Tidak ada paket yang ditemukan.")):a.map(e=>(0,l.createElement)("tr",{key:e.id,className:"hover:bg-gray-50 transition"},(0,l.createElement)("td",{className:"px-6 py-4"},(0,l.createElement)("div",{className:"text-sm font-bold text-gray-900"},e.name),(0,l.createElement)("div",{className:"text-xs text-gray-500 mt-1"},(()=>{try{const t="string"==typeof e.hotels?JSON.parse(e.hotels):e.hotels;return Array.isArray(t)&&t.length>0?`🏨 ${t.length} Hotel Terpilih`:"Belum ada hotel"}catch(e){return"-"}})())),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},(0,l.createElement)("div",{className:"text-sm text-gray-900 font-medium"},new Date(e.departure_date).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})),(0,l.createElement)("div",{className:"text-xs text-blue-600"},"✈️ ",e.airline_name||"Maskapai -")),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},(0,l.createElement)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-50 text-blue-800"},e.category_name||"Umum")),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-700"},(e=>{if(!e||0===e.length)return"Belum ada harga";const t="string"==typeof e?JSON.parse(e):e;if(!Array.isArray(t))return"Format Data Salah";const a=t.map(e=>parseFloat(e.price)),l=Math.min(...a),r=Math.max(...a);return l===r?`Rp ${l.toLocaleString("id-ID")}`:`Rp ${l.toLocaleString("id-ID")} - ${r.toLocaleString("id-ID")}`})(e.pricing_variants)),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},(0,l.createElement)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full \n                                                    "+("active"===e.status?"bg-green-100 text-green-800":"full"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800")},"active"===e.status?"Open":"full"===e.status?"Penuh":e.status)),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},(0,l.createElement)("button",{onClick:()=>(e=>{d(e),m(!0)})(e),className:"text-indigo-600 hover:text-indigo-900 mr-3 font-medium"},"Edit"),(0,l.createElement)("button",{onClick:()=>(async e=>{if(window.confirm("Apakah Anda yakin ingin menghapus paket ini? Data yang dihapus tidak bisa dikembalikan."))try{await t(e),b()}catch(e){alert("Gagal menghapus: "+e.message)}})(e.id),className:"text-red-600 hover:text-red-900 font-medium"},"Hapus")))))))),(0,l.createElement)(O,{isOpen:c,onClose:()=>m(!1),title:i?"Edit Paket":"Tambah Paket Baru"},c&&(0,l.createElement)(ne,{initialData:i,onSuccess:()=>{m(!1),b()},onCancel:()=>m(!1)})))},ce=({initialData:e,closeModal:t})=>{const{createOrUpdate:a}=o(),[r,n]=(0,l.useState)(!1),[s,c]=(0,l.useState)({name:e?.name||"",phone:e?.phone||"",email:e?.email||"",address:e?.address||"",city:e?.city||"",status:e?.status||"active"}),m=e=>c({...s,[e.target.name]:e.target.value});return(0,l.createElement)("form",{onSubmit:async l=>{l.preventDefault(),n(!0);try{await a("sub_agents",s,e?.id),t()}catch(e){alert(e.message)}finally{n(!1)}},className:"space-y-4 p-2"},(0,l.createElement)(T,{label:"Nama Agen / Travel",name:"name",value:s.name,onChange:m,required:!0}),(0,l.createElement)("div",{className:"grid grid-cols-2 gap-4"},(0,l.createElement)(T,{label:"No. Telepon",name:"phone",value:s.phone,onChange:m,required:!0}),(0,l.createElement)(T,{label:"Email",type:"email",name:"email",value:s.email,onChange:m})),(0,l.createElement)("div",{className:"grid grid-cols-2 gap-4"},(0,l.createElement)(T,{label:"Kota Domisili",name:"city",value:s.city,onChange:m}),(0,l.createElement)(A,{label:"Status",name:"status",value:s.status,onChange:m},(0,l.createElement)("option",{value:"active"},"Aktif"),(0,l.createElement)("option",{value:"inactive"},"Tidak Aktif"))),(0,l.createElement)(T,{label:"Alamat Lengkap",name:"address",value:s.address,onChange:m}),(0,l.createElement)("div",{className:"flex justify-end gap-2 pt-4"},(0,l.createElement)(K,{type:"button",variant:"secondary",onClick:t},"Batal"),(0,l.createElement)(K,{type:"submit",disabled:r},r?"Menyimpan...":"Simpan")))},me=()=>{const{api:e}=o(),[t,a]=(0,l.useState)([]),[r,n]=(0,l.useState)(!0),[s,c]=(0,l.useState)(!1),[m,i]=(0,l.useState)(null),d=async()=>{n(!0);try{const t=await e.get("/sub-agents");a(t.data||[])}catch(e){console.error(e)}finally{n(!1)}};return(0,l.useEffect)(()=>{d()},[]),(0,l.createElement)("div",{className:"p-6 space-y-6"},(0,l.createElement)("div",{className:"flex justify-between items-center"},(0,l.createElement)("h1",{className:"text-2xl font-bold text-gray-800"},"Data Sub Agent"),(0,l.createElement)("button",{onClick:()=>{i(null),c(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 flex gap-2 items-center"},(0,l.createElement)(G,{size:18})," Tambah Agent")),r?(0,l.createElement)(p,null):(0,l.createElement)("div",{className:"bg-white rounded shadow overflow-hidden"},(0,l.createElement)("table",{className:"w-full text-left text-sm"},(0,l.createElement)("thead",{className:"bg-gray-50 border-b uppercase text-gray-500"},(0,l.createElement)("tr",null,(0,l.createElement)("th",{className:"p-4"},"Nama"),(0,l.createElement)("th",{className:"p-4"},"Kontak"),(0,l.createElement)("th",{className:"p-4"},"Status"),(0,l.createElement)("th",{className:"p-4 text-right"},"Aksi"))),(0,l.createElement)("tbody",{className:"divide-y"},t.map(t=>(0,l.createElement)("tr",{key:t.id},(0,l.createElement)("td",{className:"p-4 font-medium"},t.name),(0,l.createElement)("td",{className:"p-4"},t.phone," ",(0,l.createElement)("br",null),(0,l.createElement)("span",{className:"text-xs text-gray-400"},t.email)),(0,l.createElement)("td",{className:"p-4"},(0,l.createElement)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs"},t.status)),(0,l.createElement)("td",{className:"p-4 text-right flex justify-end gap-2"},(0,l.createElement)("button",{onClick:()=>{i(t),c(!0)},className:"text-blue-600"},(0,l.createElement)(Y,{size:16})),(0,l.createElement)("button",{onClick:()=>(async t=>{confirm("Hapus agen ini?")&&(await e.delete(`/sub-agents/${t}`),d())})(t.id),className:"text-red-600"},(0,l.createElement)(Z,{size:16})))))))),(0,l.createElement)(O,{isOpen:s,onClose:()=>c(!1),title:m?"Edit Agent":"Tambah Agent"},(0,l.createElement)(ce,{initialData:m,closeModal:()=>c(!1),onSuccess:()=>{c(!1),d()}})," "))},ie=U("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),oe=()=>{const{api:e}=o(),[t,a]=(0,l.useState)("hotels"),[n,s]=(0,l.useState)([]),[c,m]=(0,l.useState)([]),[i,d]=(0,l.useState)(!1),[u,p]=(0,l.useState)(!1),[g,b]=(0,l.useState)({}),h=async()=>{d(!0);try{const a="categories"===t?"/categories":`/${t}`,l=await e.get(a);"categories"===t?(m(l.data||[]),s(l.data||[])):s(l.data||[])}catch(e){console.error(e)}finally{d(!1)}};(0,l.useEffect)(()=>{h()},[t]);const y=async a=>{if(confirm("Hapus data ini?"))try{const l="categories"===t?`/categories/${a}`:`/master/${t}/${a}`;await e.delete(l),h()}catch(e){alert("Gagal hapus")}};return(0,l.createElement)("div",{className:"p-6 space-y-6"},(0,l.createElement)("h1",{className:"text-2xl font-bold"},"Master Data"),(0,l.createElement)("div",{className:"flex space-x-4 border-b"},["hotels","airlines","categories"].map(e=>(0,l.createElement)("button",{key:e,onClick:()=>a(e),className:"pb-2 px-4 capitalize "+(t===e?"border-b-2 border-blue-600 text-blue-600":"text-gray-500")},e))),(0,l.createElement)("button",{onClick:()=>{b({}),p(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded"},"+ Tambah Data"),(0,l.createElement)("div",{className:"bg-white rounded shadow overflow-hidden"},(0,l.createElement)("table",{className:"w-full text-left"},(0,l.createElement)("thead",{className:"bg-gray-100 border-b"},(0,l.createElement)("tr",null,(0,l.createElement)("th",{className:"p-4"},"Nama"),(0,l.createElement)("th",{className:"p-4"},"Detail"),(0,l.createElement)("th",{className:"p-4 text-right"},"Aksi"))),(0,l.createElement)("tbody",null,"categories"===t?n.filter(e=>0==e.parent_id||null==e.parent_id).map(e=>{const t=n.filter(t=>t.parent_id==e.id);return(0,l.createElement)(r().Fragment,{key:e.id},(0,l.createElement)("tr",{className:"bg-gray-50 font-bold"},(0,l.createElement)("td",{className:"p-4"},e.name),(0,l.createElement)("td",{className:"p-4 text-gray-500"},"Parent Category"),(0,l.createElement)("td",{className:"p-4 text-right"},(0,l.createElement)("button",{onClick:()=>y(e.id)},(0,l.createElement)(Z,{size:16,className:"text-red-500"})))),t.map(t=>(0,l.createElement)("tr",{key:t.id,className:"bg-white"},(0,l.createElement)("td",{className:"p-4 pl-8 flex items-center gap-2"},(0,l.createElement)(ie,{size:14,className:"text-gray-400"})," ",t.name),(0,l.createElement)("td",{className:"p-4 text-gray-400 text-sm"},"Sub dari ",e.name),(0,l.createElement)("td",{className:"p-4 text-right"},(0,l.createElement)("button",{onClick:()=>y(t.id)},(0,l.createElement)(Z,{size:16,className:"text-red-400"}))))))}):n.map(e=>(0,l.createElement)("tr",{key:e.id,className:"border-b hover:bg-gray-50"},(0,l.createElement)("td",{className:"p-4"},e.name),(0,l.createElement)("td",{className:"p-4 text-sm text-gray-500"},"hotels"===t&&`${e.city} (${e.star_rating} Bintang)`,"airlines"===t&&`Kode: ${e.code}`),(0,l.createElement)("td",{className:"p-4 text-right"},(0,l.createElement)("button",{onClick:()=>y(e.id),className:"text-red-500"},(0,l.createElement)(Z,{size:16})))))))),u&&(0,l.createElement)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},(0,l.createElement)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md"},(0,l.createElement)("h3",{className:"font-bold text-lg mb-4 capitalize"},"Tambah ",t),(0,l.createElement)("form",{onSubmit:async a=>{a.preventDefault();try{const a="categories"===t?"/categories":`/${t}`;await e.post(a,g),p(!1),b({}),h()}catch(a){alert("Gagal menyimpan")}},className:"space-y-4"},(0,l.createElement)("input",{required:!0,placeholder:"Nama",className:"w-full border p-2 rounded",onChange:e=>b({...g,name:e.target.value})}),"hotels"===t&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("input",{placeholder:"Kota",className:"w-full border p-2 rounded",onChange:e=>b({...g,city:e.target.value})}),(0,l.createElement)("input",{type:"number",placeholder:"Bintang (1-5)",className:"w-full border p-2 rounded",onChange:e=>b({...g,star_rating:e.target.value})})),"airlines"===t&&(0,l.createElement)("input",{placeholder:"Kode Maskapai",className:"w-full border p-2 rounded",onChange:e=>b({...g,code:e.target.value})}),"categories"===t&&(0,l.createElement)("select",{className:"w-full border p-2 rounded",onChange:e=>b({...g,parent_id:e.target.value})},(0,l.createElement)("option",{value:"0"},"-- Sebagai Kategori Utama --"),c.filter(e=>0==e.parent_id).map(e=>(0,l.createElement)("option",{key:e.id,value:e.id},e.name))),(0,l.createElement)("div",{className:"flex justify-end gap-2"},(0,l.createElement)("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 bg-gray-200 rounded"},"Batal"),(0,l.createElement)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded"},"Simpan"))))))},de=U("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),ue=U("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),pe=U("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),ge=U("megaphone",[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]]),be=U("network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),he=U("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),ye=U("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Ee=U("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),xe=U("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]),fe=()=>{const{currentUser:e}=c(),[t,a]=(0,l.useState)("dashboard"),[r,n]=(0,l.useState)(!1),s=[{id:"dashboard",label:"Dashboard",icon:(0,l.createElement)(de,{size:18}),roles:["owner","administrator","admin_staff","finance_staff","marketing_staff"]},{id:"packages",label:"Paket",icon:(0,l.createElement)(ue,{size:18}),roles:["owner","administrator","admin_staff","marketing_staff"]},{id:"jamaah",label:"Jamaah",icon:(0,l.createElement)(pe,{size:18}),roles:["owner","administrator","admin_staff","marketing_staff","finance_staff"]},{id:"finance",label:"Keuangan",icon:(0,l.createElement)(V,{size:18}),roles:["owner","administrator","finance_staff","admin_staff"]},{id:"marketing",label:"Marketing",icon:(0,l.createElement)(ge,{size:18}),roles:["owner","administrator","admin_staff","marketing_staff"]},{id:"sub_agents",label:"Agen",icon:(0,l.createElement)(be,{size:18}),roles:["owner","administrator","admin_staff","marketing_staff"]},{id:"hr",label:"HR",icon:(0,l.createElement)(he,{size:18}),roles:["owner","administrator"]},{id:"master",label:"Master",icon:(0,l.createElement)(ye,{size:18}),roles:["owner","administrator","admin_staff"]}],m=e?.role||"subscriber",i=t=>"administrator"===e?.role||t.includes(m);return(0,l.createElement)("div",{id:"umh-admin-app",className:"flex flex-col min-h-screen bg-gray-50 font-sans text-gray-800"},(0,l.createElement)("header",{className:"bg-white border-b border-gray-200 shadow-sm sticky top-0 z-40"},(0,l.createElement)("div",{className:"px-4 sm:px-6 py-3 flex justify-between items-center"},(0,l.createElement)("div",{className:"flex items-center gap-3"},(0,l.createElement)("div",{className:"bg-blue-600 text-white p-2 rounded-lg shadow-lg"},(0,l.createElement)(de,{size:24})),(0,l.createElement)("div",{className:"hidden sm:block"},(0,l.createElement)("h1",{className:"text-lg font-bold text-gray-900 leading-none"},"Umroh Manager"),(0,l.createElement)("span",{className:"text-xs text-blue-600 font-medium bg-blue-50 px-2 py-0.5 rounded-full border border-blue-100"},"Hybrid v1.2"))),(0,l.createElement)("div",{className:"flex items-center gap-4"},(0,l.createElement)("div",{className:"text-right hidden md:block"},(0,l.createElement)("p",{className:"text-sm font-semibold text-gray-900 leading-tight"},e?.full_name||"Pengguna"),(0,l.createElement)("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider font-bold"},m.replace(/_/g," "))),(0,l.createElement)("div",{className:"h-9 w-9 rounded-full bg-gradient-to-br from-blue-500 to-blue-700 flex items-center justify-center text-white font-bold text-sm shadow-md"},e?.full_name?e.full_name.charAt(0).toUpperCase():"U"),(0,l.createElement)("button",{className:"md:hidden p-2 text-gray-500",onClick:()=>n(!r)},r?(0,l.createElement)(Ee,{size:24}):(0,l.createElement)(xe,{size:24})))),(0,l.createElement)("div",{className:"hidden md:block px-4 sm:px-6 bg-gray-50/50 border-t border-gray-100 backdrop-blur-sm"},(0,l.createElement)("nav",{className:"flex space-x-1 overflow-x-auto custom-scrollbar"},s.map(e=>i(e.roles)&&(0,l.createElement)("button",{key:e.id,onClick:()=>a(e.id),className:`\n                                        group flex items-center gap-2 whitespace-nowrap py-3 px-4 border-b-2 text-sm font-medium transition-all duration-200\n                                        ${t===e.id?"border-blue-600 text-blue-700 bg-white rounded-t-lg shadow-sm":"border-transparent text-gray-500 hover:text-gray-800 hover:bg-gray-100/50 rounded-t-lg"}\n                                    `},(0,l.createElement)("span",{className:t===e.id?"text-blue-600":"text-gray-400"},e.icon),e.label))))),r&&(0,l.createElement)("div",{className:"md:hidden bg-white border-b border-gray-200 shadow-lg z-30 p-2 space-y-1"},s.map(e=>i(e.roles)&&(0,l.createElement)("button",{key:e.id,onClick:()=>{a(e.id),n(!1)},className:"flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium w-full text-left\n                                    "+(t===e.id?"bg-blue-50 text-blue-700":"text-gray-600 hover:bg-gray-50")},e.icon," ",e.label))),(0,l.createElement)("main",{className:"flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto bg-slate-50/50"},(0,l.createElement)("div",{className:"max-w-7xl mx-auto min-h-[500px]"},(()=>{switch(t){case"dashboard":default:return(0,l.createElement)(D,null);case"packages":return(0,l.createElement)(se,null);case"jamaah":return(0,l.createElement)(le,null);case"finance":return(0,l.createElement)(F,null);case"marketing":return(0,l.createElement)(X,null);case"sub_agents":return(0,l.createElement)(me,null);case"hr":return(0,l.createElement)(Q,null);case"master":return(0,l.createElement)(oe,null)}})())),(0,l.createElement)("footer",{className:"bg-white border-t border-gray-200 py-4 mt-auto"},(0,l.createElement)("div",{className:"max-w-7xl mx-auto px-6 text-center text-xs text-gray-400"},"© ",(new Date).getFullYear()," PT. Jannah Firdaus Banten. All rights reserved.")))},ve=()=>(0,l.createElement)(m,null,(0,l.createElement)(d,null,(0,l.createElement)(fe,null)));document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("umh-admin-app");e&&(0,n.H)(e).render((0,l.createElement)(r().StrictMode,null,(0,l.createElement)(ve,null)))})})();