(()=>{"use strict";var e={338:(e,t,a)=>{var l=a(795);t.H=l.createRoot,l.hydrateRoot},795:e=>{e.exports=window.ReactDOM}},t={};function a(l){var n=t[l];if(void 0!==n)return n.exports;var r=t[l]={exports:{}};return e[l](r,r.exports,a),r.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const l=window.React;var n=a.n(l),r=a(338);const s=window.umh_wp_data||{},c=s.user||null,m=s.nonce||null,i=s.api_url||"/wp-json/umh/v1",o=(0,l.createContext)(),d=({children:e})=>{const[t,a]=(0,l.useState)(c),n={currentUser:t,setCurrentUser:a,nonce:m,apiUrl:i,adminUrl:s.adminUrl,printUrl:s.printUrl,isWpAdmin:s.is_wp_admin||!1};return(0,l.createElement)(o.Provider,{value:n},e)},u=()=>(0,l.useContext)(o),p=window.wp.apiFetch;var g=a.n(p);const h=(0,l.createContext)(),x=()=>(0,l.useContext)(h),y=({children:e})=>{const{currentUser:t}=u(),[a,n]=(0,l.useState)({packages:[],jamaah:[],finance:[],marketing:[],hr:[],users:[],sub_agents:[],roles:[],logs:[],stats:{}}),[r,s]=(0,l.useState)(!0),[c,m]=(0,l.useState)(null),i=["packages","jamaah","finance","categories","accounts","marketing","hr","users","roles","logs","tasks","sub_agents","stats"],o=(0,l.useCallback)(async()=>{if(t){s(!0),m(null);try{const e=i.map(e=>g()({path:`/umh/v1/${e}`}).then(t=>({status:"fulfilled",endpoint:e,value:t})).catch(t=>({status:"rejected",endpoint:e,reason:t}))),t=await Promise.all(e),l={...a};t.forEach(e=>{"fulfilled"===e.status?l[e.endpoint]=e.value:console.warn(`Gagal memuat ${e.endpoint}:`,e.reason)}),l.jamaah&&l.jamaah_payments&&(l.jamaah=l.jamaah.map(e=>{const t=(Array.isArray(l.jamaah_payments)?l.jamaah_payments.filter(t=>t.jamaah_id===e.id&&"paid"===t.status):[]).reduce((e,t)=>e+parseFloat(t.amount),0);return{...e,amount_paid:t}})),n(l)}catch(e){console.error("Critical API Error:",e),m(e.message||"Terjadi kesalahan jaringan.")}finally{s(!1)}}else s(!1)},[t]);(0,l.useEffect)(()=>{o()},[o]);const d=async e=>{try{const t=await g()({path:`/umh/v1/${e}`});n(a=>({...a,[e]:t}))}catch(t){console.error(`Gagal refresh ${e}`,t)}},p={data:a,loading:r,error:c,createOrUpdate:async(e,t,a=null)=>{const l=a?"PUT":"POST",r=a?`/umh/v1/${e}/${a}`:`/umh/v1/${e}`;try{const s=await g()({path:r,method:l,data:t});return n(t=>{const l=t[e]||[];let n;return n=a?l.map(e=>e.id===a?s:e):[s,...l],{...t,[e]:n}}),s}catch(t){throw console.error(`Failed to ${l} ${e}:`,t),t}},deleteItem:async(e,t)=>{try{await g()({path:`/umh/v1/${e}/${t}`,method:"DELETE"}),n(a=>{const l=(a[e]||[]).filter(e=>e.id!==t&&e.ID!==t);return{...a,[e]:l}})}catch(t){throw console.error(`Failed to DELETE ${e}:`,t),t}},refreshData:o,fetchResource:d,updatePaymentStatus:async(e,t)=>{try{const a=await g()({path:`/umh/v1/jamaah/payments/${e}`,method:"PUT",data:{status:t}});return await Promise.all([d("jamaah"),d("jamaah_payments")]),a}catch(e){throw e}},fetchLogs:()=>d("logs")};return(0,l.createElement)(h.Provider,{value:p},e)},E=(...e)=>e.filter(Boolean).join(" "),f=({title:e,value:t,icon:a,color:n})=>{const r={primary:"bg-blue-100 text-blue-600",success:"bg-green-100 text-green-600",warning:"bg-yellow-100 text-yellow-800",danger:"bg-red-100 text-red-600"};return(0,l.createElement)("div",{className:"bg-white border border-gray-200 rounded-lg p-5 flex items-center gap-4 transition-all duration-200 hover:shadow-lg hover:-translate-y-1"},(0,l.createElement)("div",{className:E("p-3 rounded-full flex items-center justify-center",r[n]||r.primary)},a),(0,l.createElement)("div",{className:"overflow-hidden"},(0,l.createElement)("p",{className:"text-sm font-medium text-gray-500 truncate"},e),(0,l.createElement)("h3",{className:"text-2xl font-bold text-gray-900 truncate"},t)))},v=({message:e})=>(0,l.createElement)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative my-4",role:"alert"},(0,l.createElement)("strong",{className:"font-bold"},"Error: "),(0,l.createElement)("span",{className:"block sm:inline"},e)),b=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},w=(...e)=>e.filter((e,t,a)=>Boolean(e)&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),k=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var N={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const _=(0,l.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:n,className:r="",children:s,iconNode:c,...m},i)=>(0,l.createElement)("svg",{ref:i,...N,width:t,height:t,stroke:e,strokeWidth:n?24*Number(a)/Number(t):a,className:w("lucide",r),...!s&&!k(m)&&{"aria-hidden":"true"},...m},[...c.map(([e,t])=>(0,l.createElement)(e,t)),...Array.isArray(s)?s:[s]])),C=(e,t)=>{const a=(0,l.forwardRef)(({className:a,...n},r)=>{return(0,l.createElement)(_,{ref:r,iconNode:t,className:w(`lucide-${s=b(e),s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,a),...n});var s});return a.displayName=b(e),a},S=C("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]),j=()=>(0,l.createElement)("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg z-50 min-h-[200px]"},(0,l.createElement)(S,{size:32,className:"animate-spin text-blue-600"})),M=()=>(0,l.createElement)("div",{className:"fixed inset-0 bg-white flex items-center justify-center z-[9999]"},(0,l.createElement)(S,{size:48,className:"animate-spin text-blue-600"})),z=C("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),P=C("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),L=C("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),T=C("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),O=e=>{if("number"!=typeof e){let t=String(e).replace(/[^0-9,]/g,"");t=t.replace(",","."),e=parseFloat(t)||0}return new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e)},A=e=>{if("number"==typeof e)return e;if("string"!=typeof e)return 0;try{const t=String(e).replace(/Rp\s?/g,"").replace(/\./g,"").replace(/,/g,".");return parseFloat(t)||0}catch(e){return 0}},D=e=>{if(!e)return"-";try{const t=new Date(e);return isNaN(t.getTime())?"-":t.toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric",timeZone:"UTC"})}catch(t){return e}},H=e=>{if(!e)return"";try{const t=new Date(e);return isNaN(t.getTime())?"":t.toISOString().split("T")[0]}catch(e){return""}},F=({openModal:e})=>{const{data:t,loading:a,error:n}=x();if(a)return(0,l.createElement)(M,{message:"Memuat dashboard..."});if(n)return(0,l.createElement)(v,{title:"Gagal Memuat",message:n});const{stats:r,jamaah:s,packages:c}=t,m=c.filter(e=>"available"===e.status).reduce((e,t)=>e+(t.available_seats||0),0);return(0,l.createElement)("div",{className:"space-y-6"},(0,l.createElement)("h1",{className:"text-3xl font-bold text-gray-800"},"Dashboard"),(0,l.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},(0,l.createElement)(f,{title:"Total Jamaah Aktif",value:r.total_jamaah||0,icon:(0,l.createElement)(z,{className:"w-8 h-8 text-blue-500"}),color:"blue"}),(0,l.createElement)(f,{title:"Total Paket Tersedia",value:r.available_packages||0,icon:(0,l.createElement)(P,{className:"w-8 h-8 text-green-500"}),color:"green"}),(0,l.createElement)(f,{title:"Sisa Kursi (Total)",value:m,icon:(0,l.createElement)(L,{className:"w-8 h-8 text-indigo-500"}),color:"indigo"}),(0,l.createElement)(f,{title:"Total Piutang (Pending)",value:O(r.total_pending_payments||0),icon:(0,l.createElement)(T,{className:"w-8 h-8 text-yellow-500"}),color:"yellow"})),(0,l.createElement)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6"},(0,l.createElement)("div",{className:"bg-white p-6 rounded-lg shadow"},(0,l.createElement)("h2",{className:"text-xl font-semibold text-gray-700 mb-4"},"Jamaah Baru"),(0,l.createElement)("div",{className:"space-y-3 max-h-64 overflow-y-auto"},s.slice(0,5).map(e=>(0,l.createElement)("div",{key:e.id,className:"flex items-center justify-between p-3 bg-gray-50 rounded-md"},(0,l.createElement)("div",null,(0,l.createElement)("p",{className:"font-medium text-gray-800"},e.name),(0,l.createElement)("p",{className:"text-sm text-gray-500"},e.email)),(0,l.createElement)("span",{className:"text-sm text-gray-600"},e.package_name||"Tanpa Paket"))),0===s.length&&(0,l.createElement)("p",{className:"text-gray-500"},"Belum ada data jamaah."))),(0,l.createElement)("div",{className:"bg-white p-6 rounded-lg shadow"},(0,l.createElement)("h2",{className:"text-xl font-semibold text-gray-700 mb-4"},"Paket Akan Berangkat"),(0,l.createElement)("div",{className:"space-y-3 max-h-64 overflow-y-auto"},c.filter(e=>"available"===e.status).slice(0,5).map(e=>(0,l.createElement)("div",{key:e.id,className:"flex items-center justify-between p-3 bg-gray-50 rounded-md"},(0,l.createElement)("div",null,(0,l.createElement)("p",{className:"font-medium text-gray-800"},e.name),(0,l.createElement)("p",{className:"text-sm text-gray-500"},"Berangkat: ",e.start_date)),(0,l.createElement)("span",{className:"font-medium text-indigo-600"},e.available_seats," / ",e.total_seats," kursi"))),0===c.length&&(0,l.createElement)("p",{className:"text-gray-500"},"Belum ada data paket.")))))},q=C("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),B=(...e)=>e.filter(Boolean).join(" "),U=(0,l.forwardRef)(({className:e,variant:t="primary",size:a="md",children:n,...r},s)=>{const c={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-5 py-2.5 text-base",icon:"p-2"};return(0,l.createElement)("button",{ref:s,className:B("inline-flex items-center justify-center gap-2 font-medium rounded-md shadow-sm transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-offset-2","icon"===t?c.icon:c[a],{primary:"bg-blue-600 text-white hover:bg-blue-700 focus-visible:ring-blue-500",secondary:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus-visible:ring-gray-300",danger:"bg-red-600 text-white hover:bg-red-700 focus-visible:ring-red-500",icon:"text-gray-500 hover:text-gray-700 hover:bg-gray-100 p-2 rounded-full focus-visible:ring-gray-300"}[t],e),...r},n)});U.displayName="Button";const I=(0,l.forwardRef)(({className:e,type:t="text",...a},n)=>(0,l.createElement)("input",{type:t,ref:n,className:B("block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm","placeholder-gray-400","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500","disabled:bg-gray-100 disabled:cursor-not-allowed","text-sm",e),...a}));I.displayName="Input";const R=(0,l.forwardRef)(({className:e,children:t,...a},n)=>(0,l.createElement)("select",{ref:n,className:B("block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500","text-sm",e),...a},t));R.displayName="Select";const $=(0,l.forwardRef)(({className:e,...t},a)=>(0,l.createElement)("textarea",{ref:a,className:B("block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm","placeholder-gray-400","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500","text-sm","min-h-[80px]",e),...t}));$.displayName="Textarea";const K=({className:e,children:t})=>(0,l.createElement)("div",{className:B("mb-4",e)},t),V=({htmlFor:e,children:t,className:a})=>(0,l.createElement)("label",{htmlFor:e,className:B("block text-sm font-medium text-gray-700 mb-1",a)},t),J=(0,l.forwardRef)(({className:e,label:t,...a},n)=>(0,l.createElement)("div",{className:"flex items-center gap-2"},(0,l.createElement)("input",{type:"checkbox",ref:n,id:a.id||a.name,className:B("h-4 w-4 text-blue-600 border-gray-300 rounded","focus:ring-blue-500",e),...a}),t&&(0,l.createElement)(V,{htmlFor:a.id||a.name,className:"mb-0"},t)));J.displayName="Checkbox";const G=(...e)=>e.filter(Boolean).join(" "),W=({title:e,isOpen:t,onClose:a,children:n,footer:r,size:s="3xl"})=>((0,l.useEffect)(()=>(document.body.style.overflow=t?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[t]),t?(0,l.createElement)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 backdrop-blur-sm flex items-start justify-center p-4 z-[100000] overflow-y-auto pt-10 sm:pt-20",onClick:a},(0,l.createElement)("div",{className:G("bg-white rounded-xl shadow-2xl w-full m-auto flex flex-col max-h-[90vh] transform transition-all",{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl"}[s]||"max-w-3xl"),onClick:e=>e.stopPropagation()},(0,l.createElement)("div",{className:"flex justify-between items-center p-5 border-b border-gray-100 sticky top-0 bg-white rounded-t-xl z-10"},(0,l.createElement)("h3",{className:"text-xl font-bold text-gray-800"},e),(0,l.createElement)("button",{onClick:a,className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors","aria-label":"Close"},(0,l.createElement)(q,{className:"h-6 w-6"}))),(0,l.createElement)("div",{className:"p-6 overflow-y-auto custom-scrollbar"},n),r&&(0,l.createElement)("div",{className:"flex justify-end gap-3 p-4 border-t border-gray-100 bg-gray-50 rounded-b-xl sticky bottom-0 z-10"},r))):null),Z=({onCancel:e,submitText:t="Simpan",children:a})=>(0,l.createElement)(l.Fragment,null,(0,l.createElement)(U,{onClick:e,variant:"secondary"},"Batal"),(0,l.createElement)(U,{type:"submit",variant:"primary"},t),a),Y=({initialData:e,onSubmit:t,onCancel:a,accounts:n})=>{const[r,s]=(0,l.useState)({transaction_date:H(new Date),description:"",transaction_type:"expense",amount:"",account_id:""});(0,l.useEffect)(()=>{s(e?t=>({...t,...e,transaction_date:H(e.transaction_date)}):{transaction_date:H(new Date),description:"",transaction_type:"expense",amount:"",account_id:""})},[e]);const c=e=>{const{name:t,value:a}=e.target;s(e=>({...e,[t]:a}))};return(0,l.createElement)("form",{onSubmit:e=>{e.preventDefault(),t(r)}},(0,l.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},(0,l.createElement)(K,null,(0,l.createElement)(V,{htmlFor:"transaction_date"},"Tanggal"),(0,l.createElement)(I,{type:"date",name:"transaction_date",id:"transaction_date",value:r.transaction_date,onChange:c,required:!0})),(0,l.createElement)(K,null,(0,l.createElement)(V,{htmlFor:"account_id"},"Akun"),(0,l.createElement)(R,{name:"account_id",id:"account_id",value:r.account_id,onChange:c,required:!0},(0,l.createElement)("option",{value:""},"Pilih Akun Kas"),n.map(e=>(0,l.createElement)("option",{key:e.id,value:e.id},e.name)))),(0,l.createElement)(K,null,(0,l.createElement)(V,{htmlFor:"transaction_type"},"Jenis Transaksi"),(0,l.createElement)(R,{name:"transaction_type",id:"transaction_type",value:r.transaction_type,onChange:c,required:!0},(0,l.createElement)("option",{value:"expense"},"Debit (Pengeluaran)"),(0,l.createElement)("option",{value:"income"},"Kredit (Pemasukan)"))),(0,l.createElement)(K,null,(0,l.createElement)(V,{htmlFor:"amount"},"Jumlah (Rp)"),(0,l.createElement)(I,{type:"number",name:"amount",id:"amount",value:r.amount,onChange:c,required:!0})),(0,l.createElement)(K,{className:"md:col-span-2"},(0,l.createElement)(V,{htmlFor:"description"},"Deskripsi"),(0,l.createElement)(I,{type:"text",name:"description",id:"description",value:r.description,onChange:c}))),(0,l.createElement)(Z,{onCancel:a}))},Q=C("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),X=C("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),ee=C("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]),te=C("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),ae=C("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),le=C("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),ne=({label:e,value:t,color:a,icon:r})=>(0,l.createElement)("div",{className:"bg-white p-4 rounded-lg shadow flex items-center"},(0,l.createElement)("div",{className:`p-3 rounded-full ${a.replace("text-","bg-")} bg-opacity-10 mr-4`},n().cloneElement(r,{className:`w-6 h-6 ${a}`})),(0,l.createElement)("div",null,(0,l.createElement)("span",{className:"text-sm font-medium text-gray-500"},e),(0,l.createElement)("p",{className:`text-2xl font-bold ${a}`},t))),re=()=>{const{data:e,loading:t,error:a,createOrUpdate:n,deleteItem:r}=x(),[s,c]=(0,l.useState)(!1),[m,i]=(0,l.useState)(null),[o,d]=(0,l.useState)(""),u=(e=null)=>{i(e),c(!0)},p=()=>{i(null),c(!1)},g=(0,l.useMemo)(()=>e.finance.filter(e=>e.description.toLowerCase().includes(o.toLowerCase())||e.category.toLowerCase().includes(o.toLowerCase())),[e.finance,o]),h=(0,l.useMemo)(()=>e.finance.filter(e=>"income"===e.type).reduce((e,t)=>e+parseFloat(t.amount),0),[e.finance]),y=(0,l.useMemo)(()=>e.finance.filter(e=>"expense"===e.type).reduce((e,t)=>e+parseFloat(t.amount),0),[e.finance]),E=h-y;return t&&!e.finance.length?(0,l.createElement)(M,{message:"Memuat data keuangan..."}):a?(0,l.createElement)(v,{title:"Gagal Memuat",message:a}):(0,l.createElement)("div",{className:"space-y-6"},(0,l.createElement)("div",{className:"flex flex-col md:flex-row justify-between items-center"},(0,l.createElement)("h1",{className:"text-3xl font-bold text-gray-800"},"Manajemen Keuangan"),(0,l.createElement)(U,{onClick:()=>u(),className:"mt-4 md:mt-0"},(0,l.createElement)(Q,{className:"w-4 h-4 mr-2"}),"Tambah Transaksi")),(0,l.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},(0,l.createElement)(ne,{label:"Total Pemasukan",value:O(h),color:"text-green-600",icon:(0,l.createElement)(X,null)}),(0,l.createElement)(ne,{label:"Total Pengeluaran",value:O(y),color:"text-red-600",icon:(0,l.createElement)(ee,null)}),(0,l.createElement)(ne,{label:"Profit Bersih",value:O(E),color:E>=0?"text-blue-600":"text-red-600"})),(0,l.createElement)("div",{className:"bg-white p-6 rounded-lg shadow"},(0,l.createElement)("div",{className:"flex items-center mb-4"},(0,l.createElement)(te,{className:"w-5 h-5 text-gray-500 mr-2"}),(0,l.createElement)(I,{type:"text",placeholder:"Cari berdasarkan deskripsi atau kategori...",value:o,onChange:e=>d(e.target.value),className:"max-w-sm"})),(0,l.createElement)("div",{className:"overflow-x-auto"},(0,l.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,l.createElement)("thead",{className:"bg-gray-50"},(0,l.createElement)("tr",null,(0,l.createElement)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tanggal"),(0,l.createElement)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Deskripsi"),(0,l.createElement)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Kategori"),(0,l.createElement)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Jumlah"),(0,l.createElement)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tipe"),(0,l.createElement)("th",{scope:"col",className:"relative px-6 py-3"},(0,l.createElement)("span",{className:"sr-only"},"Aksi")))),(0,l.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},t&&(0,l.createElement)("tr",null,(0,l.createElement)("td",{colSpan:"6",className:"text-center p-4"},(0,l.createElement)(j,null))),!t&&0===g.length&&(0,l.createElement)("tr",null,(0,l.createElement)("td",{colSpan:"6",className:"text-center p-4 text-gray-500"},"Data tidak ditemukan.")),!t&&g.map(e=>{const t="income"===e.type,a=t?"text-green-600":"text-red-600",n=t?"+":"-";return(0,l.createElement)("tr",{key:e.id},(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},D(e.transaction_date)),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},e.description),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},e.category),(0,l.createElement)("td",{className:`px-6 py-4 whitespace-nowrap text-sm font-semibold ${a}`},n," ",O(e.amount)),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},(0,l.createElement)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+(t?"bg-green-100 text-green-800":"bg-red-100 text-red-800")},e.type)),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},(0,l.createElement)(U,{variant:"icon",size:"sm",onClick:()=>u(e)},(0,l.createElement)(ae,{className:"w-4 h-4"})),(0,l.createElement)(U,{variant:"icon",size:"sm",color:"danger",onClick:()=>(async e=>{if(window.confirm("Apakah Anda yakin ingin menghapus data ini?"))try{await r("finance",e)}catch(e){alert("Gagal menghapus: "+e.message)}})(e.id)},(0,l.createElement)(le,{className:"w-4 h-4"}))))}))))),s&&(0,l.createElement)(W,{title:m?"Edit Transaksi":"Tambah Transaksi",onClose:p},(0,l.createElement)("div",{className:"p-6"},(0,l.createElement)(Y,{data:m,onClose:p}))))},se=({data:e,onClose:t})=>{const{createOrUpdate:a,loading:n,error:r}=x(),[s,c]=(0,l.useState)(e||{name:"",email:"",phone:"",source:"Website",status:"new",notes:""}),[m,i]=(0,l.useState)(null);(0,l.useEffect)(()=>{r&&i(r)},[r]);const o=e=>{const{name:t,value:a}=e.target;c(e=>({...e,[t]:a}))};return(0,l.createElement)("form",{onSubmit:async l=>{l.preventDefault(),i(null);const n={...s};e&&e.id&&(n.id=e.id);try{await a("marketing",n),t()}catch(e){i(e.message||"Gagal menyimpan lead.")}},className:"space-y-4"},m&&(0,l.createElement)(v,{message:m}),(0,l.createElement)(I,{label:"Nama",name:"name",value:s.name,onChange:o,required:!0}),(0,l.createElement)(I,{label:"Email",name:"email",type:"email",value:s.email,onChange:o}),(0,l.createElement)(I,{label:"Telepon",name:"phone",value:s.phone,onChange:o,required:!0}),(0,l.createElement)(R,{label:"Sumber Lead",name:"source",value:s.source,onChange:o},(0,l.createElement)("option",{value:"Website"},"Website"),(0,l.createElement)("option",{value:"Walk-in"},"Walk-in"),(0,l.createElement)("option",{value:"Referral"},"Referral"),(0,l.createElement)("option",{value:"Social Media"},"Social Media"),(0,l.createElement)("option",{value:"Other"},"Lainnya")),(0,l.createElement)(R,{label:"Status",name:"status",value:s.status,onChange:o},(0,l.createElement)("option",{value:"new"},"Baru"),(0,l.createElement)("option",{value:"contacted"},"Dihubungi"),(0,l.createElement)("option",{value:"qualified"},"Kualifikasi"),(0,l.createElement)("option",{value:"lost"},"Gagal"),(0,l.createElement)("option",{value:"converted"},"Konversi")),(0,l.createElement)($,{label:"Catatan",name:"notes",value:s.notes,onChange:o,rows:4}),(0,l.createElement)("div",{className:"flex justify-end space-x-2 pt-4 border-t"},(0,l.createElement)(U,{type:"button",variant:"secondary",onClick:t,disabled:n},"Batal"),(0,l.createElement)(U,{type:"submit",disabled:n},n?(0,l.createElement)(j,null):e?"Update":"Simpan")))},ce=C("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),me=C("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),ie=()=>{const{data:e,loading:t,error:a,createOrUpdate:n,deleteItem:r}=x(),[s,c]=(0,l.useState)(!1),[m,i]=(0,l.useState)(null),[o,d]=(0,l.useState)(""),u=(e=null)=>{i(e),c(!0)},p=()=>{i(null),c(!1)},g=(0,l.useMemo)(()=>e.marketing.filter(e=>e.name.toLowerCase().includes(o.toLowerCase())||e.email.toLowerCase().includes(o.toLowerCase())||e.phone.toLowerCase().includes(o.toLowerCase())||e.status.toLowerCase().includes(o.toLowerCase())),[e.marketing,o]);return t&&!e.marketing.length?(0,l.createElement)(M,{message:"Memuat data marketing..."}):a?(0,l.createElement)(v,{title:"Gagal Memuat",message:a}):(0,l.createElement)("div",{className:"space-y-6"},(0,l.createElement)("div",{className:"flex flex-col md:flex-row justify-between items-center"},(0,l.createElement)("h1",{className:"text-3xl font-bold text-gray-800"},"Manajemen Leads"),(0,l.createElement)(U,{onClick:()=>u(),className:"mt-4 md:mt-0"},(0,l.createElement)(Q,{className:"w-4 h-4 mr-2"}),"Tambah Lead")),(0,l.createElement)("div",{className:"bg-white p-6 rounded-lg shadow"},(0,l.createElement)("div",{className:"flex items-center mb-4"},(0,l.createElement)(te,{className:"w-5 h-5 text-gray-500 mr-2"}),(0,l.createElement)(I,{type:"text",placeholder:"Cari berdasarkan nama, email, telepon, atau status...",value:o,onChange:e=>d(e.target.value),className:"max-w-sm"})),(0,l.createElement)("div",{className:"overflow-x-auto"},(0,l.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,l.createElement)("thead",{className:"bg-gray-50"},(0,l.createElement)("tr",null,(0,l.createElement)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nama"),(0,l.createElement)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Kontak"),(0,l.createElement)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Sumber"),(0,l.createElement)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),(0,l.createElement)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tanggal"),(0,l.createElement)("th",{scope:"col",className:"relative px-6 py-3"},(0,l.createElement)("span",{className:"sr-only"},"Aksi")))),(0,l.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},t&&(0,l.createElement)("tr",null,(0,l.createElement)("td",{colSpan:"6",className:"text-center p-4"},(0,l.createElement)(j,null))),!t&&0===g.length&&(0,l.createElement)("tr",null,(0,l.createElement)("td",{colSpan:"6",className:"text-center p-4 text-gray-500"},"Data tidak ditemukan.")),!t&&g.map(e=>{const t=(e=>{switch(e){case"new":return{text:"Baru",color:"bg-blue-100 text-blue-800"};case"contacted":return{text:"Dihubungi",color:"bg-yellow-100 text-yellow-800"};case"qualified":return{text:"Kualifikasi",color:"bg-indigo-100 text-indigo-800"};case"lost":return{text:"Gagal",color:"bg-red-100 text-red-800"};case"converted":return{text:"Konversi",color:"bg-green-100 text-green-800"};default:return{text:e,color:"bg-gray-100 text-gray-800"}}})(e.status);return(0,l.createElement)("tr",{key:e.id},(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},e.name),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},e.email&&(0,l.createElement)("div",null,(0,l.createElement)(ce,{className:"w-4 h-4 inline mr-1"})," ",e.email),e.phone&&(0,l.createElement)("div",null,(0,l.createElement)(me,{className:"w-4 h-4 inline mr-1"})," ",e.phone)),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},e.source),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},(0,l.createElement)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.color}`},t.text)),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},D(e.created_at)),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},(0,l.createElement)(U,{variant:"icon",size:"sm",onClick:()=>u(e)},(0,l.createElement)(ae,{className:"w-4 h-4"})),(0,l.createElement)(U,{variant:"icon",size:"sm",color:"danger",onClick:()=>(async e=>{if(window.confirm("Apakah Anda yakin ingin menghapus data lead ini?"))try{await r("marketing",e)}catch(e){alert("Gagal menghapus: "+e.message)}})(e.id)},(0,l.createElement)(le,{className:"w-4 h-4"}))))}))))),s&&(0,l.createElement)(W,{title:m?"Edit Lead":"Tambah Lead",onClose:p},(0,l.createElement)("div",{className:"p-6"},(0,l.createElement)(se,{data:m,onClose:p}))))},oe=({data:e,onSuccess:t})=>{const a=x(),[n,r]=(0,l.useState)({name:"",email:"",password:"",role:"marketing_staff"}),[s,c]=(0,l.useState)(!1),[m,i]=(0,l.useState)(null),o=Boolean(e&&e.id);(0,l.useEffect)(()=>{o&&e&&r({name:e.name||"",email:e.email||"",role:e.role||"marketing_staff",password:""})},[e,o]);const d=e=>{const{name:t,value:a}=e.target;r(e=>({...e,[t]:a}))},{data:u,loading:p}=a,g=u.roles||[];return(0,l.createElement)("form",{onSubmit:async l=>{l.preventDefault(),i(null),c(!0);const r={...n};o&&(r.id=e.id,r.password||delete r.password);try{await a.createOrUpdate("user",r),t()}catch(e){i(e.message||"Gagal menyimpan data. Silakan coba lagi."),console.error(e)}finally{c(!1)}},className:"space-y-4"},m&&(0,l.createElement)(v,{message:m}),(0,l.createElement)(I,{label:"Nama",id:"name",name:"name",type:"text",value:n.name,onChange:d,required:!0}),(0,l.createElement)(I,{label:"Email",id:"email",name:"email",type:"email",value:n.email,onChange:d,required:!0,disabled:o}),(0,l.createElement)(I,{label:o?"Password (Kosongkan jika tidak diubah)":"Password",id:"password",name:"password",type:"password",value:n.password,onChange:d,required:!o}),(0,l.createElement)(R,{label:"Role",id:"role",name:"role",value:n.role,onChange:d,required:!0,disabled:p},p?(0,l.createElement)("option",null,"Loading roles..."):(0,l.createElement)(l.Fragment,null,(0,l.createElement)("option",{value:"",disabled:!0},"Pilih Role"),g.map(e=>(0,l.createElement)("option",{key:e.role_key,value:e.role_key},e.display_name)),0===g.length&&!p&&(0,l.createElement)(l.Fragment,null,(0,l.createElement)("option",{value:"marketing_staff"},"Marketing Staff"),(0,l.createElement)("option",{value:"finance_staff"},"Finance Staff"),(0,l.createElement)("option",{value:"hr_staff"},"HR Staff")))),(0,l.createElement)("div",{className:"pt-2"},(0,l.createElement)("button",{type:"submit",disabled:s||p,className:"w-full px-4 py-2 font-semibold text-white bg-blue-600 rounded-lg shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:bg-gray-400 disabled:cursor-not-allowed"},s?"Menyimpan...":o?"Update User":"Tambah User")))},de=C("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),ue=C("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),pe=()=>{const{data:e,loading:t,error:a,createOrUpdate:n,deleteItem:r}=x(),[s,c]=(0,l.useState)(!1),[m,i]=(0,l.useState)(null),[o,d]=(0,l.useState)(""),u=(e=null)=>{i(e),c(!0)},p=()=>{i(null),c(!1)},g=(0,l.useMemo)(()=>e.hr.filter(e=>e.full_name.toLowerCase().includes(o.toLowerCase())||e.user_email.toLowerCase().includes(o.toLowerCase())||e.role_name.toLowerCase().includes(o.toLowerCase())),[e.hr,o]);return t&&!e.hr.length?(0,l.createElement)(M,{message:"Memuat data HR..."}):a?(0,l.createElement)(v,{title:"Gagal Memuat",message:a}):(0,l.createElement)("div",{className:"space-y-6"},(0,l.createElement)("div",{className:"flex flex-col md:flex-row justify-between items-center"},(0,l.createElement)("h1",{className:"text-3xl font-bold text-gray-800"},"Manajemen Staff (HR)"),(0,l.createElement)(U,{onClick:()=>u(),className:"mt-4 md:mt-0"},(0,l.createElement)(Q,{className:"w-4 h-4 mr-2"}),"Tambah Staff")),(0,l.createElement)("div",{className:"bg-white p-6 rounded-lg shadow"},(0,l.createElement)("div",{className:"flex items-center mb-4"},(0,l.createElement)(te,{className:"w-5 h-5 text-gray-500 mr-2"}),(0,l.createElement)(I,{type:"text",placeholder:"Cari berdasarkan nama, email, atau role...",value:o,onChange:e=>d(e.target.value),className:"max-w-sm"})),(0,l.createElement)("div",{className:"overflow-x-auto"},(0,l.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,l.createElement)("thead",{className:"bg-gray-50"},(0,l.createElement)("tr",null,(0,l.createElement)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nama Lengkap"),(0,l.createElement)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Email"),(0,l.createElement)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Role"),(0,l.createElement)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),(0,l.createElement)("th",{scope:"col",className:"relative px-6 py-3"},(0,l.createElement)("span",{className:"sr-only"},"Aksi")))),(0,l.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},t&&(0,l.createElement)("tr",null,(0,l.createElement)("td",{colSpan:"5",className:"text-center p-4"},(0,l.createElement)(j,null))),!t&&0===g.length&&(0,l.createElement)("tr",null,(0,l.createElement)("td",{colSpan:"5",className:"text-center p-4 text-gray-500"},"Data tidak ditemukan.")),!t&&g.map(e=>(0,l.createElement)("tr",{key:e.ID},(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},e.full_name),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},e.user_email),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},e.role_name),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},(0,l.createElement)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+("active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800")},"active"===e.status?(0,l.createElement)(de,{className:"w-4 h-4 mr-1"}):(0,l.createElement)(ue,{className:"w-4 h-4 mr-1"}),e.status)),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},(0,l.createElement)(U,{variant:"icon",size:"sm",onClick:()=>u(e)},(0,l.createElement)(ae,{className:"w-4 h-4"})),(0,l.createElement)(U,{variant:"icon",size:"sm",color:"danger",onClick:()=>(async e=>{if(window.confirm("Apakah Anda yakin ingin menghapus data staff ini?"))try{await r("hr",e)}catch(e){alert("Gagal menghapus: "+e.message)}})(e.ID)},(0,l.createElement)(le,{className:"w-4 h-4"}))))))))),s&&(0,l.createElement)(W,{title:m?"Edit Staff":"Tambah Staff",onClose:p},(0,l.createElement)("div",{className:"p-6"},(0,l.createElement)(oe,{data:m,onClose:p}))))},ge=({initialData:e,onSubmit:t,onCancel:a,packages:n,onSave:r})=>{const{data:s}=x(),c=s.sub_agents||[],[m,i]=(0,l.useState)({package_id:"",sub_agent_id:"",full_name:"",id_number:"",phone:"",email:"",address:"",gender:"male",birth_date:"",passport_number:"",status:"pending",total_price:"",equipment_status:"belum_di_kirim",is_passport_verified:!1,is_ktp_verified:!1,is_kk_verified:!1,is_meningitis_verified:!1});(0,l.useEffect)(()=>{i(e?t=>({...t,...e,sub_agent_id:e.sub_agent_id||"",is_passport_verified:!!e.is_passport_verified,is_ktp_verified:!!e.is_ktp_verified,is_kk_verified:!!e.is_kk_verified,is_meningitis_verified:!!e.is_meningitis_verified,birth_date:H(e.birth_date)}):{package_id:"",sub_agent_id:"",full_name:"",id_number:"",phone:"",email:"",address:"",gender:"male",birth_date:"",passport_number:"",status:"pending",total_price:"",equipment_status:"belum_di_kirim",is_passport_verified:!1,is_ktp_verified:!1,is_kk_verified:!1,is_meningitis_verified:!1})},[e]);const o=e=>{const{name:t,value:a,type:l,checked:n}=e.target;i(e=>({...e,[t]:"checkbox"===l?n:a}))};return(0,l.createElement)("form",{onSubmit:e=>{e.preventDefault(),r&&r(m),t&&t(m),a()}},(0,l.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},(0,l.createElement)(K,{className:"md:col-span-2"},(0,l.createElement)(V,{htmlFor:"package_id"},"Paket yang Diambil"),(0,l.createElement)(R,{name:"package_id",id:"package_id",value:m.package_id,onChange:o,required:!0},(0,l.createElement)("option",{value:""},"Pilih Paket"),n.map(e=>(0,l.createElement)("option",{key:e.id,value:e.id},e.title," (",e.departure_date?H(e.departure_date):"N/A",")")))),(0,l.createElement)(K,{className:"md:col-span-2"},(0,l.createElement)(V,{htmlFor:"sub_agent_id"},"Sub Agen (Opsional)"),(0,l.createElement)(R,{name:"sub_agent_id",id:"sub_agent_id",value:m.sub_agent_id,onChange:o},(0,l.createElement)("option",{value:""},"Pilih Sub Agen (Jika ada)"),c.filter(e=>"active"===e.status).map(e=>(0,l.createElement)("option",{key:e.id,value:e.id},e.name)))),(0,l.createElement)(K,null,(0,l.createElement)(V,{htmlFor:"full_name"},"Nama Lengkap"),(0,l.createElement)(I,{type:"text",name:"full_name",id:"full_name",value:m.full_name,onChange:o,required:!0})),(0,l.createElement)(K,null,(0,l.createElement)(V,{htmlFor:"id_number"},"No. KTP (NIK)"),(0,l.createElement)(I,{type:"text",name:"id_number",id:"id_number",value:m.id_number,onChange:o,required:!0})),(0,l.createElement)(K,null,(0,l.createElement)(V,{htmlFor:"phone"},"No. Telepon (WA)"),(0,l.createElement)(I,{type:"tel",name:"phone",id:"phone",value:m.phone,onChange:o})),(0,l.createElement)(K,null,(0,l.createElement)(V,{htmlFor:"email"},"Email"),(0,l.createElement)(I,{type:"email",name:"email",id:"email",value:m.email,onChange:o})),(0,l.createElement)(K,null,(0,l.createElement)(V,{htmlFor:"birth_date"},"Tanggal Lahir"),(0,l.createElement)(I,{type:"date",name:"birth_date",id:"birth_date",value:m.birth_date,onChange:o})),(0,l.createElement)(K,null,(0,l.createElement)(V,{htmlFor:"gender"},"Jenis Kelamin"),(0,l.createElement)(R,{name:"gender",id:"gender",value:m.gender,onChange:o},(0,l.createElement)("option",{value:"male"},"Laki-laki"),(0,l.createElement)("option",{value:"female"},"Perempuan"))),(0,l.createElement)(K,null,(0,l.createElement)(V,{htmlFor:"passport_number"},"No. Paspor"),(0,l.createElement)(I,{type:"text",name:"passport_number",id:"passport_number",value:m.passport_number,onChange:o})),(0,l.createElement)(K,null,(0,l.createElement)(V,{htmlFor:"address"},"Alamat"),(0,l.createElement)(I,{type:"text",name:"address",id:"address",value:m.address,onChange:o})),(0,l.createElement)("hr",{className:"md:col-span-2"}),(0,l.createElement)("h4",{className:"md:col-span-2 text-lg font-semibold text-gray-800 -mb-2"},"Administrasi & Keuangan"),(0,l.createElement)(K,null,(0,l.createElement)(V,{htmlFor:"status"},"Status Jemaah"),(0,l.createElement)(R,{name:"status",id:"status",value:m.status,onChange:o},(0,l.createElement)("option",{value:"pending"},"Pending"),(0,l.createElement)("option",{value:"approved"},"Approved"),(0,l.createElement)("option",{value:"rejected"},"Rejected"),(0,l.createElement)("option",{value:"waitlist"},"Waitlist"))),(0,l.createElement)(K,null,(0,l.createElement)(V,{htmlFor:"total_price"},"Total Tagihan (Rp)"),(0,l.createElement)(I,{type:"number",name:"total_price",id:"total_price",value:m.total_price,onChange:o,placeholder:"Otomatis jika kosong"})),(0,l.createElement)(K,null,(0,l.createElement)(V,{htmlFor:"equipment_status"},"Status Perlengkapan"),(0,l.createElement)(R,{name:"equipment_status",id:"equipment_status",value:m.equipment_status,onChange:o},(0,l.createElement)("option",{value:"belum_di_kirim"},"Belum Dikirim"),(0,l.createElement)("option",{value:"di_kirim"},"Dikirim"),(0,l.createElement)("option",{value:"diterima"},"Diterima"))),(0,l.createElement)("hr",{className:"md:col-span-2"}),(0,l.createElement)("h4",{className:"md:col-span-2 text-lg font-semibold text-gray-800 -mb-2"},"Checklist Verifikasi Dokumen (Admin)"),(0,l.createElement)(K,null,(0,l.createElement)(J,{name:"is_passport_verified",id:"is_passport_verified",checked:!!m.is_passport_verified,onChange:o,label:"Paspor Verified"})),(0,l.createElement)(K,null,(0,l.createElement)(J,{name:"is_ktp_verified",id:"is_ktp_verified",checked:!!m.is_ktp_verified,onChange:o,label:"KTP Verified"})),(0,l.createElement)(K,null,(0,l.createElement)(J,{name:"is_kk_verified",id:"is_kk_verified",checked:!!m.is_kk_verified,onChange:o,label:"KK Verified"})),(0,l.createElement)(K,null,(0,l.createElement)(J,{name:"is_meningitis_verified",id:"is_meningitis_verified",checked:!!m.is_meningitis_verified,onChange:o,label:"Meningitis Verified"}))),(0,l.createElement)(Z,{onCancel:a}))},he=C("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),xe=C("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),ye=C("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ee=({label:e,value:t,color:a})=>(0,l.createElement)("div",{className:"p-3 bg-gray-50 rounded-lg text-center"},(0,l.createElement)("span",{className:"text-xs font-medium text-gray-500 uppercase"},e),(0,l.createElement)("p",{className:`text-xl font-bold ${a}`},t)),fe=({jamaah:e,onClose:t})=>{const{updatePaymentStatus:a,loading:n,error:r}=x(),[s,c]=(0,l.useState)(null),[m,i]=(0,l.useState)(null),o=e?.payments||[],d=o.reduce((e,t)=>"paid"===t.status?e+t.amount:e,0),u=o.reduce((e,t)=>"pending"===t.status?e+t.amount:e,0),p=e?.package_price||0,g=p-d;return(0,l.createElement)(W,{title:`Riwayat Pembayaran: ${e.name}`,onClose:t},(0,l.createElement)("div",{className:"p-6 space-y-4"},r&&(0,l.createElement)(v,{message:r}),s&&(0,l.createElement)(v,{message:s}),(0,l.createElement)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},(0,l.createElement)(Ee,{label:"Total Tagihan",value:O(p),color:"text-blue-600"}),(0,l.createElement)(Ee,{label:"Total Lunas",value:O(d),color:"text-green-600"}),(0,l.createElement)(Ee,{label:"Tertunda",value:O(u),color:"text-yellow-600"}),(0,l.createElement)(Ee,{label:"Sisa Tagihan",value:O(g),color:g>0?"text-red-600":"text-green-600"})),(0,l.createElement)("div",{className:"space-y-3 max-h-96 overflow-y-auto"},0===o.length?(0,l.createElement)("p",{className:"text-center text-gray-500"},"Belum ada riwayat pembayaran."):o.map(e=>{const t=(e=>{switch(e){case"paid":return{icon:(0,l.createElement)(he,{className:"w-4 h-4 text-green-500"}),text:"Lunas",color:"text-green-600"};case"pending":return{icon:(0,l.createElement)(xe,{className:"w-4 h-4 text-yellow-500"}),text:"Pending",color:"text-yellow-600"};case"cancelled":return{icon:(0,l.createElement)(q,{className:"w-4 h-4 text-red-500"}),text:"Dibatalkan",color:"text-red-600"};default:return{icon:(0,l.createElement)(ye,{className:"w-4 h-4 text-gray-500"}),text:"Unknown",color:"text-gray-600"}}})(e.status),r=m===e.id;return(0,l.createElement)("div",{key:e.id,className:"p-4 border rounded-lg bg-white shadow-sm flex flex-col sm:flex-row sm:items-center sm:justify-between"},(0,l.createElement)("div",{className:"flex-1 mb-2 sm:mb-0"},(0,l.createElement)("div",{className:"flex items-center"},t.icon,(0,l.createElement)("span",{className:`ml-2 font-semibold ${t.color}`},t.text)),(0,l.createElement)("p",{className:"text-lg font-bold text-gray-800"},O(e.amount)),(0,l.createElement)("p",{className:"text-sm text-gray-500"},"Metode: ",e.payment_method," | Tanggal: ",D(e.payment_date)),e.notes&&(0,l.createElement)("p",{className:"text-xs text-gray-400 mt-1"},"Catatan: ",e.notes)),(0,l.createElement)("div",{className:"w-full sm:w-48"},r?(0,l.createElement)("div",{className:"flex justify-center items-center h-10"},(0,l.createElement)(j,null)):(0,l.createElement)(R,{value:e.status,onChange:t=>(async(e,t)=>{c(null),i(e);try{await a(e,t)}catch(e){c(e.message||"Gagal mengupdate status.")}finally{i(null)}})(e.id,t.target.value),disabled:n},(0,l.createElement)("option",{value:"pending"},"Pending"),(0,l.createElement)("option",{value:"paid"},"Lunas"),(0,l.createElement)("option",{value:"cancelled"},"Dibatalkan"))))}))),(0,l.createElement)(Z,null,(0,l.createElement)(U,{variant:"secondary",onClick:t,disabled:n},"Tutup")))};var ve={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},be=l.createContext&&l.createContext(ve),we=["attr","size","title"];function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},ke.apply(this,arguments)}function Ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,l)}return a}function _e(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(a),!0).forEach(function(t){var l,n,r,s;l=e,n=t,r=a[t],(n="symbol"==typeof(s=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n))?s:s+"")in l?Object.defineProperty(l,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):l[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ne(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Ce(e){return e&&e.map((e,t)=>l.createElement(e.tag,_e({key:t},e.attr),Ce(e.child)))}function Se(e){return t=>l.createElement(je,ke({attr:_e({},e.attr)},t),Ce(e.child))}function je(e){var t=t=>{var a,{attr:n,size:r,title:s}=e,c=function(e,t){if(null==e)return{};var a,l,n=function(e,t){if(null==e)return{};var a={};for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){if(t.indexOf(l)>=0)continue;a[l]=e[l]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(l=0;l<r.length;l++)a=r[l],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,we),m=r||t.size||"1em";return t.className&&(a=t.className),e.className&&(a=(a?a+" ":"")+e.className),l.createElement("svg",ke({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,c,{className:a,style:_e(_e({color:e.color||t.color},t.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),s&&l.createElement("title",null,s),e.children)};return void 0!==be?l.createElement(be.Consumer,null,e=>t(e)):t(ve)}function Me(e){return Se({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M425.7 256c-16.9 0-32.8-9-41.4-23.4L320 126l-64.2 106.6c-8.7 14.5-24.6 23.5-41.5 23.5-4.5 0-9-.6-13.3-1.9L64 215v178c0 14.7 10 27.5 24.2 31l216.2 54.1c10.2 2.5 20.9 2.5 31 0L551.8 424c14.2-3.6 24.2-16.4 24.2-31V215l-137 39.1c-4.3 1.3-8.8 1.9-13.3 1.9zm212.6-112.2L586.8 41c-3.1-6.2-9.8-9.8-16.7-8.9L320 64l91.7 152.1c3.8 6.3 11.4 9.3 18.5 7.3l197.9-56.5c9.9-2.9 14.7-13.9 10.2-23.1zM53.2 41L1.7 143.8c-4.6 9.2.3 20.2 10.1 23l197.9 56.5c7.1 2 14.7-1 18.5-7.3L320 64 69.8 32.1c-6.9-.8-13.5 2.7-16.6 8.9z"},child:[]}]})(e)}function ze(e){return Se({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M576 240c0-23.63-12.95-44.04-32-55.12V32.01C544 23.26 537.02 0 512 0c-7.12 0-14.19 2.38-19.98 7.02l-85.03 68.03C364.28 109.19 310.66 128 256 128H64c-35.35 0-64 28.65-64 64v96c0 35.35 28.65 64 64 64h33.7c-1.39 10.48-2.18 21.14-2.18 32 0 39.77 9.26 77.35 25.56 110.94 5.19 10.69 16.52 17.06 28.4 17.06h74.28c26.05 0 41.69-29.84 25.9-50.56-16.4-21.52-26.15-48.36-26.15-77.44 0-11.11 1.62-21.79 4.41-32H256c54.66 0 108.28 18.81 150.98 52.95l85.03 68.03a32.023 32.023 0 0 0 19.98 7.02c24.92 0 32-22.78 32-32V295.13C563.05 284.04 576 263.63 576 240zm-96 141.42l-33.05-26.44C392.95 311.78 325.12 288 256 288v-96c69.12 0 136.95-23.78 190.95-66.98L480 98.58v282.84z"},child:[]}]})(e)}function Pe(e){return Se({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(e)}function Le(e){return Se({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function Te(e){return Se({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"},child:[]}]})(e)}function Oe(e){return Se({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 192V77.25c0-8.49-3.37-16.62-9.37-22.63L393.37 9.37c-6-6-14.14-9.37-22.63-9.37H96C78.33 0 64 14.33 64 32v160c-35.35 0-64 28.65-64 64v112c0 8.84 7.16 16 16 16h48v96c0 17.67 14.33 32 32 32h320c17.67 0 32-14.33 32-32v-96h48c8.84 0 16-7.16 16-16V256c0-35.35-28.65-64-64-64zm-64 256H128v-96h256v96zm0-224H128V64h192v48c0 8.84 7.16 16 16 16h48v96zm48 72c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"},child:[]}]})(e)}function Ae(e){return Se({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 32C128.94 32 0 160.94 0 320c0 52.8 14.25 102.26 39.06 144.8 5.61 9.62 16.3 15.2 27.44 15.2h443c11.14 0 21.83-5.58 27.44-15.2C561.75 422.26 576 372.8 576 320c0-159.06-128.94-288-288-288zm0 64c14.71 0 26.58 10.13 30.32 23.65-1.11 2.26-2.64 4.23-3.45 6.67l-9.22 27.67c-5.13 3.49-10.97 6.01-17.64 6.01-17.67 0-32-14.33-32-32S270.33 96 288 96zM96 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm48-160c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32zm246.77-72.41l-61.33 184C343.13 347.33 352 364.54 352 384c0 11.72-3.38 22.55-8.88 32H232.88c-5.5-9.45-8.88-20.28-8.88-32 0-33.94 26.5-61.43 59.9-63.59l61.34-184.01c4.17-12.56 17.73-19.45 30.36-15.17 12.57 4.19 19.35 17.79 15.17 30.36zm14.66 57.2l15.52-46.55c3.47-1.29 7.13-2.23 11.05-2.23 17.67 0 32 14.33 32 32s-14.33 32-32 32c-11.38-.01-20.89-6.28-26.57-15.22zM480 384c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"},child:[]}]})(e)}function De(e){return Se({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function He(e){return Se({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"},child:[]}]})(e)}function Fe(e){return Se({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 208h-64v-64c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v64h-64c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h64v64c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-64h64c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function qe(e){return Se({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm95.8 32.6L272 480l-32-136 32-56h-96l32 56-32 136-47.8-191.4C56.9 292 0 350.3 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-72.1-56.9-130.4-128.2-133.8z"},child:[]}]})(e)}function Be(e){return Se({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(e)}const Ue=({openModal:e})=>{const{user:t}=u(),{data:a,loading:n,error:r,createOrUpdate:s,deleteItem:c}=x(),{jamaah:m=[],packages:i=[]}=a||{},[o,d]=(0,l.useState)(""),[p,g]=(0,l.useState)(""),[h,y]=(0,l.useState)(!1),[E,f]=(0,l.useState)(null),[b,w]=(0,l.useState)(null),k=(0,l.useMemo)(()=>m.filter(e=>{const t=e.full_name?.toLowerCase().includes(o.toLowerCase()),a=e.id_number?.includes(o),l=t||a,n=!p||e.package_id==p;return l&&n}),[m,o,p]),N=(t=null)=>{e(t?"Edit Jamaah":"Tambah Jamaah",(0,l.createElement)(ge,{initialData:t,packages:i,onSave:async e=>{await s("jamaah",e,t?t.id:null)}}))};return n&&0===m.length?(0,l.createElement)(j,null):r?(0,l.createElement)(v,{message:r}):(0,l.createElement)("div",{className:"p-6 space-y-6"},(0,l.createElement)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4"},(0,l.createElement)("div",null,(0,l.createElement)("h2",{className:"text-2xl font-bold text-gray-800"},"Data Jemaah"),(0,l.createElement)("p",{className:"text-sm text-gray-500"},"Total: ",k.length," Jemaah")),(0,l.createElement)("div",{className:"flex flex-col md:flex-row gap-2 w-full md:w-auto"},(0,l.createElement)(I,{placeholder:"Cari Nama / NIK...",value:o,onChange:e=>d(e.target.value),className:"min-w-[250px]"}),(0,l.createElement)(R,{value:p,onChange:e=>g(e.target.value),className:"min-w-[200px]"},(0,l.createElement)("option",{value:""},"Semua Paket"),i.map(e=>(0,l.createElement)("option",{key:e.id,value:e.id},e.title))),(0,l.createElement)(U,{onClick:()=>N()},(0,l.createElement)(Fe,{className:"mr-2"})," Tambah"))),(0,l.createElement)("div",{className:"overflow-x-auto bg-white rounded-lg shadow border border-gray-200"},(0,l.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,l.createElement)("thead",{className:"bg-gray-50"},(0,l.createElement)("tr",null,(0,l.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Jemaah"),(0,l.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Paket"),(0,l.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),(0,l.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Pembayaran"),(0,l.createElement)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi"))),(0,l.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},0===k.length?(0,l.createElement)("tr",null,(0,l.createElement)("td",{colSpan:"5",className:"px-6 py-10 text-center text-gray-500"},"Tidak ada data jemaah yang sesuai filter.")):k.map(e=>{const t=parseFloat(e.total_price||0),a=parseFloat(e.amount_paid||0),n=t-a,r=n<=0&&t>0;return(0,l.createElement)("tr",{key:e.id,className:"hover:bg-gray-50 transition-colors"},(0,l.createElement)("td",{className:"px-6 py-4"},(0,l.createElement)("div",{className:"flex items-center"},(0,l.createElement)("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-bold mr-3"},e.full_name.charAt(0)),(0,l.createElement)("div",null,(0,l.createElement)("div",{className:"text-sm font-medium text-gray-900"},e.full_name),(0,l.createElement)("div",{className:"text-xs text-gray-500"},e.passport_number||e.id_number)))),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700"},(e=>{const t=i.find(t=>t.id==e);return t?t.title:(0,l.createElement)("span",{className:"text-gray-400 italic"},"Paket Dihapus")})(e.package_id)),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},(0,l.createElement)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full "+("approved"===e.status?"bg-green-100 text-green-800":"rejected"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800")},e.status.toUpperCase())),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm"},(0,l.createElement)("div",{className:"flex flex-col"},(0,l.createElement)("span",{className:"font-medium"},O(a)),(0,l.createElement)("span",{className:"text-xs "+(r?"text-green-600":"text-red-500")},r?"Lunas":`Sisa: ${O(n)}`))),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},(0,l.createElement)(U,{variant:"icon",title:"Pembayaran",onClick:()=>w(e)},(0,l.createElement)(Te,{className:"text-green-600"})),(0,l.createElement)(U,{variant:"icon",title:"Cetak ID Card",onClick:()=>(e=>{window.umh_wp_data?.printUrl?window.open(`${window.umh_wp_data.printUrl}&jamaah_id=${e.id}`,"_blank"):alert("URL Print tidak ditemukan.")})(e)},(0,l.createElement)(Oe,{className:"text-gray-600"})),(0,l.createElement)(U,{variant:"icon",title:"Edit",onClick:()=>N(e)},(0,l.createElement)(Le,{className:"text-blue-600"})),(0,l.createElement)(U,{variant:"icon",title:"Hapus",onClick:()=>(e=>{f(e),y(!0)})(e)},(0,l.createElement)(De,{className:"text-red-600"}))))})))),h&&(0,l.createElement)(W,{isOpen:h,onClose:()=>y(!1),title:"Hapus Jemaah"},(0,l.createElement)("div",{className:"p-6"},(0,l.createElement)("p",{className:"text-gray-700 mb-6"},"Apakah Anda yakin ingin menghapus data jemaah ",(0,l.createElement)("strong",null,E?.full_name),"?",(0,l.createElement)("br",null),(0,l.createElement)("span",{className:"text-red-500 text-sm"},"Tindakan ini tidak dapat dibatalkan dan akan menghapus riwayat pembayaran terkait.")),(0,l.createElement)("div",{className:"flex justify-end gap-3"},(0,l.createElement)(U,{variant:"secondary",onClick:()=>y(!1)},"Batal"),(0,l.createElement)(U,{variant:"danger",onClick:async()=>{E&&(await c("jamaah",E.id),y(!1),f(null))}},"Hapus Permanen")))),b&&(0,l.createElement)(fe,{jamaah:b,onClose:()=>w(null)}))},Ie=C("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Re=C("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),$e=C("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Ke=C("hotel",[["path",{d:"M10 22v-6.57",key:"1wmca3"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M14 15.43V22",key:"1q2vjd"}],["path",{d:"M15 16a5 5 0 0 0-6 0",key:"o9wqvi"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]),Ve=C("plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]),Je=({data:e,onClose:t})=>{const{createOrUpdate:a,loading:n,error:r}=x(),[s,c]=(0,l.useState)(null),[m,i]=(0,l.useState)(!1),o=e||{name:"",description:"",price:"0",duration_days:"9",start_date:"",end_date:"",departure_city:"Jakarta",total_seats:45,available_seats:45,status:"available",includes_flights:!0,includes_hotels:!0,includes_visa:!0,itinerary:JSON.stringify([{day:"1",title:"",details:""}]),includes:[]},[d,u]=(0,l.useState)({name:o.name,description:o.description,duration_days:o.duration_days,start_date:o.start_date,end_date:o.end_date,departure_city:o.departure_city,total_seats:o.total_seats,available_seats:o.available_seats,status:o.status,includes_flights:!!o.includes_flights,includes_hotels:!!o.includes_hotels,includes_visa:!!o.includes_visa}),[p,g]=(0,l.useState)(O(o.price)),[h,y]=(0,l.useState)(o.itinerary?JSON.parse(o.itinerary):[{day:"1",title:"",details:""}]),[E,f]=(0,l.useState)(o.includes?o.includes.join("\n"):"");(0,l.useEffect)(()=>{r&&c(r)},[r]);const b=e=>{const{name:t,value:a,type:l,checked:n}=e.target;u(e=>({...e,[t]:"checkbox"===l?n:a}))},w=(e,t,a)=>{const l=[...h];l[e][t]=a,y(l)};return(0,l.createElement)("form",{onSubmit:async l=>{l.preventDefault(),c(null),i(!0);const n={...d,price:A(p),itinerary:JSON.stringify(h),includes:E.split("\n").filter(e=>""!==e.trim()),duration_days:parseInt(d.duration_days,10)||0,total_seats:parseInt(d.total_seats,10)||0,available_seats:parseInt(d.available_seats,10)||0};e&&e.id&&(n.id=e.id);try{await a("package",n),i(!1),t()}catch(e){i(!1),c(e.message||"Gagal menyimpan paket.")}},className:"space-y-8"},s&&(0,l.createElement)(v,{message:s}),(0,l.createElement)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200"},(0,l.createElement)("h4",{className:"text-md font-bold text-gray-700 mb-4 flex items-center uppercase tracking-wider"},(0,l.createElement)(Ie,{className:"w-4 h-4 mr-2"})," Informasi Dasar"),(0,l.createElement)("div",{className:"grid grid-cols-1 gap-4"},(0,l.createElement)(I,{label:"Nama Paket",name:"name",placeholder:"Contoh: Paket Umroh Awal Ramadhan",value:d.name,onChange:b,required:!0}),(0,l.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},(0,l.createElement)(I,{label:"Harga (IDR)",name:"price",value:p,onChange:e=>g(O(e.target.value)),required:!0,className:"font-bold text-green-700"}),(0,l.createElement)(R,{label:"Status Paket",name:"status",value:d.status,onChange:b},(0,l.createElement)("option",{value:"available"},"Tersedia (Buka Pendaftaran)"),(0,l.createElement)("option",{value:"full"},"Penuh (Full Booked)"),(0,l.createElement)("option",{value:"completed"},"Selesai (Berangkat)"),(0,l.createElement)("option",{value:"draft"},"Draft (Disembunyikan)"))),(0,l.createElement)($,{label:"Deskripsi Singkat",name:"description",value:d.description,onChange:b,rows:2}))),(0,l.createElement)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100"},(0,l.createElement)("h4",{className:"text-md font-bold text-blue-800 mb-4 flex items-center uppercase tracking-wider"},(0,l.createElement)(Re,{className:"w-4 h-4 mr-2"})," Jadwal & Kuota"),(0,l.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},(0,l.createElement)(I,{label:"Tanggal Berangkat",name:"start_date",type:"date",value:d.start_date,onChange:b,required:!0}),(0,l.createElement)(I,{label:"Tanggal Pulang",name:"end_date",type:"date",value:d.end_date,onChange:b,required:!0}),(0,l.createElement)(I,{label:"Durasi (Hari)",name:"duration_days",type:"number",value:d.duration_days,onChange:b,required:!0})),(0,l.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4"},(0,l.createElement)(I,{label:"Kota Keberangkatan",name:"departure_city",value:d.departure_city,onChange:b,required:!0,icon:(0,l.createElement)($e,null)}),(0,l.createElement)(I,{label:"Total Kursi (Seat)",name:"total_seats",type:"number",value:d.total_seats,onChange:b,required:!0}),(0,l.createElement)(I,{label:"Sisa Kursi",name:"available_seats",type:"number",value:d.available_seats,onChange:b,required:!0}))),(0,l.createElement)("div",{className:"border p-4 rounded-lg"},(0,l.createElement)("h4",{className:"text-md font-bold text-gray-700 mb-4 flex items-center uppercase tracking-wider"},(0,l.createElement)(Ke,{className:"w-4 h-4 mr-2"})," Fasilitas & Layanan"),(0,l.createElement)("div",{className:"flex gap-6 mb-4 p-3 bg-gray-50 rounded-md"},(0,l.createElement)(J,{label:"Termasuk Penerbangan",name:"includes_flights",checked:d.includes_flights,onChange:b}),(0,l.createElement)(J,{label:"Termasuk Hotel",name:"includes_hotels",checked:d.includes_hotels,onChange:b}),(0,l.createElement)(J,{label:"Termasuk Visa",name:"includes_visa",checked:d.includes_visa,onChange:b})),(0,l.createElement)($,{label:"Fasilitas Lainnya (Satu per baris)",name:"includes",value:E,onChange:e=>f(e.target.value),rows:4,placeholder:" Makan 3x Sehari menu Indonesia\n Bus AC Eksekutif\n Muthawif Berpengalaman"})),(0,l.createElement)("div",null,(0,l.createElement)("div",{className:"flex justify-between items-center mb-4"},(0,l.createElement)("h4",{className:"text-md font-bold text-gray-700 flex items-center uppercase tracking-wider"},(0,l.createElement)(Ve,{className:"w-4 h-4 mr-2"})," Rencana Perjalanan (Itinerary)"),(0,l.createElement)(U,{type:"button",variant:"secondary",size:"sm",onClick:()=>y([...h,{day:`${h.length+1}`,title:"",details:""}])},(0,l.createElement)(Q,{className:"w-4 h-4 mr-1"})," Tambah Hari")),(0,l.createElement)("div",{className:"space-y-3"},h.map((e,t)=>(0,l.createElement)("div",{key:t,className:"flex gap-3 items-start bg-white border p-3 rounded-md shadow-sm group hover:border-blue-300 transition-colors"},(0,l.createElement)("div",{className:"w-12 pt-2"},(0,l.createElement)("div",{className:"bg-blue-100 text-blue-800 font-bold rounded-full w-8 h-8 flex items-center justify-center text-sm"},t+1)),(0,l.createElement)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-3"},(0,l.createElement)(I,{label:"Judul Kegiatan",value:e.title,onChange:e=>w(t,"title",e.target.value),placeholder:"Contoh: Tiba di Madinah",className:"md:col-span-1"}),(0,l.createElement)("div",{className:"md:col-span-2 relative"},(0,l.createElement)($,{label:"Detail",value:e.details,onChange:e=>w(t,"details",e.target.value),rows:2,placeholder:"Deskripsi kegiatan..."}))),h.length>1&&(0,l.createElement)("button",{type:"button",onClick:()=>y(h.filter((e,a)=>a!==t)),className:"text-gray-400 hover:text-red-500 mt-8",title:"Hapus Hari"},(0,l.createElement)(le,{className:"w-5 h-5"})))))),(0,l.createElement)("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200"},(0,l.createElement)(U,{type:"button",variant:"secondary",onClick:t,disabled:m||n},"Batal"),(0,l.createElement)(U,{type:"submit",disabled:m||n,className:"min-w-[120px]"},m||n?(0,l.createElement)(j,null):e?"Update Paket":"Simpan Paket")))},Ge=C("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),We=C("package-x",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["path",{d:"m17 13 5 5m-5 0 5-5",key:"im3w4b"}]]),Ze=()=>{const{data:e,loading:t,error:a,deleteItem:n,refreshData:r}=x(),{packages:s=[]}=e||{},[c,m]=(0,l.useState)(""),[i,o]=(0,l.useState)({isOpen:!1,data:null}),[d,u]=(0,l.useState)({isOpen:!1,id:null}),p=(0,l.useMemo)(()=>s.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())||e.description&&e.description.toLowerCase().includes(c.toLowerCase())),[s,c]);return t&&0===s.length?(0,l.createElement)(j,null):a?(0,l.createElement)(v,{message:a}):(0,l.createElement)("div",{className:"p-6 space-y-6"},(0,l.createElement)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4"},(0,l.createElement)("div",null,(0,l.createElement)("h1",{className:"text-2xl font-bold text-gray-800"},"Manajemen Paket Umroh"),(0,l.createElement)("p",{className:"text-gray-500 text-sm"},"Kelola semua paket perjalanan Anda di sini.")),(0,l.createElement)("button",{onClick:()=>o({isOpen:!0,data:null}),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 transition-colors"},(0,l.createElement)(Q,{className:"w-5 h-5 mr-2"}),"Tambah Paket Baru")),(0,l.createElement)("div",{className:"relative max-w-md"},(0,l.createElement)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},(0,l.createElement)(Ge,{className:"h-5 w-5 text-gray-400"})),(0,l.createElement)("input",{type:"text",placeholder:"Cari paket berdasarkan nama...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",value:c,onChange:e=>m(e.target.value)})),(0,l.createElement)("div",{className:"bg-white shadow rounded-xl overflow-hidden border border-gray-200"},(0,l.createElement)("div",{className:"overflow-x-auto"},(0,l.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,l.createElement)("thead",{className:"bg-gray-50"},(0,l.createElement)("tr",null,(0,l.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider"},"Nama Paket"),(0,l.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider"},"Info"),(0,l.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider"},"Harga Mulai"),(0,l.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider"},"Seat"),(0,l.createElement)("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase tracking-wider"},"Status"),(0,l.createElement)("th",{className:"px-6 py-3 text-right text-xs font-bold text-gray-500 uppercase tracking-wider"},"Aksi"))),(0,l.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},0===p.length?(0,l.createElement)("tr",null,(0,l.createElement)("td",{colSpan:"6",className:"px-6 py-16 text-center"},(0,l.createElement)("div",{className:"flex flex-col items-center justify-center text-gray-400"},(0,l.createElement)(We,{className:"w-16 h-16 mb-4 opacity-50"}),(0,l.createElement)("h3",{className:"text-lg font-medium text-gray-900"},"Tidak ada paket ditemukan"),(0,l.createElement)("p",{className:"mb-4"},"Coba kata kunci lain atau buat paket baru."),(0,l.createElement)("button",{onClick:()=>o({isOpen:!0,data:null}),className:"text-blue-600 hover:underline font-medium"},"+ Buat Paket Sekarang")))):p.map(e=>(0,l.createElement)("tr",{key:e.id,className:"hover:bg-gray-50 transition-colors"},(0,l.createElement)("td",{className:"px-6 py-4"},(0,l.createElement)("div",{className:"font-bold text-gray-900"},e.name),(0,l.createElement)("div",{className:"text-xs text-gray-500 line-clamp-1"},e.description)),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},(0,l.createElement)("div",{className:"text-sm text-gray-900 flex items-center"},(0,l.createElement)(Re,{className:"w-3 h-3 mr-1 text-gray-400"}),e.duration_days," Hari"),(0,l.createElement)("div",{className:"text-xs text-gray-500"},e.start_date?`${D(e.start_date)}`:"TBA")),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},(0,l.createElement)("span",{className:"text-sm font-bold text-green-600 bg-green-50 px-2 py-1 rounded-md border border-green-100"},O((e=>{if(!e)return 0;try{let t="string"==typeof e?JSON.parse(e):e;const a=Array.isArray(t)?t.map(e=>parseFloat(e.price)):Object.values(t).map(e=>parseFloat(e));return a.length?Math.min(...a.filter(e=>e>0)):0}catch(e){return 0}})(e.price_details)||e.price))),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},(0,l.createElement)("div",{className:"flex items-center"},(0,l.createElement)(z,{className:"w-3 h-3 mr-1"}),(0,l.createElement)("span",{className:e.available_seats<10?"text-red-600 font-bold":""},e.available_seats),(0,l.createElement)("span",{className:"text-gray-400 mx-1"},"/"),e.total_seats)),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},(0,l.createElement)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full "+("available"===e.status?"bg-blue-100 text-blue-800":"full"===e.status?"bg-red-100 text-red-800":"completed"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800")},"available"===e.status?"Tersedia":e.status.toUpperCase())),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},(0,l.createElement)("div",{className:"flex items-center justify-end space-x-3"},(0,l.createElement)("button",{onClick:()=>o({isOpen:!0,data:e}),className:"text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 rounded",title:"Edit Paket"},(0,l.createElement)(ae,{className:"w-5 h-5"})),(0,l.createElement)("button",{onClick:()=>u({isOpen:!0,id:e.id}),className:"text-red-600 hover:text-red-900 p-1 hover:bg-red-50 rounded",title:"Hapus Paket"},(0,l.createElement)(le,{className:"w-5 h-5"})))))))))),(0,l.createElement)(W,{title:i.data?"Edit Paket":"Tambah Paket Baru",isOpen:i.isOpen,onClose:()=>o({isOpen:!1,data:null}),size:"4xl"},(0,l.createElement)(Je,{data:i.data,onClose:()=>{o({isOpen:!1,data:null}),r("packages")}})),(0,l.createElement)(W,{title:"Hapus Paket",isOpen:d.isOpen,onClose:()=>u({isOpen:!1,id:null}),size:"sm"},(0,l.createElement)("div",{className:"p-2"},(0,l.createElement)("p",{className:"text-gray-600 mb-6"},"Apakah Anda yakin ingin menghapus paket ini? Tindakan ini tidak dapat dibatalkan."),(0,l.createElement)("div",{className:"flex justify-end gap-3"},(0,l.createElement)("button",{onClick:()=>u({isOpen:!1,id:null}),className:"px-4 py-2 bg-white border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"},"Batal"),(0,l.createElement)("button",{onClick:async()=>{if(d.id)try{await n("package",d.id),r("packages"),u({isOpen:!1,id:null})}catch(e){alert("Gagal menghapus paket.")}},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 shadow-sm"},"Hapus Paket")))))},Ye=()=>{const{logs:e,users:t,loadingLogs:a,error:n,fetchLogs:r}=x();return(0,l.useEffect)(()=>{r()},[r]),(0,l.createElement)("div",{className:"bg-white shadow-lg rounded-lg p-6 relative min-h-[300px]"},(0,l.createElement)("div",{className:"flex justify-between items-center mb-6"},(0,l.createElement)("h2",{className:"text-2xl font-semibold text-gray-800"},"Log Aktivitas")),n&&(0,l.createElement)(v,{message:n}),a&&(0,l.createElement)(j,null),!a&&!n&&(0,l.createElement)("div",{className:"overflow-x-auto"},(0,l.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,l.createElement)("thead",{className:"bg-gray-50"},(0,l.createElement)("tr",null,(0,l.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Waktu"),(0,l.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Pengguna"),(0,l.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi"),(0,l.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Objek"),(0,l.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID Objek"),(0,l.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Detail"))),(0,l.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},0===e.length&&(0,l.createElement)("tr",null,(0,l.createElement)("td",{colSpan:"6",className:"px-6 py-4 text-center text-gray-500"},"Tidak ada log.")),e.map(e=>(0,l.createElement)("tr",{key:e.id,className:"hover:bg-gray-50"},(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},D(e.created_at)),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},(e=>{const a=t.find(t=>t.id==e);return a?a.full_name:"Sistem"})(e.user_id)),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},(e=>{const t=(e||"pending").replace(/_/g," "),a=t.toLowerCase().replace(/ /g,"_").replace(/[^a-z0-9_]/g,"");return(0,l.createElement)("span",{className:`status-badge ${a}`},t)})(e.action)),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},e.object_type),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600"},e.object_id),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600 truncate max-w-xs"},e.details)))))))},Qe=({initialData:e,onSave:t,onClose:a,onSubmit:n,onCancel:r})=>{const s=a||r,{loading:c,error:m}=x(),[i,o]=(0,l.useState)({agent_id:"",name:"",join_date:H(new Date),id_number:"",address:"",phone:"",notes:"",status:"active"}),[d,u]=(0,l.useState)(null);(0,l.useEffect)(()=>{m&&u(m.message)},[m]),(0,l.useEffect)(()=>{o(e?{...e,join_date:H(e.join_date)}:{agent_id:"",name:"",join_date:H(new Date),id_number:"",address:"",phone:"",notes:"",status:"active"})},[e]);const p=e=>{const{name:t,value:a}=e.target;o(e=>({...e,[t]:a}))};return(0,l.createElement)("form",{onSubmit:e=>{e.preventDefault(),u(null);const a=t||n;a&&a(i),s&&s()},className:"space-y-4"},d&&(0,l.createElement)(v,{message:d}),(0,l.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},(0,l.createElement)(K,null,(0,l.createElement)(V,{htmlFor:"agent_id"},"No. ID Agent (SA-001)"),(0,l.createElement)(I,{type:"text",name:"agent_id",id:"agent_id",value:i.agent_id,onChange:p,placeholder:"Contoh: SA-001"})),(0,l.createElement)(K,null,(0,l.createElement)(V,{htmlFor:"name"},"Nama"),(0,l.createElement)(I,{type:"text",name:"name",id:"name",value:i.name,onChange:p,required:!0})),(0,l.createElement)(K,null,(0,l.createElement)(V,{htmlFor:"join_date"},"Tanggal Bergabung"),(0,l.createElement)(I,{type:"date",name:"join_date",id:"join_date",value:i.join_date,onChange:p})),(0,l.createElement)(K,null,(0,l.createElement)(V,{htmlFor:"id_number"},"No. KTP"),(0,l.createElement)(I,{type:"text",name:"id_number",id:"id_number",value:i.id_number,onChange:p})),(0,l.createElement)(K,{className:"md:col-span-2"},(0,l.createElement)(V,{htmlFor:"address"},"Alamat"),(0,l.createElement)($,{name:"address",id:"address",value:i.address,onChange:p,rows:3})),(0,l.createElement)(K,null,(0,l.createElement)(V,{htmlFor:"phone"},"Telepon (WA)"),(0,l.createElement)(I,{type:"tel",name:"phone",id:"phone",value:i.phone,onChange:p})),(0,l.createElement)(K,null,(0,l.createElement)(V,{htmlFor:"status"},"Status"),(0,l.createElement)(R,{name:"status",id:"status",value:i.status,onChange:p},(0,l.createElement)("option",{value:"active"},"Aktif"),(0,l.createElement)("option",{value:"inactive"},"Tidak Aktif"))),(0,l.createElement)(K,{className:"md:col-span-2"},(0,l.createElement)(V,{htmlFor:"notes"},"Keterangan"),(0,l.createElement)($,{name:"notes",id:"notes",value:i.notes,onChange:p,rows:2}))),(0,l.createElement)(Z,{onCancel:s,submitText:e?"Update":"Simpan"}))},Xe=({openModal:e})=>{const{user:t}=u(),{data:a,loading:n,error:r,createOrUpdate:s,deleteItem:c}=x(),{sub_agents:m}=a||{sub_agents:[]},[i,o]=(0,l.useState)(""),[d,p]=(0,l.useState)(!1),[g,h]=(0,l.useState)(null),y=(t=null)=>{e(t?"Edit Sub Agen":"Tambah Sub Agen",(0,l.createElement)(Qe,{initialData:t,onSave:e=>{s("sub_agents",e,t?t.id:null)}}))},E=(0,l.useMemo)(()=>(m||[]).filter(e=>e.name.toLowerCase().includes(i.toLowerCase())||e.address&&e.address.toLowerCase().includes(i.toLowerCase())),[m,i]);return n?(0,l.createElement)(j,null):r?(0,l.createElement)(v,{message:r.message}):(0,l.createElement)("div",{className:"p-6"},(0,l.createElement)("h2",{className:"text-2xl font-semibold mb-4 text-gray-800"},"Manajemen Sub Agen"),(0,l.createElement)("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 gap-4"},(0,l.createElement)(I,{type:"text",placeholder:"Cari nama atau alamat sub agen...",className:"w-full md:w-2/3",value:i,onChange:e=>o(e.target.value)}),(0,l.createElement)(U,{variant:"primary",onClick:()=>y(),className:"w-full md:w-auto"},(0,l.createElement)(qe,{className:"mr-2"}),"Tambah Sub Agen")),(0,l.createElement)("div",{className:"overflow-x-auto bg-white rounded-lg shadow"},(0,l.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,l.createElement)("thead",{className:"bg-gray-50"},(0,l.createElement)("tr",null,(0,l.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nama"),(0,l.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Alamat"),(0,l.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),(0,l.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Aksi"))),(0,l.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},E.map(e=>(0,l.createElement)("tr",{key:e.id},(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},e.name),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700"},e.address||"-"),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700"},(0,l.createElement)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full "+("active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800")},"active"===e.status?"Aktif":"Tidak Aktif")),(0,l.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700"},(0,l.createElement)("div",{className:"flex gap-2"},(0,l.createElement)(U,{variant:"warning",size:"sm",onClick:()=>y(e),title:"Edit"},(0,l.createElement)(Le,null)),(0,l.createElement)(U,{variant:"danger",size:"sm",onClick:()=>(e=>{h(e),p(!0)})(e),title:"Hapus"},(0,l.createElement)(De,null)))))))),0===E.length&&(0,l.createElement)("p",{className:"text-center p-4 text-gray-500"},"Data tidak ditemukan.")),d&&(0,l.createElement)(W,{isOpen:d,onClose:()=>p(!1),title:"Konfirmasi Hapus"},(0,l.createElement)("div",{className:"p-4"},(0,l.createElement)("p",{className:"text-gray-700"},"Anda yakin ingin menghapus data sub agen: ",(0,l.createElement)("strong",null,g?.name),"?"),(0,l.createElement)("div",{className:"flex justify-end gap-3 mt-6"},(0,l.createElement)(U,{variant:"secondary",onClick:()=>p(!1)},"Batal"),(0,l.createElement)(U,{variant:"danger",onClick:()=>{g&&(c("sub_agents",g.id),p(!1),h(null))}},"Ya, Hapus")))))},et=()=>{const{currentUser:e}=u(),[t,a]=(0,l.useState)("dashboard"),[r,s]=(0,l.useState)(!1),[c,m]=(0,l.useState)(""),[i,o]=(0,l.useState)(null),d=(e,t)=>{m(e),o(n().cloneElement(t,{onClose:()=>s(!1),onSubmit:e=>{console.log("Form submitted",e),s(!1)}})),s(!0)},p=()=>{s(!1),m(""),o(null)};if(!e)return(0,l.createElement)(M,null);const g=[{id:"dashboard",label:"Dashboard",icon:(0,l.createElement)(Ae,{className:"mr-3"}),roles:["admin","finance","marketing","hr","jamaah","owner","super_admin","administrator"]},{id:"finance",label:"Finance",icon:(0,l.createElement)(Te,{className:"mr-3"}),roles:["admin","finance","owner","super_admin","administrator","admin_staff","finance_staff"]},{id:"marketing",label:"Marketing",icon:(0,l.createElement)(ze,{className:"mr-3"}),roles:["admin","marketing","owner","super_admin","administrator","admin_staff","marketing_staff"]},{id:"sub_agents",label:"Sub Agen",icon:(0,l.createElement)(qe,{className:"mr-3"}),roles:["admin","marketing","owner","super_admin","administrator","admin_staff","marketing_staff"]},{id:"hr",label:"HR",icon:(0,l.createElement)(Be,{className:"mr-3"}),roles:["admin","hr","owner","super_admin","administrator","admin_staff","hr_staff"]},{id:"jamaah",label:"Jamaah",icon:(0,l.createElement)(He,{className:"mr-3"}),roles:["admin","jamaah","marketing","finance","owner","super_admin","administrator","admin_staff","finance_staff","marketing_staff"]},{id:"packages",label:"Packages",icon:(0,l.createElement)(Me,{className:"mr-3"}),roles:["admin","marketing","owner","super_admin","administrator","admin_staff","marketing_staff"]},{id:"logs",label:"Logs",icon:(0,l.createElement)(Pe,{className:"mr-3"}),roles:["admin","owner","super_admin","administrator","admin_staff"]}].filter(t=>t.roles.includes(e.role));return(0,l.createElement)(y,null,(0,l.createElement)("div",{className:"flex h-screen bg-gray-100"},(0,l.createElement)("aside",{className:"w-64 bg-white text-gray-800 p-4 shadow-lg overflow-y-auto"},(0,l.createElement)("h1",{className:"text-2xl font-bold mb-6 text-indigo-600"},"Manajemen Umroh"),(0,l.createElement)("nav",null,(0,l.createElement)("ul",null,g.map(e=>(0,l.createElement)("li",{key:e.id,className:"mb-2"},(0,l.createElement)("button",{onClick:()=>a(e.id),className:"flex items-center w-full px-4 py-2 rounded-lg text-left transition-all duration-200 "+(t===e.id?"bg-indigo-600 text-white shadow-md":"hover:bg-indigo-50 hover:text-indigo-600")},e.icon,e.label)))))),(0,l.createElement)("main",{className:"flex-1 overflow-y-auto"},(0,l.createElement)("header",{className:"bg-white shadow-sm p-4 flex justify-between items-center sticky top-0 z-50"},(0,l.createElement)("h2",{className:"text-xl font-semibold text-gray-700 capitalize"},t.replace("_"," ")),(0,l.createElement)("div",{className:"text-right"},(0,l.createElement)("span",{className:"font-medium text-gray-800"},e.full_name),(0,l.createElement)("span",{className:"ml-2 text-sm text-gray-500 capitalize"},"(",e.role,")"))),(0,l.createElement)("div",{className:"p-6"},"dashboard"===t&&(0,l.createElement)(F,{openModal:d}),"finance"===t&&(0,l.createElement)(re,{openModal:d}),"marketing"===t&&(0,l.createElement)(ie,{openModal:d}),"sub_agents"===t&&(0,l.createElement)(Xe,{openModal:d}),"hr"===t&&(0,l.createElement)(pe,{openModal:d}),"jamaah"===t&&(0,l.createElement)(Ue,{openModal:d}),"packages"===t&&(0,l.createElement)(Ze,{openModal:d}),"logs"===t&&(0,l.createElement)(Ye,null))),r&&(0,l.createElement)(W,{isOpen:r,onClose:p,title:c},i&&n().cloneElement(i,{onClose:p,onSubmit:()=>{p()}}))))},tt=()=>(0,l.createElement)(d,null,(0,l.createElement)(et,null)),at=document.getElementById("umh-admin-app");at?(0,r.H)(at).render((0,l.createElement)(n().StrictMode,null,(0,l.createElement)(d,null,(0,l.createElement)(y,null,(0,l.createElement)(tt,null))))):console.error("Target element #umh-admin-app not found.")})();