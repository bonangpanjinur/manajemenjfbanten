"use strict";(globalThis.webpackChunkumroh_manager_hybrid_src=globalThis.webpackChunkumroh_manager_hybrid_src||[]).push([[764],{764:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var r=a(609),l=a(899),s=a(313),n=a(226);const m=()=>{const{apiRequest:e}=(0,l.g)(),[t,a]=(0,r.useState)([]),[m,c]=(0,r.useState)(!0),[o,i]=(0,r.useState)(null),[d,x]=(0,r.useState)("all"),[g,u]=(0,r.useState)(1),[p,y]=(0,r.useState)(1),b=async()=>{c(!0);try{const t=await e(`/logs?page=${g}&level=${d}`);t&&t.success?(a(t.data||[]),y(t.pagination?.total_pages||1)):a([])}catch(e){console.error("Error fetching logs:",e),i("Gagal memuat data log sistem.")}finally{c(!1)}};(0,r.useEffect)(()=>{b()},[g,d]);const f=e=>{switch(e?.toLowerCase()){case"error":return"bg-red-100 text-red-800";case"warning":return"bg-yellow-100 text-yellow-800";case"info":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return m&&1===g&&0===t.length?(0,r.createElement)(s.A,null):(0,r.createElement)("div",{className:"space-y-6"},(0,r.createElement)("div",{className:"flex justify-between items-center"},(0,r.createElement)("h1",{className:"text-2xl font-semibold text-gray-900"},"System Logs"),(0,r.createElement)("div",{className:"flex gap-2"},(0,r.createElement)("button",{onClick:b,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"},"Refresh"),(0,r.createElement)("select",{value:d,onChange:e=>{x(e.target.value),u(1)},className:"block w-40 rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500 sm:text-sm"},(0,r.createElement)("option",{value:"all"},"Semua Level"),(0,r.createElement)("option",{value:"info"},"Info"),(0,r.createElement)("option",{value:"warning"},"Warning"),(0,r.createElement)("option",{value:"error"},"Error")))),o&&(0,r.createElement)(n.A,{message:o}),(0,r.createElement)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg"},(0,r.createElement)("div",{className:"overflow-x-auto"},(0,r.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,r.createElement)("thead",{className:"bg-gray-50"},(0,r.createElement)("tr",null,(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Waktu"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Level"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"User"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Pesan"),(0,r.createElement)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Context"))),(0,r.createElement)("tbody",{className:"bg-white divide-y divide-gray-200"},t.length>0?t.map((e,t)=>(0,r.createElement)("tr",{key:e.id||t,className:"hover:bg-gray-50"},(0,r.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},e.created_at),(0,r.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},(0,r.createElement)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${f(e.level)}`},e.level)),(0,r.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},e.user_name||"System"),(0,r.createElement)("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-xs truncate",title:e.message},e.message),(0,r.createElement)("td",{className:"px-6 py-4 text-sm text-gray-500 font-mono text-xs"},e.context?JSON.stringify(e.context).substring(0,30)+"...":"-"))):(0,r.createElement)("tr",null,(0,r.createElement)("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500"},"Tidak ada log ditemukan."))))),p>1&&(0,r.createElement)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},(0,r.createElement)("div",{className:"flex-1 flex justify-between"},(0,r.createElement)("button",{onClick:()=>u(e=>Math.max(1,e-1)),disabled:1===g,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 "+(1===g?"opacity-50 cursor-not-allowed":"")},"Previous"),(0,r.createElement)("span",{className:"text-sm text-gray-700 self-center"},"Halaman ",g," dari ",p),(0,r.createElement)("button",{onClick:()=>u(e=>Math.min(p,e+1)),disabled:g===p,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 "+(g===p?"opacity-50 cursor-not-allowed":"")},"Next")))))}}}]);