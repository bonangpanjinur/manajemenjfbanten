"use strict";(globalThis.webpackChunkumroh_manager_hybrid_src=globalThis.webpackChunkumroh_manager_hybrid_src||[]).push([[157],{69:(e,t,a)=>{a.d(t,{A:()=>r});const r=(0,a(407).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},235:(e,t,a)=>{a.d(t,{A:()=>r});const r=(0,a(407).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},307:(e,t,a)=>{a.d(t,{A:()=>r});const r=(0,a(407).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},538:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var r=a(609),l=a(899),c=a(852),s=a(307),i=a(708);const n=(0,a(407).A)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);var m=a(235),d=a(69),o=a(697),y=a(313),u=a(888);const p=()=>{const{apiRequest:e}=(0,l.g)(),[t,a]=(0,r.useState)([]),[p,h]=(0,r.useState)(""),[g,v]=(0,r.useState)(!1),[f,k]=(0,r.useState)(!1),[b,x]=(0,r.useState)([{day:1,title:"Keberangkatan & Tiba di Jeddah",date:"",activities:[{time:"10:00",title:"Berkumpul di Bandara Soekarno Hatta",location:"Terminal 3",description:"Meeting point di Gate 1"},{time:"14:00",title:"Take off menuju Jeddah",location:"Pesawat",description:""}]}]);(0,r.useEffect)(()=>{(async()=>{try{const t=await e("/packages");t.success&&t.data&&a(t.data)}catch(e){console.error("Failed to fetch packages",e),u.Ay.error("Gagal memuat data paket")}})()},[]),(0,r.useEffect)(()=>{p&&(async()=>{v(!0);try{const t=await e(`/packages/${p}/itinerary`);t.success&&t.data&&t.data.length>0?u.Ay.success("Data itinerary berhasil dimuat"):x([{day:1,title:"Hari Pertama",date:"",activities:[{time:"",title:"",location:"",description:""}]}])}catch(e){console.error("Error fetching itinerary",e)}finally{v(!1)}})()},[p]);const E=(e,t,a)=>{const r=[...b];r[e][t]=a,x(r)},N=(e,t,a,r)=>{const l=[...b];l[e].activities[t][a]=r,x(l)};return(0,r.createElement)("div",{className:"space-y-6 max-w-5xl mx-auto pb-20"},(0,r.createElement)("div",{className:"flex justify-between items-center bg-white p-4 rounded-lg shadow-sm"},(0,r.createElement)("div",null,(0,r.createElement)("h1",{className:"text-2xl font-bold text-gray-800"},"Itinerary Builder"),(0,r.createElement)("p",{className:"text-gray-500 text-sm"},"Buat dan atur jadwal perjalanan umroh")),(0,r.createElement)("div",{className:"flex gap-3"},(0,r.createElement)("select",{className:"form-select rounded-md border-gray-300 shadow-sm focus:border-emerald-500 focus:ring-emerald-500",value:p,onChange:e=>h(e.target.value)},(0,r.createElement)("option",{value:""},"-- Pilih Paket --"),t.map(e=>(0,r.createElement)("option",{key:e.id,value:e.id},e.name))),(0,r.createElement)("button",{onClick:async()=>{if(p){k(!0);try{const t=await e("/packages/itinerary","POST",{package_id:p,itinerary:b});t.success?u.Ay.success("Itinerary berhasil disimpan!"):u.Ay.error(t.message||"Gagal menyimpan itinerary")}catch(e){console.error("Error saving itinerary",e),u.Ay.error("Terjadi kesalahan saat menyimpan")}finally{k(!1)}}else u.Ay.error("Silakan pilih paket terlebih dahulu")},disabled:f||!p,className:"flex items-center px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-700 disabled:opacity-50"},f?(0,r.createElement)(y.A,{size:"sm",color:"white"}):(0,r.createElement)(c.A,{size:18,className:"mr-2"}),"Simpan Itinerary"))),g?(0,r.createElement)(y.A,null):(0,r.createElement)("div",{className:"space-y-6"},b.map((e,t)=>(0,r.createElement)("div",{key:t,className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden"},(0,r.createElement)("div",{className:"bg-gray-50 p-4 border-b border-gray-200 flex justify-between items-start"},(0,r.createElement)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-12 gap-4"},(0,r.createElement)("div",{className:"md:col-span-1 flex items-center justify-center bg-emerald-100 text-emerald-800 font-bold rounded-lg h-10 w-10"},e.day),(0,r.createElement)("div",{className:"md:col-span-8"},(0,r.createElement)("input",{type:"text",value:e.title,onChange:e=>E(t,"title",e.target.value),placeholder:"Judul Hari (mis: Tiba di Madinah)",className:"w-full font-semibold text-lg border-none bg-transparent focus:ring-0 p-0 placeholder-gray-400"}),(0,r.createElement)("div",{className:"flex items-center mt-1 text-sm text-gray-500"},(0,r.createElement)(s.A,{size:14,className:"mr-1"}),(0,r.createElement)("input",{type:"date",value:e.date,onChange:e=>E(t,"date",e.target.value),className:"border-none bg-transparent focus:ring-0 p-0 text-sm text-gray-500"})))),(0,r.createElement)("button",{onClick:()=>(e=>{const t=b.filter((t,a)=>a!==e).map((e,t)=>({...e,day:t+1,title:e.title.includes("Hari ke-")?`Hari ke-${t+1}`:e.title}));x(t)})(t),className:"text-gray-400 hover:text-red-500 p-1",title:"Hapus Hari"},(0,r.createElement)(i.A,{size:18}))),(0,r.createElement)("div",{className:"p-4 space-y-3"},e.activities.map((e,a)=>(0,r.createElement)("div",{key:a,className:"flex gap-3 items-start group"},(0,r.createElement)("div",{className:"mt-2 text-gray-300 cursor-move"},(0,r.createElement)(n,{size:16})),(0,r.createElement)("div",{className:"w-24 flex-shrink-0"},(0,r.createElement)("div",{className:"relative rounded-md shadow-sm"},(0,r.createElement)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-2"},(0,r.createElement)(m.A,{size:14,className:"text-gray-400"})),(0,r.createElement)("input",{type:"time",value:e.time,onChange:e=>N(t,a,"time",e.target.value),className:"block w-full rounded-md border-gray-300 pl-8 text-sm focus:border-emerald-500 focus:ring-emerald-500"}))),(0,r.createElement)("div",{className:"flex-1 space-y-2"},(0,r.createElement)("input",{type:"text",value:e.title,onChange:e=>N(t,a,"title",e.target.value),placeholder:"Nama Aktivitas",className:"block w-full rounded-md border-gray-300 text-sm font-medium focus:border-emerald-500 focus:ring-emerald-500"}),(0,r.createElement)("div",{className:"grid grid-cols-2 gap-2"},(0,r.createElement)("div",{className:"relative rounded-md shadow-sm"},(0,r.createElement)("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-2"},(0,r.createElement)(d.A,{size:14,className:"text-gray-400"})),(0,r.createElement)("input",{type:"text",value:e.location,onChange:e=>N(t,a,"location",e.target.value),placeholder:"Lokasi",className:"block w-full rounded-md border-gray-300 pl-8 text-xs focus:border-emerald-500 focus:ring-emerald-500"})),(0,r.createElement)("input",{type:"text",value:e.description,onChange:e=>N(t,a,"description",e.target.value),placeholder:"Catatan tambahan...",className:"block w-full rounded-md border-gray-300 text-xs focus:border-emerald-500 focus:ring-emerald-500"}))),(0,r.createElement)("button",{onClick:()=>((e,t)=>{const a=[...b];a[e].activities=a[e].activities.filter((e,a)=>a!==t),x(a)})(t,a),className:"text-gray-300 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity mt-2"},(0,r.createElement)(i.A,{size:16})))),(0,r.createElement)("button",{onClick:()=>(e=>{const t=[...b];t[e].activities.push({time:"",title:"",location:"",description:""}),x(t)})(t),className:"mt-2 text-xs font-medium text-emerald-600 hover:text-emerald-700 flex items-center"},(0,r.createElement)(o.A,{size:14,className:"mr-1"})," Tambah Aktivitas")))),(0,r.createElement)("button",{onClick:()=>{x([...b,{day:b.length+1,title:`Hari ke-${b.length+1}`,date:"",activities:[{time:"",title:"",location:"",description:""}]}])},className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-lg text-gray-500 hover:border-emerald-500 hover:text-emerald-600 transition-colors flex justify-center items-center font-medium"},(0,r.createElement)(o.A,{size:20,className:"mr-2"})," Tambah Hari Perjalanan")))}},697:(e,t,a)=>{a.d(t,{A:()=>r});const r=(0,a(407).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},708:(e,t,a)=>{a.d(t,{A:()=>r});const r=(0,a(407).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},852:(e,t,a)=>{a.d(t,{A:()=>r});const r=(0,a(407).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])}}]);