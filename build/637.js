"use strict";(globalThis.webpackChunkumroh_manager_hybrid_src=globalThis.webpackChunkumroh_manager_hybrid_src||[]).push([[637],{107:(e,a,t)=>{t.d(a,{A:()=>r});const r=(0,t(407).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},188:(e,a,t)=>{t.d(a,{A:()=>r});const r=(0,t(407).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},573:(e,a,t)=>{t.d(a,{$n:()=>u,Ay:()=>p,fs:()=>m,l6:()=>d,pd:()=>c});var r=t(609),l=t.n(r),n=t(946),s=t(107);const o=({children:e,required:a})=>(0,r.createElement)("label",{className:"block text-xs font-semibold text-gray-600 uppercase tracking-wider mb-1.5 ml-1"},e," ",a&&(0,r.createElement)("span",{className:"text-red-500"},"*")),i=({message:e})=>(0,r.createElement)("div",{className:"flex items-center gap-1.5 mt-1.5 ml-1 text-red-500 animate-fade-in"},(0,r.createElement)(n.A,{size:14}),(0,r.createElement)("span",{className:"text-xs font-medium"},e)),c=l().forwardRef(({label:e,error:a,type:t="text",className:l="",required:n,...s},c)=>(0,r.createElement)("div",{className:`w-full ${l}`},e&&(0,r.createElement)(o,{required:n},e),(0,r.createElement)("div",{className:"relative"},(0,r.createElement)("input",{ref:c,type:t,className:`\n                        w-full px-4 py-2.5\n                        bg-white border text-gray-900 text-sm rounded-xl\n                        placeholder:text-gray-400\n                        transition-all duration-200\n                        disabled:bg-gray-50 disabled:text-gray-500\n                        ${a?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-200 hover:border-gray-300 focus:border-blue-500 focus:ring-blue-100"}\n                        focus:ring-4 focus:outline-none\n                    `,...s})),a&&(0,r.createElement)(i,{message:a.message}))),d=l().forwardRef(({label:e,error:a,options:t=[],className:l="",required:n,placeholder:c,...d},m)=>(0,r.createElement)("div",{className:`w-full ${l}`},e&&(0,r.createElement)(o,{required:n},e),(0,r.createElement)("div",{className:"relative"},(0,r.createElement)("select",{ref:m,className:`\n                        w-full px-4 py-2.5 appearance-none\n                        bg-white border text-gray-900 text-sm rounded-xl\n                        cursor-pointer\n                        transition-all duration-200\n                        disabled:bg-gray-50\n                        ${a?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-200 hover:border-gray-300 focus:border-blue-500 focus:ring-blue-100"}\n                        focus:ring-4 focus:outline-none pr-10\n                    `,...d},c&&(0,r.createElement)("option",{value:"",disabled:!0,hidden:!0},c),t.map(e=>(0,r.createElement)("option",{key:e.value,value:e.value},e.label))),(0,r.createElement)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none text-gray-400"},(0,r.createElement)(s.A,{size:16,strokeWidth:2.5}))),a&&(0,r.createElement)(i,{message:a.message}))),m=l().forwardRef(({label:e,error:a,rows:t=3,className:l="",required:n,...s},c)=>(0,r.createElement)("div",{className:`w-full ${l}`},e&&(0,r.createElement)(o,{required:n},e),(0,r.createElement)("textarea",{ref:c,rows:t,className:`\n                    w-full px-4 py-2.5\n                    bg-white border text-gray-900 text-sm rounded-xl\n                    placeholder:text-gray-400\n                    transition-all duration-200\n                    resize-y min-h-[80px]\n                    ${a?"border-red-300 focus:border-red-500 focus:ring-red-200":"border-gray-200 hover:border-gray-300 focus:border-blue-500 focus:ring-blue-100"}\n                    focus:ring-4 focus:outline-none\n                `,...s}),a&&(0,r.createElement)(i,{message:a.message}))),u=({children:e,isLoading:a,variant:t="primary",type:l="button",className:n="",...s})=>{const o={primary:"text-white bg-blue-600 hover:bg-blue-700 focus:ring-blue-100 shadow-lg shadow-blue-500/20 border border-transparent",secondary:"text-gray-700 bg-white border border-gray-200 hover:bg-gray-50 hover:border-gray-300 focus:ring-gray-100 shadow-sm",danger:"text-white bg-red-600 hover:bg-red-700 focus:ring-red-100 shadow-lg shadow-red-500/20 border border-transparent",ghost:"text-gray-600 hover:bg-gray-100 hover:text-gray-900 border border-transparent"};return(0,r.createElement)("button",{type:l,className:`inline-flex items-center justify-center px-5 py-2.5 text-sm font-semibold rounded-xl transition-all duration-200 focus:outline-none focus:ring-4 disabled:opacity-70 disabled:cursor-not-allowed active:scale-[0.98] ${o[t]||o.primary} ${n}`,disabled:a,...s},a?(0,r.createElement)(r.Fragment,null,(0,r.createElement)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-current",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},(0,r.createElement)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.createElement)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),(0,r.createElement)("span",{className:"opacity-90"},"Loading...")):e)},p={Input:c,Select:d,TextArea:m,Button:u}},637:(e,a,t)=>{t.r(a),t.d(a,{default:()=>x});var r=t(609),l=t(899),n=t(313),s=t(910),o=t(573),i=t(407);const c=(0,i.A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var d=t(852);const m=({size:e})=>(0,r.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},(0,r.createElement)("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),(0,r.createElement)("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})),u=({initialData:e,onSubmit:a,onCancel:t})=>{const{loading:n}=(0,l.g)("packages"),s={name:"",category:"Umrah",price_quad:"",price_triple:"",price_double:"",departure_date:"",program_days:9,hotel_makkah:"",hotel_madinah:"",airline:"",quota:45,status:"Open",description:""},[i,u]=(0,r.useState)(s);(0,r.useEffect)(()=>{e&&u({...s,...e})},[e]);const p=e=>{const{name:a,value:t}=e.target;u(e=>({...e,[a]:t}))};return(0,r.createElement)("form",{onSubmit:async e=>{e.preventDefault();try{if(!i.name||!i.price_quad)return void alert("Nama Paket dan Harga Quad wajib diisi!");await a(i)}catch(e){console.error(e),alert("Gagal menyimpan paket: "+e.message)}},className:"space-y-6"},(0,r.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},(0,r.createElement)(o.Ay.Input,{label:"Nama Paket",name:"name",value:i.name,onChange:p,placeholder:"Contoh: Umrah Akbar Syawal",required:!0}),(0,r.createElement)(o.Ay.Select,{label:"Kategori",name:"category",value:i.category,onChange:p,options:[{value:"Umrah",label:"Umrah Reguler"},{value:"Umrah Plus",label:"Umrah Plus Wisata"},{value:"Haji",label:"Haji Khusus/Furoda"},{value:"Tour",label:"Halal Tour"}]}),(0,r.createElement)(o.Ay.Input,{label:"Tanggal Keberangkatan",name:"departure_date",type:"date",value:i.departure_date,onChange:p,required:!0}),(0,r.createElement)(o.Ay.Input,{label:"Durasi (Hari)",name:"program_days",type:"number",value:i.program_days,onChange:p})),(0,r.createElement)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200"},(0,r.createElement)("h4",{className:"font-semibold text-gray-700 mb-3 flex items-center gap-2"},(0,r.createElement)(m,{size:16})," Harga Paket"),(0,r.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},(0,r.createElement)(o.Ay.Input,{label:"Quad (Sekamar Ber-4)",name:"price_quad",type:"number",prefix:"Rp",value:i.price_quad,onChange:p,required:!0}),(0,r.createElement)(o.Ay.Input,{label:"Triple (Sekamar Ber-3)",name:"price_triple",type:"number",prefix:"Rp",value:i.price_triple,onChange:p}),(0,r.createElement)(o.Ay.Input,{label:"Double (Sekamar Ber-2)",name:"price_double",type:"number",prefix:"Rp",value:i.price_double,onChange:p}))),(0,r.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},(0,r.createElement)(o.Ay.Input,{label:"Hotel Makkah",name:"hotel_makkah",value:i.hotel_makkah,onChange:p,placeholder:"Nama Hotel"}),(0,r.createElement)(o.Ay.Input,{label:"Hotel Madinah",name:"hotel_madinah",value:i.hotel_madinah,onChange:p,placeholder:"Nama Hotel"})),(0,r.createElement)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6"},(0,r.createElement)(o.Ay.Input,{label:"Maskapai",name:"airline",value:i.airline,onChange:p,placeholder:"Garuda/Saudia..."}),(0,r.createElement)(o.Ay.Input,{label:"Kuota Seat",name:"quota",type:"number",value:i.quota,onChange:p}),(0,r.createElement)(o.Ay.Select,{label:"Status",name:"status",value:i.status,onChange:p,options:[{value:"Open",label:"Open (Dibuka)"},{value:"Full",label:"Full Booked"},{value:"Closed",label:"Closed (Selesai)"},{value:"Draft",label:"Draft"}]})),(0,r.createElement)(o.Ay.TextArea,{label:"Deskripsi / Fasilitas",name:"description",value:i.description,onChange:p,rows:3}),(0,r.createElement)("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100"},(0,r.createElement)("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 flex items-center gap-2"},(0,r.createElement)(c,{size:18})," Batal"),(0,r.createElement)("button",{type:"submit",disabled:n,className:"px-6 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 shadow-lg shadow-emerald-200 flex items-center gap-2 disabled:opacity-70"},n?"Menyimpan...":(0,r.createElement)(r.Fragment,null,(0,r.createElement)(d.A,{size:18})," Simpan Paket"))))};var p=t(697);const g=(0,i.A)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]);var y=t(171),h=t(188),b=t(708);const x=()=>{const{getPackages:e,deletePackage:a}=(0,l.g)(),[t,o]=(0,r.useState)([]),[i,c]=(0,r.useState)(!0),[d,m]=(0,r.useState)(!1),[x,f]=(0,r.useState)(null),[v,E]=(0,r.useState)("active"),k=async()=>{c(!0);try{const a=await e({status:"all"!==v?v:""});o(a||[])}catch(e){console.error("Error fetching packages:",e)}finally{c(!1)}};return(0,r.useEffect)(()=>{k()},[v]),(0,r.createElement)("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen"},(0,r.createElement)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4"},(0,r.createElement)("div",null,(0,r.createElement)("h1",{className:"text-2xl font-bold text-gray-800"},"Manajemen Paket"),(0,r.createElement)("p",{className:"text-gray-500 text-sm mt-1"},"Atur jadwal keberangkatan dan harga paket.")),(0,r.createElement)("div",{className:"flex gap-3 w-full md:w-auto"},(0,r.createElement)("select",{className:"border border-gray-300 rounded-lg px-3 py-2 text-sm bg-white focus:ring-2 focus:ring-blue-500 outline-none cursor-pointer",value:v,onChange:e=>E(e.target.value)},(0,r.createElement)("option",{value:"active"},"Paket Aktif"),(0,r.createElement)("option",{value:"full"},"Full Booked"),(0,r.createElement)("option",{value:"completed"},"Selesai"),(0,r.createElement)("option",{value:"all"},"Semua Status")),(0,r.createElement)("button",{onClick:()=>{f(null),m(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium shadow-sm flex items-center gap-2 transition transform active:scale-95"},(0,r.createElement)(p.A,{size:18})," ",(0,r.createElement)("span",null,"Buat Paket")))),i?(0,r.createElement)(n.A,{text:"Memuat data paket..."}):(0,r.createElement)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},(0,r.createElement)("div",{className:"overflow-x-auto"},(0,r.createElement)("table",{className:"min-w-full divide-y divide-gray-200"},(0,r.createElement)("thead",{className:"bg-gray-50 text-gray-500 uppercase text-xs font-bold tracking-wider"},(0,r.createElement)("tr",null,(0,r.createElement)("th",{className:"px-6 py-3 text-left"},"Nama Paket"),(0,r.createElement)("th",{className:"px-6 py-3 text-left"},"Keberangkatan"),(0,r.createElement)("th",{className:"px-6 py-3 text-left"},"Kategori"),(0,r.createElement)("th",{className:"px-6 py-3 text-left"},"Harga Mulai"),(0,r.createElement)("th",{className:"px-6 py-3 text-left"},"Status"),(0,r.createElement)("th",{className:"px-6 py-3 text-right"},"Aksi"))),(0,r.createElement)("tbody",{className:"bg-white divide-y divide-gray-200 text-sm"},0===t.length?(0,r.createElement)("tr",null,(0,r.createElement)("td",{colSpan:"6",className:"px-6 py-12 text-center text-gray-400 italic"},"Tidak ada paket yang ditemukan untuk filter ini.")):t.map(e=>(0,r.createElement)("tr",{key:e.id,className:"hover:bg-gray-50 transition-colors group"},(0,r.createElement)("td",{className:"px-6 py-4"},(0,r.createElement)("div",{className:"font-bold text-gray-900 text-base"},e.name),(0,r.createElement)("div",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1"},(0,r.createElement)(g,{size:12}),(()=>{try{const a="string"==typeof e.hotels?JSON.parse(e.hotels):e.hotels;return Array.isArray(a)&&a.length>0?`${a.length} Hotel`:"Tanpa Hotel"}catch(e){return"-"}})())),(0,r.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},(0,r.createElement)("div",{className:"font-medium text-gray-900"},new Date(e.departure_date).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"})),(0,r.createElement)("div",{className:"text-xs text-blue-600 flex items-center gap-1 mt-0.5"},(0,r.createElement)(y.A,{size:12})," ",e.airline_name||"-")),(0,r.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},(0,r.createElement)("span",{className:"px-2.5 py-0.5 inline-flex text-xs font-semibold rounded-full bg-blue-50 text-blue-700 border border-blue-100"},e.category_name||"Umum")),(0,r.createElement)("td",{className:"px-6 py-4 whitespace-nowrap font-bold text-gray-700"},(e=>{if(!e||0===e.length)return"Belum ada harga";const a="string"==typeof e?JSON.parse(e):e;if(!Array.isArray(a))return"-";const t=a.map(e=>parseFloat(e.price));if(0===t.length)return"-";const r=Math.min(...t),l=Math.max(...t);return r===l?`Rp ${r.toLocaleString("id-ID")}`:`Rp ${r.toLocaleString("id-ID")} - ${l.toLocaleString("id-ID")}`})(e.pricing_variants)),(0,r.createElement)("td",{className:"px-6 py-4 whitespace-nowrap"},(0,r.createElement)("span",{className:"px-2.5 py-0.5 inline-flex text-xs font-semibold rounded-full border \n                                                    "+("active"===e.status?"bg-green-50 text-green-700 border-green-200":"full"===e.status?"bg-red-50 text-red-700 border-red-200":"bg-gray-100 text-gray-600 border-gray-200")},"active"===e.status?"Open":"full"===e.status?"Penuh":e.status)),(0,r.createElement)("td",{className:"px-6 py-4 whitespace-nowrap text-right"},(0,r.createElement)("div",{className:"flex justify-end gap-2 opacity-100 sm:opacity-0 group-hover:opacity-100 transition-opacity"},(0,r.createElement)("button",{onClick:()=>(e=>{f(e),m(!0)})(e),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition",title:"Edit Paket"},(0,r.createElement)(h.A,{size:18})),(0,r.createElement)("button",{onClick:()=>(async e=>{if(window.confirm("Yakin hapus paket ini? Data yang dihapus tidak bisa dikembalikan."))try{await a(e),k()}catch(e){alert("Gagal menghapus: "+e.message)}})(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",title:"Hapus Paket"},(0,r.createElement)(b.A,{size:18})))))))))),(0,r.createElement)(s.A,{isOpen:d,onClose:()=>m(!1),title:x?"Edit Paket":"Buat Paket Baru"},d&&(0,r.createElement)(u,{initialData:x,onSuccess:()=>{m(!1),k()},onCancel:()=>m(!1)})))}},697:(e,a,t)=>{t.d(a,{A:()=>r});const r=(0,t(407).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},708:(e,a,t)=>{t.d(a,{A:()=>r});const r=(0,t(407).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},852:(e,a,t)=>{t.d(a,{A:()=>r});const r=(0,t(407).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},910:(e,a,t)=>{t.d(a,{A:()=>n});var r=t(609),l=t(937);const n=({isOpen:e,onClose:a,title:t,children:n,size:s="md",noPadding:o=!1})=>((0,r.useEffect)(()=>{const t=e=>{"Escape"===e.key&&a()};return e&&window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,a]),e?(0,r.createElement)("div",{className:"fixed inset-0 z-50 overflow-y-auto"},(0,r.createElement)("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:a}),(0,r.createElement)("div",{className:"flex items-center justify-center min-h-screen p-4"},(0,r.createElement)("div",{className:`relative bg-white rounded-xl shadow-2xl w-full transform transition-all ${{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"}[s]}`,onClick:e=>e.stopPropagation()},(0,r.createElement)("div",{className:"flex justify-between items-center p-5 border-b border-gray-100"},(0,r.createElement)("h3",{className:"text-xl font-bold text-gray-800"},t),(0,r.createElement)("button",{onClick:a,className:"text-gray-400 hover:text-red-500 transition-colors p-1 rounded-full hover:bg-red-50"},(0,r.createElement)(l.QCr,null))),(0,r.createElement)("div",{className:o?"":"p-6"},n)))):null)},946:(e,a,t)=>{t.d(a,{A:()=>r});const r=(0,t(407).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])}}]);